<div class="row">
	<div class="col-xs-12">
		<h3 class="header smaller lighter blue">COMPRAS</h3>

		<button id="nuevaCompra" ng-disabled="!aplicacion.puede_crear" class="btn-woBox button-glow"
			ng-click="crearNuevaCompra()">
			<i class="ace-icon fa fa-plus align-top bigger-125" id="nuevaCompra"></i>
			Nuevo
		</button>
		<button style="padding: 4px 12px !important;" id="reportePrecios" ng-disabled="!aplicacion.puede_crear"
			class="btn btn-warning" ng-click="generarReportePrecios()">
			</i>
			Precios
		</button>

		<form name="formularioFiltroCompras" novalidate
			ng-submit="filtrarCompras(sucursalesUsuario,filtro.fechaInicioTexto,filtro.fechaFinTexto,filtro.razon_social,filtro.nit,filtro.monto,filtro.tipo_pago,filtro.sucursal,filtro.usuario,filtro.tipo,filtro.dociso)">

			<legend>Filtro Compras</legend>
			<table class="table table-striped table-bordered table-hover">
				<tbody>
					<tr>
						<td>

						</td>
						<td>
							<label>Desde</label>&nbsp
						</td>
						<td>
							<label>Hasta</label>&nbsp
						</td>
						<td>
						</td>
					</tr>
					<tr>
						<td>
							<label>PERIODO</label>&nbsp
						</td>
						<td>
							<div
								ng-class="{'button-glow' : !filtro.fechaInicioTexto,'has-error-date':fechasIncorrectaInic}">
								<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
									<input required autocomplete="off" class="form-control" type="text" id="fechainicio"
										ng-change="validarFechaI(filtro.fechaInicioTexto,filtro.fechaFinTexto)"
										ng-model="filtro.fechaInicioTexto" placeholder="Ingrese la fecha inicial" />
								</datepicker>
							</div>
						</td>
						<td>
							<div
								ng-class="{'button-glow' : !filtro.fechaFinTexto && filtro.fechaInicioTexto, 'has-error-date':fechasIncorrectaFin}">
								<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
									<input required autocomplete="off" class="form-control" type="text" id="fechafin"
										ng-change="validarFechaF(filtro.fechaInicioTexto,filtro.fechaFinTexto)"
										ng-model="filtro.fechaFinTexto" autocomplete="off"
										placeholder="Ingrese la fecha final" />
								</datepicker>
							</div>
						</td>
						<td>
							<button
								ng-class="{'button-glow': filtro.fechaFinTexto && filtro.fechaInicioTexto && !compras.length>0}"
								type="submit"
								ng-disabled="formularioFiltroCompras.$invalid || fechasIncorrectaInic || fechasIncorrectaFin "
								class="btn-woBox">
								<i class="ace-icon fa fa-plus align-top bigger-125"></i>
								Filtrar
							</button>
						</td>
					</tr>
					<tr>
						<td>
							&nbsp
						</td>
						<td>
							<label>Razón Social</label>&nbsp
						</td>
						<td>
							<label>NIT</label>&nbsp
						</td>
						<td>
							<label>Monto</label>&nbsp
						</td>
						<td>
							<label>Tipo de Compra</label>&nbsp
						</td>
					</tr>
					<tr>
						<td>
							FILTRO
						</td>
						<td>
							<input type="text" ng-model="filtro.razon_social">
						</td>
						<td>
							<input type="number" ng-model="filtro.nit">
						</td>
						<td>
							<input type="number" step="0.01" ng-model="filtro.monto">
						</td>
						<td>
							<select id="pagoCompra" name="pagoCompra" ng-model="filtro.tipo_pago"
								data-placeholder="Elija un tipo de pago">
								<option value="0">TODOS</option>
								<option ng-repeat="tipoPago in tiposPago" value="{{tipoPago.id}}">
									{{tipoPago.nombre}}</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>
							&nbsp
						</td>
						<td>
							<label>Sucursal</label>&nbsp
						</td>
						<td>
							<label>Usuario</label>&nbsp
						</td>
						<td>
							<label>Tipo Compra</label>&nbsp
						</td>
						<td>
							<label>Doc ISO</label>&nbsp
						</td>
					</tr>
					<tr>
						<td>

						</td>
						<td>
							<select id="sucursalFiltro" name="sucursalFiltro" ng-model="filtro.sucursal"
								data-placeholder="Elija una sucursal">
								<option value="0">TODOS</option>
								<option ng-repeat="sucursalFiltro in sucursales track by $index"
									value="{{sucursalFiltro.id}}">{{sucursalFiltro.nombre}}</option>
							</select>
						</td>
						<td>
							<input type="text" ng-model="filtro.usuario">
						</td>
						<td>
							<select id="tipoFiltro" name="tipoFiltro" ng-model="filtro.tipo"
								data-placeholder="Elija una sucursal">
								<option value="0" selected>TODOS</option>
								<option value="productos">PRODUCTOS</option>
								<option value="servicios">SERVICIOS</option>

							</select>
						</td>
						<td>
							<input type="text" ng-model="filtro.dociso">
						</td>
					</tr>
				</tbody>
			</table>

		</form>

		<div class="clearfix">
			<div class="pull-right tableTools-container"></div>
		</div>


		<div class="table-header">
			Lista de Compras
			<div class="pos-rel pull-right">
				<a class="btn btn-primary btn-xs" href="javascript:void(0)"
					ng-click="abrirModalConfigEvaluacionProveedores()">
					<i class="menu-icon fa fa-cogs"></i>
				</a>
			</div>
			<div class="pos-rel pull-right">
				<a class="btn btn-primary btn-xs" href="javascript:void(0)"
					ng-click="abrirModalDetalleEvaluacionProveedores()">
					<i class="menu-icon fa fa-bar-chart-o"></i>
				</a>
			</div>
			<div class="pos-rel pull-right" ng-if="usuario.empresa.usar_importacion_compra">
				<a data-toggle="dropdown" class="btn btn-primary btn-xs dropdown-toggle" id="zoomBtn">
					<i class="ace-icon fa fa-wrench  bigger-110 icon-only "></i>
				</a>
				<ul
					class="dropdown-menu-right dropdown-navbar navbar-orange dropdown-menu dropdown-caret dropdown-close importar-text">
					<li class="dropdown-header header-importar">
						<i class="ace-icon fa fa-wrench white"></i>
						Importaciones
					</li>
					<li class="dropdown-content">
						<ul class="dropdown-menu dropdown-navbar navbar-pink">
							<li>
								<div class="clearfix">
									<span class="pull-left" style="color:rgb(85, 128, 163) !important">
										Compras(Ingresos Diarios)
									</span>

									<a href="/recursos/EJEMPLO-DATOS-COMPRAS(INGRESOS-DIARIOS).xlsx"
										class="boton-importar pull-right">
										<i class="fa  fa-cloud-download green"></i>
									</a>

									<div class="fileUpload boton-importar pull-right">
										<span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
										<input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
											custom-on-file-change="subirExcelComprasIngresosDiarios" />
									</div>
								</div>
							</li>
							<li>
								<div class="clearfix">
									<span class="pull-left" style="color:rgb(85, 128, 163) !important">
										Pagos Compras Credito
									</span>
									<a href="/recursos/EJEMPLO-DATOS-PAGOS-COMPRAS.xlsx"
										class="boton-importar pull-right">
										<i class="fa  fa-cloud-download green"></i>
									</a>
									<div class="fileUpload boton-importar pull-right">
										<span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
										<input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
											custom-on-file-change="subirExcelPagosCompras" />
									</div>
								</div>
							</li>
						</ul>
					</li>
					<li class="dropdown-footer"></li>
				</ul>
			</div>
		</div>
		<div class="bg-info" ng-if="compras.length>0">
			<label>
				Mostrar
				<select ng-model="itemsPerPageCompra" class="form-control input-sm"
					ng-change="SelectItemPorPagina(itemsPerPageCompra);filtrarCompras(sucursalesUsuario,filtro.fechaInicioTexto?filtro.fechaInicioTexto:null,filtro.fechaFinTexto?filtro.fechaFinTexto:null,filtro.razon_social,filtro.nit,filtro.monto,filtro.tipo_pago,filtro.sucursal,filtro.usuario,filtro.tipo)">
					<option value="{{compras.length}}">Todos</option>
					<option ng-selected="true" value="10">10</option>
					<option value="25">25</option>
					<option value="50">50</option>
					<option value="100">100</option>
				</select> Elementos</label>
		</div>
		<table ng-if="compras.length>0" class="table table-striped" at-table at-paginated at-list="compras"
			at-config="config">
			<thead></thead>
			<tbody>
				<tr>
					<td at-title="Nro" height="10">{{($index+1)}}</td>
					<td at-title="Sucursal" width="150">
						<p ng-if="item.almacen">{{item.almacen.sucursal.nombre}}</p>
						<p ng-if="!item.almacen">{{item.sucursal.nombre}}</p>
					</td>
					<td at-title="Razón Social Proveedor" width="150">{{item.proveedor.razon_social}}</td>
					<td at-title="NIt Proveedor" width="150">{{item.proveedor.nit}}</td>
					<td at-title="Doc/ISO" width="150">{{item.numero_iso_compra}}</td>
					<td at-implicit at-sortable at-attribute="factura" width="150"></td>
					<td at-sortable at-title="Fecha" width="150">
						{{item.fecha | date : 'dd/M/yyyy' : timezone}}</td>
					<td at-title="Hora fecha" width="150">
						{{item.createdAt | date : 'HH:mm' : timezone}}&nbsp{{item.createdAt | date : 'dd/M/yyyy' :
						timezone}}
					</td>
					<td at-title="Monto" width="150">{{item.total | number:2}}</td>
					<td at-title="Tipo de Pago" width="150">{{item.tipoPago.nombre}}</td>

					<td at-title="Pago" width="300">
						<div ng-if="item.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO"
							class="hidden-sm hidden-xs action-buttons">
							Plazo: {{item.dias_credito}} días&nbsp A cuenta: Bs {{item.a_cuenta | number:2}}&nbsp Saldo:
							Bs {{item.saldo | number:2}}&nbsp

							<a class="blue" href="javascript:void(0)" ng-if="item.saldo>0"
								ng-click="abrirPopupPago(item)">
								<i class="ace-icon fa fa-exclamation-circle bigger-130"></i>
							</a>
						</div>
						<div ng-if="item.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-md hidden-lg">
							<div class="inline pos-rel">
								<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown"
									data-position="auto">
									<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
								</button>
								Plazo: {{item.dias_credito}} días&nbsp A cuenta: Bs {{item.a_cuenta}}&nbsp Saldo: Bs
								{{item.saldo}}&nbsp
								<ul
									class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
									<li>
										<a href="javascript:void(0)" ng-if="item.saldo>0"
											ng-click="abrirPopupPago(item)" class="tooltip-info" data-rel="tooltip"
											title="View">
											<span class="blue">
												<i class="ace-icon fa fa-exclamation-circle bigger-120"></i>
											</span>
										</a>
									</li>
								</ul>
							</div>
						</div>

					</td>
					<td at-title="Usuario" width="150">{{item.usuario.nombre_usuario}}</td>
					<td at-title="Acciones" width="150">
						<div class="hidden-sm hidden-xs action-buttons">
							<a class="green" href="javascript:void(0)" ng-click="imprimirCompra(item)">
								<i class="ace-icon fa fa-print bigger-130"></i>
							</a>
							<a class="blue" href="javascript:void(0)" e-disabled="!aplicacion.puede_ver"
								ng-click="verCompra(item)">
								<i class="ace-icon fa fa-search-plus bigger-130"></i>
							</a>
							<a class="green"
								ng-if="item.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO && item.pagosCompra.length==0"
								href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar"
								ng-click="modificarCompra(item)">
								<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
							</a>
							<a class="green"
								ng-if="item.tipoPago.nombre!=diccionario.TIPO_PAGO_CREDITO && item.detallesCompra.length > 0"
								href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar"
								ng-click="modificarCompra(item)">
								<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
							</a>
							<a href="javascript:void(0)" ng-click="iniciarImpresionIso(item)"
								ng-if="usuario.empresa.usar_configuracion_iso && item.almacen && item.configuracionesIso !=null">
								<img src="img/iso-print.png" height="15" width="15" alt="">
							</a>

						</div>

						<div class="hidden-md hidden-lg">
							<div class="inline pos-rel">
								<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown"
									data-position="auto">
									<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
								</button>

								<ul
									class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
									<li>
										<a href="javascript:void(0)" ng-click="imprimirCompra(item)"
											class="tooltip-info" data-rel="tooltip" title="View">
											<span class="green">
												<i class="ace-icon fa fa-print bigger-120"></i>
											</span>
										</a>
									</li>
									<li>
										<a href="javascript:void(0)" e-disabled="!aplicacion.puede_ver"
											ng-click="verCompra(item)" class="tooltip-info" data-rel="tooltip"
											title="View">
											<span class="blue">
												<i class="ace-icon fa fa-search-plus bigger-120"></i>
											</span>
										</a>
									</li>
									<li>
										<a href="javascript:void(0)"
											e-disabled="!aplicacion.puede_modificar && item.detallesCompra.length == 0"
											ng-click="modificarCompra(item)" class="tooltip-success" data-rel="tooltip"
											title="Edit">
											<span class="green">
												<i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
											</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
		<table class="table table-striped">
			<tfoot>
				<tr ng-if="compras.length>0">
					<th></th>
					<th></th>
					<th width="150"></th>
					<th width="150"></th>
					<th width="150"></th>
					<th width="150"></th>
					<th width="150"></th>
					<th>
						<b>TOTAL</b>
					</th>
					<th>{{sumarMonto(compras)|number:2 }}</th>
					<th width="150"></th>
					<th width="150"></th>
					<th width="150"></th>
					<th width="150"></th>
				</tr>
			</tfoot>
		</table>
		<div class="pull-right">
			<at-pagination ng-if="compras.length>0" at-list="compras" at-config="config"></at-pagination>
		</div>
		<!-- <div class="table-header">
			Lista de Compras
		</div> -->

		<!-- div.table-responsive -->

		<!-- div.dataTables_borderWrap -->
		<!-- <div style="overflow-x:auto;">
			<table id="tabla-compras" class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th class="center">
							<label class="pos-rel">
								<input type="checkbox" class="ace" />
								<span class="lbl"></span>
							</label>
						</th>
						<th>Nº</th>
						<th>
							Sucursal

						</th>
						<th>
							Razón Social Proveedor
						</th>
						<th>
							Nit Proveedor
						</th>
						<th>
							Factura
						</th>
						<th>
							Fecha Fact.
						</th>
						<th>
							Hora - Fecha
						</th>
						<th>Monto</th>
						<th>Tipo de Pago</th>
						<th>Pago</th>
						<th>Usuario</th>
						<th>Acciones</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="compra in compras">
						<td class="center">
							<label class="pos-rel">
								<input type="checkbox" class="ace" />
								<span class="lbl"></span>
							</label>
						</td>
						<td>{{$index+1}}</td>
						<td ng-if="compra.almacen">{{compra.almacen.sucursal.nombre}}</td>
						<td ng-if="!compra.almacen">{{compra.sucursal.nombre}}</td>
						<td>{{compra.proveedor.razon_social}}</td>
						<td>{{compra.proveedor.nit}}</td>
						<td>{{compra.factura}}</td>
						<td>{{compra.fecha | date:"dd/MM/yyyy"}}</td>
						<td>{{compra.createdAt | date:"HH:mm - dd/MM/yyyy"}}</td>
						<td>{{compra.total | number:2}}</td>
						<td>{{compra.tipoPago.nombre}}</td>
						<td>
							<div ng-if="compra.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-sm hidden-xs action-buttons">
								Plazo: {{compra.dias_credito}} días&nbsp A cuenta: Bs {{compra.a_cuenta | number:2}}&nbsp Saldo: Bs
								{{compra.saldo | number:2}}&nbsp

								<a class="blue" href="javascript:void(0)" ng-if="compra.saldo>0" ng-click="abrirPopupPago(compra)">
									<i class="ace-icon fa fa-exclamation-circle bigger-130"></i>
								</a>
							</div>
							<div ng-if="compra.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-md hidden-lg">
								<div class="inline pos-rel">
									<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>
									Plazo: {{compra.dias_credito}} días&nbsp A cuenta: Bs {{compra.a_cuenta}}&nbsp Saldo: Bs {{compra.saldo}}&nbsp
									<ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
										<li>
											<a href="javascript:void(0)" ng-if="compra.saldo>0" ng-click="abrirPopupPago(compra)" class="tooltip-info"
											 data-rel="tooltip" title="View">
												<span class="blue">
													<i class="ace-icon fa fa-exclamation-circle bigger-120"></i>
												</span>
											</a>
										</li>
									</ul>
								</div>
							</div>
						</td>
						<td>{{compra.usuario.nombre_usuario}}{{compra.pagosCompra.length}}</td>
						<td>
							<div class="hidden-sm hidden-xs action-buttons">
								<a class="green" href="javascript:void(0)" ng-click="imprimirCompra(compra)">
									<i class="ace-icon fa fa-print bigger-130"></i>
								</a>
								<a class="blue" href="javascript:void(0)" e-disabled="!aplicacion.puede_ver" ng-click="verCompra(compra)">
									<i class="ace-icon fa fa-search-plus bigger-130"></i>
								</a>
								<a class="green" ng-if="compra.pagosCompra.length==0" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar"
								 ng-click="modificarCompra(compra)">
									<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
								</a>
							</div>

							<div class="hidden-md hidden-lg">
								<div class="inline pos-rel">
									<button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
										<i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
									</button>

									<ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
										<li>
											<a href="javascript:void(0)" ng-click="imprimirCompra(compra)" class="tooltip-info" data-rel="tooltip" title="View">
												<span class="green">
													<i class="ace-icon fa fa-print bigger-120"></i>
												</span>
											</a>
										</li>
										<li>
											<a href="javascript:void(0)" e-disabled="!aplicacion.puede_ver" ng-click="verCompra(compra)" class="tooltip-info"
											 data-rel="tooltip" title="View">
												<span class="blue">
													<i class="ace-icon fa fa-search-plus bigger-120"></i>
												</span>
											</a>
										</li>
										<li>
											<a href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="modificarCompra(compra)"
											 class="tooltip-success" data-rel="tooltip" title="Edit">
												<span class="green">
													<i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
												</span>
											</a>
										</li>
									</ul>
								</div>
							</div>
						</td>

					</tr>
					<tr ng-if="compras.length>0">
						<td colspan="7"></td>
						<td>
							<b>TOTAL</b>
						</td>
						<td colspan="5">{{sumarMonto(compras)|number:2}}</td>

					</tr>
				</tbody>
			</table>
		</div> -->
	</div>
</div>

<div id="modal-wizard-compra-edicion" class="modal wizard-posicion">

	<div class="row">
		<div class="col-sm-4">
			<div class="widget-box">
				<form id="formularioCompra" name="formularioCompra" novalidate
					ng-submit="guardarCompra(formularioCompra.$valid,compra)">
					<div class="widget-header">
						<h4 class="widget-title">DATOS DE COMPRA</h4>
						&nbsp;
						<button id="btnguardar" type="submit" ng-disabled="fechaNoValida || bloquearGuardado"
							class="btn btn-primary">
							<i class="ace-icon fa fa-floppy-o align-top bigger-125"></i>
							GUARDAR
						</button>
						<button type="button" class="btn btn-primary btn-danger" ng-click="cerrarPopupEdicion()">
							<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
							CERRAR
						</button>
					</div>

					<div class="widget-body">
						<div class="widget-main">
							<table class="table table-striped table-bordered table-hover">
								<tr ng-if="usuario.empresa.usar_funciones_erp">
									<td>
										<label>MOVIMIENTO<span class="red">(*)</span></label>
										<select style="width:180px" ng-disabled="compra.detallesCompra.length>0"
											ng-change="verificarMomivmiento(compra); ocultarMensajesValidacion(); tipoPagoPorMovimiento(compra)"
											data-validate="validate(required)" required id="movimiento"
											name="movimiento" ng-model="compra.movimiento.clase"
											data-placeholder="Click para escoger"
											ng-options="movimiento as movimiento.nombre for movimiento in movimientosIngreso track by movimiento.id">
											<!--<option ng-disabled="movimiento.nombre_corto==diccionario.EGRE_AJUSTE" ng-repeat="movimiento in movimientosEgreso" value="{{movimiento.id}}-{{movimiento.nombre_corto}}">{{movimiento.nombre}}</option>-->
										</select>



									</td>
									<td
										ng-if="compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_AJUSTE && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_PRODUCCION">

										<div class="col-md-8">
											<div>
												<label>PRODUCTO</label>
											</div>

											<label uib-tooltip="Usar Producto">

												<input
													ng-disabled="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_IMPORTACION||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES||compra.detallesCompra.length>0"
													ng-model="compra.usar_producto" checked="checked" type="checkbox"
													class="ace ace-switch ace-switch-5">
												<span class="lbl"
													data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>

										</div>
										<div class="col-md-4" ng-if="compra.usar_producto">
											<a class=" pull-right" href="javascript:void(0)"
												ng-click="abrirDialogPedidos()">
												<img src="img/icono-pedidos.png" height="50" width="50" alt="">

											</a>
										</div>
										<div class="col-md-6"
											ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">

											<div>
												<label>EMPRESA</label>
											</div>
										</div>
										<div class="col-md-6"
											ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
											<label uib-tooltip="Tipo Retencion??">
												<input ng-change="ReCalcularConRetencion(compra)"
													ng-model="compra.tipo_retencion" checked="checked" type="checkbox"
													class="ace ace-switch ace-switch-5">
												<span class="lbl"
													data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>
										</div>

									</td>
								</tr>
								<tr
									ng-if="compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_AJUSTE  && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_PRODUCCION">

									<td>
										<label>NIT <span class="red">(*)</span></label>
										<input id="nit" ng-keypress="interceptarTecla($event,'razon_social',true)"
											ng-disabled="compra.proveedor.razon_social && ListaProveedoresRZ.length > 0"
											data-validate="validate(required)" required type="number" min="0"
											ng-model="compra.proveedor.nit" placeholder="Ingrese el NIT..."
											class="form-control"
											uib-typeahead="proveedor as proveedor.nit for proveedor in buscarProveedor($viewValue, true)"
											typeahead-wait-ms="2000"
											typeahead-template-url="templates/autocompletar.html"
											typeahead-show-hint="false" typeahead-min-length="0"
											typeahead-on-select="establecerProveedor($item, $model, $label, $event)">

									</td>
									<td>
										<label>RAZÓN SOCIAL<span class="red">(*)</span></label>
										<input id="razon_social" ng-keypress="interceptarTecla($event,'factura',true)"
											data-validate="validate(required)" required type="text"
											ng-model="compra.proveedor.razon_social"
											placeholder="Ingrese la Razon Social" class="form-control"
											uib-typeahead="proveedor as proveedor.razon_social for proveedor in buscarProveedor($viewValue, false)"
											typeahead-wait-ms="2000"
											typeahead-template-url="templates/autocompletar.html"
											typeahead-show-hint="false" typeahead-min-length="0"
											typeahead-on-select="establecerProveedor($item, $model, $label, $event)">
									</td>
								</tr>
								<tr
									ng-if="compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_COMPRA_SIN_FACTURA&&compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_SERVICIOS&&compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_AJUSTE && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_PRODUCCION">
									<td>
										<label>NÚM. FACTURA<span class="red">(*)</span></label>
										<input id="factura" ng-keypress="interceptarTecla($event,'centro_costo',true)"
											data-validate="validate(required,number)" required type="number"
											placeholder="factura" class="form-control" ng-model="compra.factura"
											ng-disabled="compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_IMPORTACION" />
									</td>
									<td>
										<label>N° AUTORIZACIÓN/CUF<span class="red">(*)</span></label>
										<input data-validate="validate(required,number)" required id="autorizacion"
											ng-disabled="compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_IMPORTACION"
											required type="text" placeholder="numero autorizacion" class="form-control"
											ng-model="compra.autorizacion" />
									</td>
								</tr>
								<tr>
									<td>
										<label>FECHA<span class="red">(*)</span></label>
										<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
											<input data-validate="validate(required)" required class="form-control"
												type="text" id="fechaCompra" ng-model="compra.fechaTexto"
												ng-change="validarFechaCompra(compra.fechaTexto)"
												placeholder="Ingrese la fecha" />
										</datepicker>
										<div ng-show="fechaNoValida" class="">
											<span class="invalid-message">Debe ingresar una fecha menor o igual a la de
												hoy</span>
										</div>
									</td>
									<td
										ng-if="compra.movimiento.clase.nombre_corto === diccionario.MOVING_POR_PRODUCCION">
										<label>FECHA VENCIMIENTO<span class="red">(*)</span></label>
										<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
											<input data-validate="validate(required)" required class="form-control"
												type="text" id="fechaCompra" ng-model="compra.fecha_vencimiento"
												placeholder="Ingrese la fecha" />
										</datepicker>
									</td>
									<td
										ng-if="compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_COMPRA_SIN_FACTURA && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_AJUSTE && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_PRODUCCION">
										<label>CÓDIGO DE CONTROL<span class="red">(*)</span></label>
										<input type="text" placeholder="codigo de control" class="text-uppercase"
											data-validate="validate(required)" required id="codigo_control_compra"
											ng-model="compra.codigo_control"
											onkeypress="()=>{ return ((event.charCode >= 48 && event.charCode <= 57) || (event.charCode >= 65 && event.charCode <= 70) || (event.charCode >= 97 && event.charCode <= 102))}"
											ng-disabled="compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_IMPORTACION" />
									</td>
								</tr>
								<tr>
									<td>
										<label>SUCURSAL<span class="red">(*)</span></label>
										<select data-validate="validate(required)" required id="sucursal"
											name="sucursal" class="width-select"
											ng-options="sucursal as sucursal.nombre for sucursal in sucursales track by sucursal.id"
											ng-model="compra.sucursal" ng-change="obtenerAlmacenes(compra.sucursal.id)"
											ng-disabled="compra.id">
										</select>
									</td>
									<td ng-if="compra.usar_producto">
										<label>ALMACEN<span class="red">(*)</span></label>
										<select data-validate="validate(required)" required id="almacen"
											class="width-select" name="almacen" ng-model="compra.almacen"
											ng-options="almacen as almacen.nombre for almacen in almacenes track by almacen.id"
											data-placeholder="Click para escoger" ng-disabled="compra.id"></select>
									</td>
								</tr>
								<tr
									ng-if="compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_AJUSTE && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_PRODUCCION">
									<td>
										<label>TIPO DE PAGO<span class="red">(*)</span></label>
										<select required id="pago" name="pago" class="form-control"
											ng-change="cambiarTipoPago(compra.tipoPago)" ng-model="compra.tipoPago"
											ng-options="tipoPago as tipoPago.nombre for tipoPago in tiposPago track by tipoPago.id"
											data-placeholder="Click para escoger" ng-disabled="compra.id"></select>

									</td>
									<td
										ng-if="compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_IMPORTACION">
										<label>
											DUI
										</label>
										<input type="text" class="form-control" ng-model="compra.dui">
									</td>
									<td
										ng-if="usuario.empresa.usar_relacion_compra_rendicion && (compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_IMPORTACION && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_SERVICIOS)">
										<label>
											Doc. rendición
										</label>

										<input id="rendicion" ng-keypress="interceptarTecla($event,'factura',true)"
											autocomplete="off" ng-disabled="!compra.sucursal" type="text"
											class="form-control" ng-model="compra.doc_rendicion"
											placeholder="Ingrese la rendicion"
											uib-typeahead="rendicion as (rendicion.numero_correlativo+'-'+rendicion.solicitud.solicitante.persona.nombre_completo+'-'+fechaATexto(rendicion.solicitud.fecha)) for rendicion in buscarRendiciones($viewValue)"
											typeahead-wait-ms="2000"
											typeahead-template-url="templates/autocompletar.html"
											typeahead-show-hint="false" typeahead-min-length="0"
											typeahead-on-select="establecerRendicion($item, $model, $label, $event)">
										<small class="text-danger" ng-if="compraRendic === 0">{{compra.existee}}</small>
										<small class="text-success" ng-if="compraRendic > 0">{{compra.existee}}</small>
									</td>
								</tr>
								<tr>
									<td ng-if="!esContado">
										<label>DIAS</label>
										<input data-validate="validate(required,number)" required type="number"
											ng-model="compra.dias_credito" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="!esContado">
										<label>SUJETO A DF</label>
										<input disabled type="number" step="0.001" ng-model="compra.total" />
									</td>
								</tr>
								<tr>
									<td ng-if="!esContado">
										<label>A CUENTA (Bs)</label>
										<input data-validate="validate(required,number)" required type="number"
											step="0.001" ng-model="compra.a_cuenta" value="0.0"
											ng-change="calcularSaldo()" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="!esContado">
										<label>SALDO</label>
										<input disabled type="number" step="0.001" ng-model="compra.saldo" />
									</td>
								</tr>
								<tr
									ng-if="compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_AJUSTE && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_PRODUCCION">
									<td>
										<label>DESCUENTOS GENERALES</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-disabled="compra.detallesCompra.length>0||compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_IMPORTACION||compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_RETENCION_BIENES||compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_RETENCION_SERVICIOS"
												ng-model="compra.descuento_general" />
											<span id="descuentos_generales" class="lbl check-descuento"></span>
										</label>
									</td>
									<td class="widget-box collapsed"
										ng-if="usuario.empresa.usar_calificaciones_proveedor">

										<div class="widget-header">
											<label>EVALUACIONES</label>
											<div class="widget-toolbar">
												<a href="javascript:void(0)" class="green" e-disabled="compra.id"
													ng-click="abrirDialogConceptoEdicion(TipoCalifiacion)">
													<i class="ace-icon fa fa-pencil"></i>
												</a>
												<a href="javascript:void(0)" class="blue" data-action="collapse">
													<i class="ace-icon fa fa-chevron-down"></i>
												</a>

											</div>
										</div>

										<div class="widget-body" style="display: none;">
											<div class="widget-main">
												<div id="edit-settings row">
													<div ng-if="calificacion.concepto.habilitado"
														ng-repeat="calificacion in compra.detalleCalifiacionProveedor">
														<div class="row">
															<div class="col-md-8">
																<label class="inline">
																	<input type="checkbox"
																		name="{{calificacion.concepto.nombre}}1"
																		id="{{calificacion.concepto.nombre}}2"
																		ng-model="calificacion.valor"
																		ng-change="calcularTotalCalificacion()"
																		class="ace">
																	<span
																		class="lbl bigger-80"><sub>{{calificacion.concepto.nombre}}</sub></span>

																</label>
															</div>
															<div class="col-md-4">
																<input type="number" min="1" max="10" step="1"
																	onkeypress="()=>{return event.charCode >= 48 && event.charCode <= 57}"
																	ng-value='1' ng-model="calificacion.puntuacion"
																	required class="form-control" name="puntuacion-prov"
																	id="puntuacion-prov" aria-describedby="helpId"
																	placeholder="">
															</div>
														</div>

													</div>
												</div>
											</div>
										</div>


										<div class="blue bigger-200">
											{{compra.calificacion_proveedor|number:2}} <i>%</i>
										</div>
									</td>
								</tr>
								<tr>
									<td ng-if="compra.descuento_general">
										<label>DESCUENTOS (-)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-disabled="compra.detallesCompra.length>0"
												ng-model="compra.tipo_descuento" ng-change="recalcular()" />
											<span id="descuentos" class="lbl check-compra"></span>
										</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.descuento"
											ng-disabled="compra.detallesCompra.length>0" step="0.001" class="col-xs-12"
											type="number" value="0.0" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="compra.descuento_general">
										<label>RECARGOS (+)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-disabled="compra.detallesCompra.length>0"
												ng-model="compra.tipo_recargo" ng-change="recalcular()" />
											<span id="recargos" class="lbl check-compra"></span>
										</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.recargo"
											ng-disabled="compra.detallesCompra.length>0" step="0.001" class="col-xs-12"
											type="number" value="0" />
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr>
									<td ng-if="compra.descuento_general">
										<label>ICE (-)</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.ice"
											ng-disabled="compra.detallesCompra.length>0" step="0.001" class="col-xs-12"
											type="number" value="0" />
										<span class="red">(*)</span>
									</td>
									<td ng-if="compra.descuento_general">
										<label>EXCENTOS (-)</label>
										<input required ng-change="calcularImporteGeneral()" ng-model="compra.excento"
											ng-disabled="compra.detallesCompra.length>0" step="0.001" class="col-xs-12"
											type="number" value="0" />
										<span class="red">(*)</span>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<a class="green" href="javascript:void(0)"
											ng-click="compra.usarObservacion=(compra.usarObservacion)?false:true">
											<i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
										</a>
										<label>
											<b>OBSERVACIÓN</b>
										</label>
										<input ng-if="compra.usarObservacion" ng-model="compra.observacion" type="text"
											required class="form-control">
									</td>
								</tr>
							</table>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="col-sm-8">
			<div class="widget-box" ng-if="compra.usar_producto">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA PRODUCTO</h4>
				</div>
				<div class="widget-body">
					<div class="widget-main">
						<form id="formularioBusquedaProducto" name="formularioBusquedaProducto" novalidate>
							<table class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th>
											<label>CENTRO DE COSTO</label>
										</th>
										<th>
											<label>PRODUCTO</label>
											<!-- <div>
												<div class="col-md-1">
													<a class="green">
														<i class="ace-icon fa fa-barcode dark bigger-250 fa-stack-2x"></i>
														<i class="ace-icon fa  fa-filter red bigger-200 fa-stack-1x"></i>
														
													</a>
												</div>

												<label class="col-md-3 pull-left" uib-tooltip="Usar lector de barra">

													<input ng-model="usuario.usar_lector_de_barra" ng-change="UsarLectorDeBarra()" checked="checked" type="checkbox" class="ace ace-switch ace-switch-5">
													<span class="lbl" data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
												</label>
											</div> -->
										</th>
										<!--<th>
																	<label>CÓD. ITEM</label>
																</th>-->
										<th>
											<label>UNID. MED.</label>
										</th>
										<th
											ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
											<label>FECHA VENC.</label>
										</th>
										<th
											ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
											<label>LOTE</label>
											<label uib-tooltip="Usar Producto">Carga Masiva (Serie)
												<input
													ng-disabled="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_IMPORTACION||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES||compra.detallesCompra.length>0"
													ng-model="compra.carga_masiva_serie" checked="checked"
													type="checkbox" class="ace ace-switch ace-switch-5">
												<span class="lbl"
													data-lbl="Si&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No"></span>
											</label>
										</th>
										<th>
											<label>CANT. (u)
												<p
													ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_PRODUCCION">
													PESO
												</p>
											</label>
										</th>
										<th>
											<label>C. U.
												{{(usuario.empresa.ver_costos_dolares ? '($us/u)' : '(Bs/u)')}}</label>
										</th>

										<th>
											<label>IMP. {{(usuario.empresa.ver_costos_dolares ? '$us' : 'Bs')}}</label>
										</th>
										<th>
											<label>ACC.</label>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<input id="centro_costo" autocomplete="off"
												ng-keypress="interceptarTecla($event,'id_producto',true)"
												style="width:130px;" capitalize required
												ng-disabled="!compra.almacen.id || detalleCompra.producto.nombre || compra.generado_por_pedido || detalleCompra.editar_centro_costo"
												type="text" ng-model="detalleCompra.centroCosto.nombre"
												placeholder="Ingrese el centro del costo..."
												uib-typeahead="centroCosto as centroCosto.nombre for centroCosto in centrosCosto | filter:{nombre:$viewValue}"
												typeahead-wait-ms="2000"
												typeahead-template-url="templates/autocompletar.html"
												typeahead-show-hint="false" typeahead-min-length="0"
												typeahead-on-select="establecerCentroCosto($item, $model, $label, $event)">

										</td>
										<td>

											<input id="id_producto"
												ng-keypress="interceptarTecla($event,'fecha_vencimiento',true)" required
												ng-disabled="!compra.almacen.id || compra.generado_por_pedido"
												type="text" ng-model="detalleCompra.producto.nombre"
												placeholder="Ingrese el nombre del producto..."
												uib-typeahead="producto as (producto.codigo+'-'+producto.nombre+'-'+producto.unidad_medida+'-'+producto.descripcion) for producto in buscarProducto($viewValue)"
												typeahead-wait-ms="1000"
												typeahead-template-url="templates/autocompletar.html"
												typeahead-show-hint="false" typeahead-min-length="3"
												typeahead-on-select="establecerProducto($item, $model, $label, $event)">
										</td>
										<!--<td ng-if="detalleCompra.producto.nombre.id">
																	{{detalleCompra.producto.nombre.codigo}}
																</td>
																<td ng-if="!detalleCompra.producto.nombre.id">
																	{{detalleCompra.producto.codigo}}
																</td>-->
										<td ng-if="detalleCompra.producto.nombre.id">
											{{detalleCompra.producto.nombre.unidad_medida}}
										</td>
										<td ng-if="!detalleCompra.producto.nombre.id">
											{{detalleCompra.producto.unidad_medida}}
										</td>
										<td
											ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
											<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
												<input id="fecha_vencimiento"
													ng-keypress="interceptarTecla($event,'lote',true)"
													class="form-control" type="text" autocomplete="off"
													ng-model="detalleCompra.fechaVencimientoTexto"
													placeholder="Ingrese la fecha" />
											</datepicker>
										</td>
										<td
											ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">

											<input id="lote" ng-if="!compra.carga_masiva_serie"
												ng-keypress="interceptarTecla($event,'costo_unitario',true)" type="text"
												ng-model="detalleCompra.lote" class="col-xs-12" />
											<input onfocus="this.select();" id="lote_masivo"
												ng-if="compra.carga_masiva_serie"
												uib-typeahead="lote for lote in establecerLote($viewValue)"
												typeahead-min-length="6" typeahead-wait-ms="500"
												typeahead-select-on-exact="true"
												typeahead-template-url="templates/autocompletar.html"
												typeahead-show-hint="false" type="text"
												typeahead-on-select="agregarDetalleCompraMasiva(detalleCompra)"
												ng-model="detalleCompra.lote" class="col-xs-12" />

											<button ng-disabled="!detalleCompra.producto.id"
												ng-if="usuario.empresa.usar_generador_series"
												class="btn btn-white btn-primary btn-bold btn-sm generar-serie"
												ng-click="generarSerie(detalleCompra, true)">
												<i class="ace-icon fa fa-barcode bigger-120 blue"></i>
												Generar serie
											</button>
										</td>
										<td>
											<input onfocus="this.select();" id="cantidad"
												ng-keypress="interceptarTecla($event,'agregar_detalle_compra',false)"
												required class="col-xs-12" ng-change="calcularImporte()"
												ng-model="detalleCompra.cantidad" type="number" />
										</td>
										<td style="text-align:  center;">
											<input onfocus="this.select();" ng-if="!usuario.empresa.ver_costos_dolares"
												id="costo_unitario"
												ng-keypress="interceptarTecla($event,'cantidad',true)" required
												class="col-xs-12" ng-change="calcularImporte()" step="0.001"
												ng-model="detalleCompra.costo_unitario"
												value="{{detalleCompra.producto.inventarios.length>0?detalleCompra.producto.nombre.inventarios[0].costo_unitario:0}}"
												type="number" />
											<!-- <input onfocus="this.select();" ng-if="usuario.empresa.ver_costos_dolares"
												id="costo_unitario_dolares"
												ng-keypress="interceptarTecla($event,'cantidad',true)" required
												class="col-xs-12" ng-change="calcularImporte()" step="0.001"
												ng-model="detalleCompra.costo_unitario_dolares"
												value="{{detalleCompra.producto.inventarios.length>0?detalleCompra.producto.nombre.inventarios[0].costo_unitario_dolares ? detalleCompra.producto.nombre.inventarios[0].costo_unitario_dolares : detalleCompra.producto.nombre.inventarios[0].costo_unitario * usuario.empresa.tipo_cambio_dolar :0}}"
												type="number" /> -->

											<span class="blue">
												Último precio
											</span>
											<span class="label label-danger label-white middle tooltip-info"
												ng-if="precio_inventario" data-rel="tooltip" tooltip-placement="top"
												uib-tooltip="Último precio de compra">{{precio_inventario}}</span>
										</td>
										<td>
											{{ (usuario.empresa.ver_costos_dolares ? detalleCompra.importe_dolares :
											detalleCompra.importe) | number:2}}
										</td>
										<td>
											<button ng-disabled="!detalleCompra.producto.id"
												ng-if="compra.movimiento.clase.nombre_corto===diccionario.MOVING_POR_PRODUCCION"
												class="btn btn-white btn-primary btn-bold btn-sm generar-serie"
												ng-click="generarSerieProduccion(detalleCompra, true)">
												<i class="ace-icon fa fa-barcode bigger-120 blue"></i>
												Generar serie
											</button>
											<button id="agregar_detalle_compra" type="button"
												ng-disabled="formularioBusquedaProducto.$invalid"
												ng-click="verificarProducto(detalleCompra)"
												class="btn btn-success btn-sm">
												<i class="ace-icon fa fa-plus bigger-110"></i>
											</button>
											<div class="space-6"></div>
											<button id="mostrar_desc" type="button"
												ng-if="compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_PRODUCCION && compra.movimiento.clase.nombre_corto != diccionario.MOVING_POR_RETENCION_BIENES"
												ng-click="mostrarDescuentos()" class="btn btn-info btn-sm">
												<i class="ace-icon fa fa-exchange bigger-110"></i>
											</button>
										</td>
									</tr>
									<tr class="des-datos" style="display:none;">
										<th>
											<label>DESC. (-)</label>
											<label>
												<input class="ace ace-switch ace-switch-4" type="checkbox"
													ng-model="detalleCompra.tipo_descuento" ng-change="recalcular()" />
												<span class="lbl check-compra"></span>
											</label>
										</th>
										<th>
											<label>REC. (+)</label>
											<label>
												<input class="ace ace-switch ace-switch-4" type="checkbox"
													ng-model="detalleCompra.tipo_recargo" ng-change="recalcular()" />
												<span class="lbl check-compra"></span>
											</label>
										</th>
										<th>
											<label>ICE (-)</label>
										</th>
										<th>
											<label>EXC. (-)</label>
										</th>
										<!--<th>
																	<label>SUJETO A DF</label>
																</th>-->
									</tr>
									<tr class="des-datos" style="display:none;">
										<td>
											<input required ng-change="calcularImporte()"
												ng-model="detalleCompra.descuento" step="0.001" class="col-xs-12"
												type="number" value="0" />
										</td>
										<td>
											<input required ng-change="calcularImporte()"
												ng-model="detalleCompra.recargo" step="0.001" class="col-xs-12"
												type="number" value="0" />
										</td>
										<td>
											<input required ng-change="calcularImporte()" ng-model="detalleCompra.ice"
												step="0.001" class="col-xs-12" type="number" value="0" />
										</td>
										<td>
											<input required ng-change="calcularImporte()"
												ng-model="detalleCompra.excento" step="0.001" class="col-xs-12"
												type="number" value="0" />
										</td>
										<!--<td>
																	{{detalleCompra.total}}
																</td>-->
									</tr>
								</tbody>
							</table>
						</form>
					</div>
				</div>
			</div>
			<div class="widget-box" ng-if="!compra.usar_producto">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA SERVICIOS</h4>
				</div>
				<div class="widget-body">
					<div class="widget-main">
						<form id="formularioBusquedaServicio" name="formularioBusquedaServicio" novalidate>
							<table class="table table-striped table-bordered table-hover">
								<thead>
									<tr>
										<th>
											<label>SERVICIO</label>

										</th>
										<th>
											<label>C. U.{{usuario.empresa.ver_costos_dolares ? '($us/u)' :
												'(Bs/u)'}}</label>
										</th>
										<th>
											<label>CANT. (u)</label>
										</th>
										<th>
											<label>IMP.{{usuario.empresa.ver_costos_dolares ? '($us)' : '(Bs)'}}</label>
										</th>
										<th>
											<label>ACC.</label>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<div class="input-group">
												<span
													class="input-group-addon glyphicon glyphicon-pencil point-edit green"
													ng-click="abrirDialogServicios(datosServicios)"></span>


												<input id="id_servicio" autocomplete="off"
													ng-keypress="interceptarTecla($event,'fecha_vencimiento',true)"
													required ng-disabled="!compra.sucursal.id" type="text"
													ng-model="detalleCompra.servicio"
													placeholder="Ingrese el nombre del servicio..."
													uib-typeahead="servicio as (servicio.nombre+'-'+servicio.nombre_corto) for servicio in datosServicios.clases"
													typeahead-wait-ms="1000"
													typeahead-template-url="templates/autocompletar.html"
													typeahead-show-hint="false" typeahead-min-length="3"
													typeahead-on-select="establecerServicio($item, $model, $label, $event)">
											</div>
										</td>

										<td>
											<input autofocus onfocus="this.select();" id="costo_unitario"
												ng-keypress="interceptarTecla($event,'cantidad',true)" required
												class="col-xs-12" ng-change="calcularImporte()" step="0.001"
												ng-model="detalleCompra.costo_unitario" type="number" />
										</td>
										<td>
											<input id="cantidad"
												ng-keypress="interceptarTecla($event,'agregar_detalle_compra',false)"
												required class="col-xs-12" ng-change="calcularImporte()"
												ng-model="detalleCompra.cantidad" type="number" />
										</td>
										<td>
											{{(usuario.empresa.usar_costos_dolares ? detalleCompra.importe_dolares :
											detalleCompra.importe )|number:2}}
										</td>
										<td>
											<button id="agregar_detalle_compra" type="button"
												ng-disabled="formularioBusquedaServicio.$invalid"
												ng-click="verificarServicio(detalleCompra)"
												class="btn btn-success btn-sm">
												<i class="ace-icon fa fa-plus bigger-110"></i>
											</button>

										</td>
									</tr>
								</tbody>
							</table>
						</form>
					</div>
				</div>
			</div>
			<div class="widget-box" ng-if="compra.usar_producto">
				<div class="widget-header" ng-if="compra.detallesCompra.length>0">
					<div class="row">
						<div class="col-sm-6">
							<h4 class="widget-title">DETALLE DE COMPRA</h4>
						</div>
						<div class="col-sm-6">
							<div class="inline pos-rel pull-right">
								<a data-toggle="dropdown" href="javascript:void(0)" class="dropdown-toggle">
									<i class="glyphicon  glyphicon-list-alt"></i>
								</a>

								<ul id="campos-detalle-compra"
									class="dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret">
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_producto"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>NOMBRE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_codigo_producto"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>CÓD. ITEM</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_unidad_producto"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>UNID. MED.</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_costo_unitario"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>C.U.
											{{usuario.empresa.ver_costos_dolares ? '($us/u)' : '(Bs/u)'}}</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_cantidad"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>CANT. (u)</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_fecha_vencimiento"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>VENC.</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_lote"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>LOTE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_importe"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>IMP. {{usuario.empresa.ver_costos_dolares ? '($us)' : '(Bs)'}}</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_descuento"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>DESC. (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_recargo"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>REC. (+)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_ice"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>ICE (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_excento"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>EXC. (-)</label>
									</li>
									<li
										ng-if="compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_total"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>SUJETO A CF</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_it_retencion"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>IT</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_iue"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>IUE</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_pagado"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>PAGADO</label>
									</li>
									<li class="divider"></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="widget-body" ng-if="compra.detallesCompra.length>0" style="overflow-x:auto;">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover table-responsive">
							<thead>
								<tr>
									<th>
										<label>#</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_codigo_producto">
										<label>CÓD. ITEM</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_producto">
										<label>PRODUCTO</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<label>VENC</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_unidad_producto">
										<label>UNID. MED.</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_cantidad">
										<label>CANT. (u)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_costo_unitario">
										<label>C.U.
											{{usuario.empresa.ver_costos_dolares ? '($us/u)' : '(Bs/u)'}}</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_importe">
										<label>IMP. {{usuario.empresa.ver_costos_dolares ? '($us)' : '(Bs)'}}</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_descuento">
										<label>DESC. (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_recargo">
										<label>REC. (+)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_ice">
										<label>ICE (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_excento">
										<label>EXC. (-)</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES">
										<label>SUJETO A CF</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>IT</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>IUE</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>Pagado</label>
									</th>
									<th>
										<label>ACCIONES</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="detalleCompra in compra.detallesCompra" ng-if="!detalleCompra.eliminado">
									<td>
										{{$index+1}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">
										{{detalleCompra.producto.codigo}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										{{detalleCompra.producto.nombre}}
									</td>
									<td
										ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										{{detalleCompra.fechaVencimientoTexto}}
									</td>
									<td
										ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
											<input ng-disabled="detalleCompra.inventario.detallesMovimiento.length>1"
												autocomplete="off" class="form-control" type="text"
												ng-model="detalleCompra.inventario.fechaVencimientoTexto"
												placeholder="Ingrese la fecha" />
										</datepicker>
									</td>
									<td
										ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										{{detalleCompra.lote}}
									</td>
									<td
										ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<input class="col-xs-12" type="text"
											ng-disabled="detalleCompra.inventario.detallesMovimiento.length>1"
											ng-model="detalleCompra.inventario.lote" />
									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">
										{{detalleCompra.producto.unidad_medida}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_cantidad">
										{{detalleCompra.cantidad}}
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_cantidad">
										<input required class="col-xs-12"
											ng-disabled="detalleCompra.inventario.detallesMovimiento.length>1"
											ng-change="calcularImporteDetalleEdicion(detalleCompra, compra)"
											step="0.001" ng-model="detalleCompra.cantidad" type="number" min="0.001" />
									</td>
									<td
										ng-if="!compra.id && configuracionCompraVista.mostrar_costo_unitario && !usuario.empresa.ver_costos_dolares">
										{{detalleCompra.costo_unitario}}
									</td>
									<td
										ng-if="compra.id && configuracionCompraVista.mostrar_costo_unitario && !usuario.empresa.ver_costos_dolares">
										<input required class="col-xs-12"
											ng-disabled="detalleCompra.inventario.detallesMovimiento.length>1"
											ng-change="calcularImporteDetalleEdicion(detalleCompra, compra)"
											step="0.001" ng-model="detalleCompra.costo_unitario" type="number"
											min="0.001" />
									</td>
									<td
										ng-if="!compra.id && configuracionCompraVista.mostrar_costo_unitario && usuario.empresa.ver_costos_dolares">
										{{detalleCompra.costo_unitario_dolares}}
									</td>
									<td
										ng-if="compra.id && configuracionCompraVista.mostrar_costo_unitario && usuario.empresa.ver_costos_dolares">
										<input required class="col-xs-12"
											ng-disabled="detalleCompra.inventario.detallesMovimiento.length>1"
											ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001"
											ng-model="detalleCompra.costo_unitario" type="number" min="0.001" />
									</td>
									<!--compra.descuento_general &&-->
									<td
										ng-if="configuracionCompraVista.mostrar_importe && !usuario.empresa.ver_costos_dolares">
										{{detalleCompra.importe|number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_importe && usuario.empresa.ver_costos_dolares">
										{{detalleCompra.importe_dolares |number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_descuento">
										<label ng-if="compra.descuento_general">
											{{detalleCompra.descuento|number:2}}
										</label>
										<label ng-if="!compra.descuento_general">
											{{calcularTotalDescuento(detalleCompra)}}
											<span ng-if="detalleCompra.tipo_descuento && detalleCompra.descuento > 0"
												class="badge badge-info">
												{{detalleCompra.descuento|number:2}} %
											</span>
											<span ng-if="!detalleCompra.tipo_descuento  && detalleCompra.descuento > 0"
												class="badge badge-success">
												Bs {{detalleCompra.descuento|number:2}}
											</span>
										</label>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_recargo">
										{{detalleCompra.recargo|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_ice">
										{{detalleCompra.ice|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_excento">
										{{detalleCompra.excento|number:2}}
									</td>
									<!--<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{compra.descuento|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{compra.recargo|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{compra.ice|number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{compra.excento|number:2}}
									</td>-->
									<td
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES && !usuario.empresa.ver_costos_dolares">
										{{detalleCompra.total | number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES && usuario.empresa.ver_costos_dolares">
										{{detalleCompra.total_dolares | number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>{{detalleCompra.it | number:2}}</label>
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>{{detalleCompra.iue | number:2}}</label>
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>{{detalleCompra.total | number:2}}</label>
									</td>
									<td>
										<div class="action-buttons">
											<span ng-if="detalleCompra.inventario.detallesMovimiento.length>1"
												class="red">el inventario de este detalle ya tiene movimiento no se
												puede
												editar.</span>
											<a class="red" href="javascript:void(0)"
												ng-if="detalleCompra.inventario.detallesMovimiento.length==1 && !compra.generado_por_pedido"
												ng-click="eliminarDetalleCompra(detalleCompra)">
												<!-- <i class="ace-icon fa fa-trash-o bigger-130"></i> -->
												<span class="fa-stack bigger-100">
													<i class="fa fa-circle fa-stack-2x"></i>
													<i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
												</span>
											</a>
											<a class="red" href="javascript:void(0)"
												ng-if="!compra.id && !compra.generado_por_pedido"
												ng-click="eliminarDetalleCompra(detalleCompra)">
												<span class="fa-stack bigger-100">
													<i class="fa fa-circle fa-stack-2x"></i>
													<i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
												</span>
											</a>

											<a class="blue" href="javascript:void(0)"
												ng-if="(usuario.empresa.usar_generador_series || usuario.empresa.usar_produccion_compra) && (detalleCompra.inventario.lote || detalleCompra.lote)"
												uib-tooltip="Imprimir Serie" tooltip-placement="left"
												tooltip-append-to-body="true"
												ng-click="generarSerie(detalleCompra, false)">
												<span class="fa-stack bigger-100">
													<i class="fa fa-square-o fa-stack-2x"></i>
													<i class="fa fa-barcode fa-stack-1x"></i>
												</span>
											</a>

										</div>
									</td>
								</tr>
								<tr>
									<td>

									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										<b>TOTALES</b>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_costo_unitario">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_cantidad">

									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">

									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{(usuario.empresa.ver_costos_dolares ? compra.importe_dolares :
										compra.importe)|number:2}}
									</td>

									<td ng-if="configuracionCompraVista.mostrar_descuento">
										{{(usuario.empresa.ver_costos_dolares ? compra.descuento_dolares :
										compra.descuento)|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_recargo">
										{{(usuario.empresa.ver_costos_dolares ? compra.recargo_dolares :
										compra.recargo)|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_ice">
										{{(usuario.empresa.ver_costos_dolares ? compra.ice_dolares :
										compra.ice)|number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_excento">
										{{(usuario.empresa.ver_costos_dolares ? compra.excento_dolares :
										compra.excento)|number:2}}
									</td>
									<td id="total_compra"
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES">
										{{(usuario.empresa.ver_costos_dolares ? compra.total_dolares :
										compra.total)|number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										{{(usuario.empresa.ver_costos_dolares ? compra.total_dolares :
										compra.it)|number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										{{(usuario.empresa.ver_costos_dolares ? compra.total_dolares :
										compra.iue)|number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										{{(usuario.empresa.ver_costos_dolares ? compra.total_dolares :
										compra.total)|number:2}}
									</td>
									<td>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="widget-box" ng-if="!compra.usar_producto">
				<div class="widget-header" ng-if="compra.detallesCompra.length>0">
					<div class="row">
						<div class="col-sm-6">
							<h4 class="widget-title">DETALLE DE COMPRA</h4>
						</div>
						<div class="col-sm-6">
							<div class="inline pos-rel pull-right">
								<a data-toggle="dropdown" href="javascript:void(0)" class="dropdown-toggle">
									<i class="glyphicon  glyphicon-list-alt"></i>
								</a>

								<ul id="campos-detalle-compra"
									class="dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret">
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_producto"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>NOMBRE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_codigo_producto"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>CÓD. ITEM</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_unidad_producto"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>UNID. MED.</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_costo_unitario"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>C.U. (Bs/u)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_cantidad"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>CANT. (u)</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_fecha_vencimiento"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>VENC.</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_lote"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>LOTE</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_importe"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>IMP. (Bs)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_descuento"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>DESC. (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_recargo"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>REC. (+)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_ice"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>ICE (-)</label>
									</li>
									<li>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_excento"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>EXC. (-)</label>
									</li>
									<li
										ng-if="compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_total"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>SUJETO A CF</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_it_retencion"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>IT</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_iue"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>IUE</label>
									</li>
									<li
										ng-if="usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="configuracionCompraVista.mostrar_pagado"
												ng-change="guardarConfiguracionCompraVista()" />
											<span class="lbl check-descuento"></span>
										</label>
										<label>PAGADO</label>
									</li>
									<li class="divider"></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="widget-body" ng-if="compra.detallesCompra.length>0">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th>
										<label>#</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_producto">
										<label>SERVICIO</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_codigo_producto">
										<label>CÓD. ITEM</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_unidad_producto">
										<label>UNID. MED.</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_costo_unitario">
										<label>C.U. (Bs/u)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_cantidad">
										<label>CANT. (u)</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<label>VENC</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<label>LOTE</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_importe">
										<label>IMP. (Bs)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_descuento">
										<label>DESC. (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_recargo">
										<label>REC. (+)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_ice">
										<label>ICE (-)</label>
									</th>
									<th ng-if="configuracionCompraVista.mostrar_excento">
										<label>EXC. (-)</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>SUJETO A CF</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>IT</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>IUE</label>
									</th>
									<th
										ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>Pagado</label>
									</th>
									<th>
										<label>ACCIONES</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="detalleCompra in compra.detallesCompra" ng-if="!detalleCompra.eliminado">
									<td>
										{{$index+1}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										{{detalleCompra.servicio.nombre}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">
										{{detalleCompra.producto.codigo}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">
										{{detalleCompra.producto.unidad_medida}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_costo_unitario">
										{{detalleCompra.costo_unitario}}
									</td>
									<td ng-if="!compra.id && configuracionCompraVista.mostrar_cantidad">
										{{detalleCompra.cantidad}}
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_costo_unitario">
										<input required class="col-xs-12"
											ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001"
											ng-model="detalleCompra.costo_unitario" type="number" min="0.001" />
									</td>
									<td ng-if="compra.id && configuracionCompraVista.mostrar_cantidad">
										<input required class="col-xs-12"
											ng-change="calcularImporteDetalleEdicion(detalleCompra)" step="0.001"
											ng-model="detalleCompra.cantidad" type="number" min="0.001" />
									</td>
									<td
										ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										{{detalleCompra.fechaVencimientoTexto}}
									</td>
									<td
										ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">
										<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
											<input class="form-control" type="text"
												ng-model="detalleCompra.inventario.fechaVencimientoTexto"
												placeholder="Ingrese la fecha" autocomplete="off" />
										</datepicker>
									</td>
									<td
										ng-if="(!compra.id || !detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										{{detalleCompra.lote}}
									</td>
									<td
										ng-if="(compra.id && detalleCompra.id) && configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">
										<input class="col-xs-12" type="text" ng-model="detalleCompra.inventario.lote" />
									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{detalleCompra.importe | number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{detalleCompra.descuento|number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{detalleCompra.recargo | number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{detalleCompra.ice | number:2}}
									</td>
									<td ng-if="!compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{detalleCompra.excento | number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_descuento">
										{{compra.descuento | number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_recargo">
										{{compra.recargo | number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_ice">
										{{compra.ice | number:2}}
									</td>
									<td ng-if="compra.descuento_general && configuracionCompraVista.mostrar_excento">
										{{compra.excento | number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_SERVICIOS">
										{{detalleCompra.total | number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>{{detalleCompra.it | number:2}}</label>
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>{{detalleCompra.iue | number:2}}</label>
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_pagado && usuario.empresa.usar_funciones_erp && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS">
										<label>{{detalleCompra.total | number:2}}</label>
									</td>
									<td>
										<a class="red" href="javascript:void(0)"
											ng-click="eliminarDetalleCompra(detalleCompra)">
											<i class="ace-icon fa fa-trash-o bigger-130"></i>
										</a>
									</td>
								</tr>
								<tr>
									<td>

									</td>
									<td ng-if="configuracionCompraVista.mostrar_producto">
										<b>TOTALES</b>
									</td>
									<td ng-if="configuracionCompraVista.mostrar_codigo_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_unidad_producto">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_costo_unitario">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_cantidad">

									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_fecha_vencimiento && usuario.empresa.usar_vencimientos">

									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_lote && usuario.empresa.usar_vencimientos">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_importe">
										{{compra.importe | number:2}}
									</td>
									<td ng-if="configuracionCompraVista.mostrar_descuento">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_recargo">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_ice">

									</td>
									<td ng-if="configuracionCompraVista.mostrar_excento">

									</td>
									<td id="total_compra"
										ng-if="configuracionCompraVista.mostrar_total && compra.movimiento.clase.nombre_corto!=diccionario.MOVING_POR_RETENCION_SERVICIOS">
										{{compra.total | number:2}}
									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_it_retencion && usuario.empresa.usar_funciones_erp">

									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_iue && usuario.empresa.usar_funciones_erp">

									</td>
									<td
										ng-if="configuracionCompraVista.mostrar_pagado && compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS && usuario.empresa.usar_funciones_erp">
										{{compra.total | number:2}}
									</td>

									<td>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>
<!-- PAGE CONTENT ENDS -->

<div id="modal-wizard-compra-vista" class="modal wizard-posicion">
	<div class="row">
		<div class="col-sm-12">
			<div class="widget-box">
				<div class="widget-header">
					<h4 class="widget-title">DATOS DE COMPRA</h4>
					&nbsp;
					<button class="btn btn-primary btn-danger" ng-click="cerrarPopupVista()">
						<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
						CERRAR
					</button>
				</div>

				<div class="widget-body">
					<div class="widget-main">
						<table class="table table-striped table-bordered table-hover">
							<tr ng-if="usuario.empresa.usar_funciones_erp">
								<td>
									<label>MOVIMIENTO</label>
								</td>
								<td ng-if="compra.movimiento.clase">
									{{compra.movimiento.clase.nombre_corto}}
								</td>
								<td ng-if="!compra.movimiento.clase">
									{{compra.tipoMovimiento.nombre}}
								</td>
								<td>
									COMPRA DE
								</td>
								<td>

									<div ng-if="compra.usar_producto">

										<label>PRODUCTOS</label>

									</div>
									<div ng-if="!compra.usar_producto">

										<label>SERVICIOS</label>

									</div>

								</td>
								<td
									ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
									TIPO RETENCION
								</td>
								<td
									ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_SERVICIOS||compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
									<div ng-if="compra.tipo_retencion">

										<label>COMPRA DE PRODUCTOS</label>

									</div>
									<div ng-if="!compra.tipo_retencion">

										<label>COMPRA DE SERVICIO</label>

									</div>
								</td>
							</tr>
							<tr>
								<td>
									<label>NIT</label>
								</td>
								<td>
									{{compra.proveedor.nit}}
								</td>
								<td>
									<label>RAZÓN SOCIAL</label>
								</td>
								<td>
									{{compra.proveedor.razon_social}}
								</td>
								<td>
									<label>NÚM. FACTURA</label>
								</td>
								<td>
									{{compra.factura}}
								</td>
							</tr>
							<tr>
								<td>
									<label>NÚM. AUTORIZACIÓN</label>
								</td>
								<td>
									{{compra.autorizacion}}
								</td>
								<td>
									<label>FECHA</label>
								</td>
								<td>
									{{compra.fecha | date:"dd/MM/yyyy"}}
								</td>
								<td>
									<label>CÓDIGO DE CONTROL</label>
								</td>
								<td>
									{{compra.codigo_control}}
								</td>
							</tr>
							<tr>
								<td>
									<label>SUCURSAL</label>
								</td>
								<td ng-if="compra.almacen">
									{{compra.almacen.sucursal.nombre}}
								</td>
								<td ng-if="!compra.almacen">
									{{compra.sucursal.nombre}}
								</td>
								<td ng-if="compra.almacen">
									<label>ALMACÉN</label>
								</td>
								<td ng-if="compra.almacen">
									{{compra.almacen.nombre}}
								</td>
								<td>

								</td>
								<td>

								</td>
							</tr>
							<tr>
								<td>
									TIPO DE PAGO : {{compra.tipoPago.nombre}}
								</td>
								<td ng-if="compra.saldo">
									DIAS : {{compra.dias_credito}}
								</td>
								<td ng-if="compra.saldo">
									SUJETO A DF : {{compra.total}}
								</td>
								<td ng-if="compra.saldo">
									A CUENTA (Bs) : {{compra.a_cuenta}}
								</td>
								<td ng-if="compra.saldo">
									SALDO : {{compra.saldo}}
								</td>
							</tr>
							<tr>
								<td>
									<label>DESCUENTOS GENERALES</label>
								</td>
								<td>
									<label>
										<input class="ace ace-switch ace-switch-4" type="checkbox" ng-disabled="true"
											ng-model="compra.descuento_general" />
										<span class="lbl check-descuento"></span>
									</label>
								</td>
								<td ng-if="compra.descuento_general">
									<label>DESCUENTOS (-)</label>
									<label>
										<input class="ace ace-switch ace-switch-4" type="checkbox"
											ng-model="compra.tipo_descuento" ng-disabled="true" />
										<span class="lbl check-compra"></span>
									</label>
									{{compra.descuento}}
								</td>
								<td ng-if="compra.descuento_general">
									<label>RECARGOS (+)</label>
									<label>
										<input class="ace ace-switch ace-switch-4" type="checkbox"
											ng-model="compra.tipo_recargo" ng-change="recalcular()" />
										<span class="lbl check-compra"></span>
									</label>
									{{compra.recargo}}
								</td>
								<td ng-if="compra.descuento_general">
									<label>ICE (-)</label>
									<input required ng-change="calcularImporteGeneral()" ng-model="compra.ice"
										step="0.001" class="col-xs-12" type="number" value="0" />
								</td>
								<td ng-if="compra.descuento_general">
									<label>EXCENTOS (-)</label>
									{{compra.excento}}
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
			<div class="space-6"></div>
			<div class="widget-header" ng-if="compra.detallesCompra.length>0">
				<h4 class="widget-title">DETALLE DE COMPRA</h4>
			</div>
			<div class="widget-body" ng-if="compra.detallesCompra.length>0">
				<div class="widget-main">
					<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th>
									<label>NOMBRE</label>
								</th>
								<th>
									<label>CÓDIGO ÍTEM</label>
								</th>
								<th>
									<label>UNIDAD DE MEDIDA</label>
								</th>
								<th>
									<label>COSTO UNITARIO (Bs/u)</label>
								</th>
								<th>
									<label>CANTIDAD (u)</label>
								</th>
								<th>
									<label>IMPORTE (Bs)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>DESCUENTOS (-)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>RECARGOS (+)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>ICE (-)</label>
								</th>
								<th ng-if="!compra.descuento_general">
									<label>EXENTOS (-)</label>
								</th>
								<th>
									<label>SUJETO A CF</label>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="detalleCompra in compra.detallesCompra">
								<td ng-if="detalleCompra.producto">
									{{detalleCompra.producto.nombre}}
								</td>
								<td ng-if="detalleCompra.servicio">
									{{detalleCompra.servicio.nombre}}
								</td>
								<td>
									<span ng-if="detalleCompra.producto">{{detalleCompra.producto.codigo}}</span>
								</td>
								<td>
									<span ng-if="detalleCompra.producto">{{detalleCompra.producto.unidad_medida}}</span>
								</td>
								<td>
									{{detalleCompra.costo_unitario}}
								</td>
								<td>
									{{detalleCompra.cantidad}}
								</td>
								<td>
									{{detalleCompra.importe}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.descuento}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.recargo}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.ice}}
								</td>
								<td ng-if="!compra.descuento_general">
									{{detalleCompra.excento}}
								</td>
								<td>
									{{detalleCompra.total}}
								</td>
							</tr>
							<tr>
								<td>
									<b>TOTALES</b>
								</td>
								<td>

								</td>
								<td>

								</td>
								<td>

								</td>
								<td>

								</td>
								<td>
									{{compra.importe}}
								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td ng-if="!compra.descuento_general">

								</td>
								<td>
									{{compra.total}}
								</td>
								<td>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
<div id="dialog-eliminar-compra" title="¿Eliminación de Compra?" class="modal">
	<p>
		<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Esta seguro de eliminar la
		sucursal seleccionada?
	</p>
	<button type="button" class="btn btn-danger" ng-click="eliminarSucursal(sucursal)">Si</button>
	<button type="button" class="btn btn-success" ng-click="cerrarConfirmacionEliminacion()">No</button>
</div>
<div id="dialog-pago" title="Cobro deuda pendiente" class="modal">
	<form name="formularioPago" novalidate ng-submit="efectuarPago(pago)">

		<div ng-if="compra.tipoPago.nombre==diccionario.TIPO_PAGO_CREDITO" class="hidden-sm hidden-xs action-buttons">
			<p class="center">{{compra.proveedor.razon_social}}</p>
			<p class="center">
				<b>Factura Nro. </b>{{compra.factura}}
			</p>
			<b>Plazo: </b>{{compra.dias_credito}} días&nbsp
			<b>A cuenta: Bs </b>{{compra.a_cuenta}}&nbsp
			<b>Saldo: Bs </b>{{compra.saldo}}&nbsp
			<b>Importe: Bs. </b>{{compra.total}}&nbsp
		</div>
		<p>
			<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Ingrese el monto a
			pagar?
		</p>
		<input required ng-model="pago" min="0.000000000001" max="compra.saldo" type="number" step=".000000001">
		<button type="submit" class="btn btn-success" ng-disabled="formularioPago.$invalid">Pagar</button>
		<button type="button" class="btn btn-danger" ng-click="cerrarPopupPago()">Cancelar</button>
	</form>
</div>

<!-- === modal SERVICIOS"==== -->
<div id="dialog-servicios" class="modal">
	<div class="modal-header bg-primary">
		<h4 class='smaller text-white text-uppercase'>
			<i class='icono-prerequisito'></i>
			<label> &nbsp;{{tipo_edicion.nombre}}:</label>
		</h4>
	</div>
	<div class="modal-body">
		<form ng-submit="agregarConceptoEdicion(clase)">

			<div class="row">


				<div class="col-sm-4">
					<div class="form-group">
						<label for="servicio">Servicio</label>
						<input type="text" ng-model="clase.nombre" type="text" capitalize
							style="text-transform:uppercase;" class="form-control" id="servicio" name="servicio"
							placeholder="Servicio">
					</div>
				</div>
				<div class="col-sm-4">
					<div class="form-group">
						<label for="comentario">Comentario</label>
						<input type="text" ng-model="clase.nombre_corto" type="text" capitalize
							style="text-transform:uppercase;" class="form-control" id="comentario" name="comentario"
							placeholder="Comentario">
					</div>
				</div>
				<div class="col-sm-2">
					<br>
					<div class="form-group">
						<!-- <button type="button" class="btn btn-success" ng-click="AgregarDepartamento(clase)">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    </button> -->
						<button ng-if="!clase.edit" type="submit" class="btn btn-success">
							<span class="glyphicon glyphicon-plus" aria-hidden="true">Agregar</span>
						</button>
						<button ng-if="clase.edit" type="submit" class="btn btn-primary">
							<span class="glyphicon glyphicon-plus" aria-hidden="true">Modificar</span>
						</button>
						<button ng-if="clase.edit" type="button" class="btn btn-danger"
							ng-click="cancelarEdicionDepartamento(clase)">
							<span class="" aria-hidden="true">Cancelar</span>
						</button>
					</div>
				</div>
			</div>
		</form>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>Servicio</th>
					<th>Comentario</th>
					<th>Editar</th>
					<th>Habilitar</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="clase in tipo_edicion.clases">
					<th scope="row">{{clase.nombre}}</th>
					<th scope="row">{{clase.nombre_corto}}</th>
					<td>
						<a href="javascript:void(0)" ng-click="modificarConceptoEdicion(clase)">
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						</a>
					</td>
					<td>
						<label>
							<input name="switch-field-1" class="ace ace-switch ace-switch-5" type="checkbox"
								ng-model="clase.habilitado">
							<span class="lbl check-espaniol"></span>
						</label>
					</td>
					<td>
						<a href="javascript:void(0)" role="button" ng-click="establecerServicioSeleccionado(clase)">
							<span class="badge badge-success ">
								<span class="fa fa-check bigger-200" aria-hidden="true"></span>
							</span>
						</a>

					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="modal-footer wizard-actions">
		<button class="btn btn-primary btn-sm" ng-click="guardarConceptoEdicion(tipo_edicion)">
			<i class="glyphicon glyphicon-floppy-disk"></i>Guardar
		</button>
		<button class="btn btn-danger btn-sm" ng-click="cerrarDialogServicios()">
			<i class="ace-icon fa fa-times"></i>Cancelar
		</button>
	</div>

</div>
<!-- ========= fin SERVICIOS ========= -->

<!-- === modal pedidos"==== -->
<div id="dialog-pedidos" class="modal">
	<div class="modal-content">
		<div class="modal-header bg-primary">
			<h4 class='smaller text-white text-uppercase'>
				<i class='icono-prerequisito'></i>
				<label>Pedidos</label>
			</h4>
		</div>
		<div class="modal-body">
			<div id="tabla-productos_wrapper" class="dataTables_wrapper">
				<div class="row">
					<div class="col-sm-3">
						<div>
							<label>
								Mostrar <select ng-model="paginatorPedidosCompra.itemsPerPage"
									ng-change="paginatorPedidosCompra.getFirstPage()" name="tabla-pedido_length"
									aria-controls="tabla-pedido" class="form-control input-sm">
									<option value="0">Todos</option>
									<option ng-selected="true" value="10">10</option>
									<option value="25">25</option>
									<option value="50">50</option>
									<option value="100">100</option>
								</select> Elementos</label>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="form-group">
							<label>Tipo:</label>
							<select name="" id="" ng-model="filtroPedidosCompra.tipo"
								ng-change="obtenerPedidosEmpresa(filtroPedidosCompra)">
								<option value="1">Productos</option>
								<option value="2">Servicios</option>
							</select>

						</div>
					</div>
					<div class="col-sm-2">
						<div class="form-group">
							<label>Doc.:</label>
							<input class="form-control input-sm" type="search"
								ng-model="filtroPedidosCompra.correlativo" ng-model-options='{ debounce: 600 }'
								ng-change="obtenerPedidosEmpresa(filtroPedidosCompra)">

						</div>
					</div>
					<div class="col-sm-2">
						<div class="form-group">
							<label>Doc/ISO:</label>
							<input class="form-control input-sm" type="search" ng-model="filtroPedidosCompra.dociso"
								ng-model-options='{ debounce: 600 }'
								ng-change="obtenerPedidosEmpresa(filtroPedidosCompra)">

						</div>
					</div>
					<div class="col-sm-3">
						<div class="form-group">
							<label>Buscar:</label>
							<input class="form-control input-sm" type="search" ng-model="textSearch"
								ng-model-options='{ debounce: 600 }'
								ng-change="paginatorPedidosCompra.getSearch(textSearch,paginatorPedidosCompra.filter,$event)">

						</div>
					</div>
				</div>
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th>Provedor</th>
							<th>Doc.</th>
							<th>Doc/ISO</th>
							<th>Sucursal</th>
							<th>estado</th>
							<th>Fecha</th>

							<th>Acciones</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="pedido in pedidos">
							<td>{{pedido.proveedor.razon_social}}</td>
							<td>{{pedido.numero_correlativo}}</td>
							<td ng-if="filtroPedidosCompra.tipo==1">{{pedido.numero_iso_orden_compra}}</td>
							<td ng-if="filtroPedidosCompra.tipo==2">{{pedido.numero_iso}}</td>
							<td>{{pedido.almacen.sucursal.nombre}}</td>
							<td>{{pedido.estado.nombre}}</td>
							<td>{{pedido.fecha | date:"dd/MM/yyyy"}}</td>

							<td>
								<label ng-if="!pedido.eliminado">
									<a href="javascript:void(0)" ng-click="abrirDialogDetallePedidos(pedido)">
										<i class="fa fa-check bigger-200"></i>
									</a>
								</label>
							</td>
						</tr>
					</tbody>
				</table>
				<div class="row">
					<div class="col-sm-6">
						<div>
							Mostrando página {{paginatorPedidosCompra.currentPage}} de
							{{paginatorPedidosCompra.pages.length}}
						</div>
					</div>
					<div class="col-sm-6" align="right">
						<ul class="pagination">
							<li class="paginate_button">
								<a href="javascript:void(0)"
									ng-click="paginatorPedidosCompra.getFirstPage()">Primero</a>
							</li>
							<li class="paginate_button">
								<a href="javascript:void(0)" e-disabled="paginatorPedidosCompra.currentPage==1"
									ng-click="paginatorPedidosCompra.getPreviousPage()">
									<< </a>
							</li>
							<li class="paginate_button" ng-class="{active:paginatorPedidosCompra.currentPage==page}"
								ng-repeat="page in paginatorPedidosCompra.pages"
								ng-if="abs(paginatorPedidosCompra.currentPage-page)<4">
								<a e-disabled="paginatorPedidosCompra.currentPage==page" href="javascript:void(0)"
									ng-click="paginatorPedidosCompra.getPage(page)">{{page}}</a>
							</li>
							<li class="paginate_button">
								<a href="javascript:void(0)"
									e-disabled="paginatorPedidosCompra.currentPage==paginatorPedidosCompra.pages.length"
									ng-click="paginatorPedidosCompra.getNextPage()">>></a>
								</lidiv>
							<li class="paginate_button">
								<a href="javascript:void(0)" ng-click="paginatorPedidosCompra.getLastPage()">Ultimo</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer wizard-actions">

			<button class="btn btn-danger btn-sm" ng-click="cerrarDialogPedidos()">
				<i class="ace-icon fa fa-times"></i>Cancelar
			</button>
		</div>
	</div>
</div>
<!-- ========= fin pedidos ========= -->
<div id="dialog-eliminar-pedido" title="¿Eliminación de pedido?" class="modal">
	<p>
		<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Esta seguro de eliminar el
		pedido seleccionado?
	</p>
	<button type="button" class="btn btn-danger" ng-click="EliminarPedido(pedido)">Si</button>
	<button type="button" class="btn btn-success" ng-click="cerrarDialogEliminarPedido()">No</button>
</div>
<div id="dialog-eliminar-producto-pedido" title="¿Eliminación de pedido?" class="modal">
	<p>
		<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Mantener pendiente el
		producto seleccionado para completas el pedido en otra entrega o eliminar completamente del pedido?
	</p>
	<button type="button" class="btn btn-warning"
		ng-click="SeleccionarAccionPedidoDetalle(detalle,'pendiente')">Pendiente</button>
	<button type="button" class="btn btn-danger"
		ng-click="SeleccionarAccionPedidoDetalle(detalle,'eliminar')">Eliminar</button>
	<button type="button" class="btn btn-success" ng-click="cerrarDialogEliminarDetallePedido()">Cerrar</button>
</div>
<!-- === modal detalle pedidos==== -->
<div id="dialog-detalle-pedidos" class="modal">
	<div class="modal-header bg-primary">
		<h4 class='smaller text-white text-uppercase'>
			<i class='icono-prerequisito'></i>
			<label>Detalle Pedido</label>
		</h4>
	</div>
	<form name="formDetallePedido" id="formDetallePedido"
		ng-submit="guardarDetalleCompraDePedido(pedido.detallesPedido)">
		<div class="modal-body">
			<div class="widget-box">
				<div class="widget-header">
					<h4 class="widget-title">BUSQUEDA PRODUCTO</h4>
				</div>
				<div class="col-md-12 bg-primary">
					<button type="button" ng-click="verDescuento = !verDescuento" class="btn btn-info btn-sm">
						<i class="ace-icon fa fa-exchange bigger-110"></i>
					</button>

					<div class="pull-right" ng-if="verDescuento">
						<input class="pt-2" type="number" ng-model="pedido.descGrl"
							ng-change="asignarDescuentos(pedido)" min="0.00" step="0.001"
							style="max-width: 90px; max-height: 30px;" placeholder="Descuento">
						<input class="pt-2" type="number" ng-model="pedido.recGrl" ng-change="asignarRecargo(pedido)"
							min="0.00" step="0.001" style="max-width: 90px; max-height: 30px;" placeholder="Recarga">
						<input class="pt-2" type="number" ng-model="pedido.iceGrl" ng-change="asignarIce(pedido)"
							min="0.00" step="0.001" style="max-width: 90px; max-height: 30px;" placeholder="Ice">
						<input class="pt-2" type="number" ng-model="pedido.exeGrl" ng-change="asignarExe(pedido)"
							min="0.00" step="0.001" style="max-width: 90px; max-height: 30px;" placeholder="Exento">
					</div>
				</div>

				<div class="widget-body">
					<div class="widget-main">
						<table class="table table-bordered">
							<thead>
								<tr>

									<th>
										<label ng-if="filtroPedidosCompra.tipo == '1'">PRODUCTO</label>
										<label ng-if="filtroPedidosCompra.tipo == '2'">SERVICIO</label>
									</th>

									<th>
										<label>UNID. MED.</label>
									</th>
									<th>
										<label>CANT. (u)</label>
									</th>
									<th>
										<label>CANT. (u)</label>
										<p>RECEP.</p>
									</th>
									<th>
										<label>C. U. (Bs/u)</label>
									</th>
									<th>
										<label>IMP. (Bs)</label>
									</th>
									<th
										ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<label>IMP RET(Bs)</label>
									</th>
									<th
										ng-if="filtroPedidosCompra.tipo == '1' && usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<label>FECHA VENC.</label>
									</th>
									<th
										ng-if="filtroPedidosCompra.tipo == '1' && usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<label>LOTE</label>
									</th>
									<th ng-if="verDescuento">
										<label>DESC. (-)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="pedido.tipoDescuento"
												ng-change="recalcularDeducciones(pedido)" />
											<span class="lbl check-compra"></span>
										</label>
									</th>
									<th ng-if="verDescuento">
										<label>REC. (+)</label>
										<label>
											<input class="ace ace-switch ace-switch-4" type="checkbox"
												ng-model="pedido.tipoRecargo"
												ng-change="recalcularDeducciones(pedido)" />
											<span class="lbl check-compra"></span>
										</label>
									</th>
									<th ng-if="verDescuento">
										<label>ICE (-)</label>
									</th>
									<th ng-if="verDescuento">
										<label>EXC. (-)</label>
									</th>
									<th>
										<label>ACC.</label>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-class="{'bg-yellow':detalle.pendiente}"
									ng-repeat="detalle in pedido.detallesPedido | filter:{eliminado:false}">
									<td>
										{{detalle.detalleCompra.producto.nombre}}

									</td>
									<td ng-if="detalle.detalleCompra.producto.nombre.id">
										{{detalle.detalleCompra.producto.nombre.unidad_medida}}
									</td>
									<td ng-if="!detalle.detalleCompra.producto.nombre.id">
										{{detalle.detalleCompra.producto.unidad_medida}}
									</td>
									<td>
										<!-- <input onfocus="this.select();" id="cantidad" ng-keypress="interceptarTecla($event,'agregar_detalle_compra',false)" required
											 class="col-xs-12" ng-change="calcularImportePedido(detalle.detalleCompra)" ng-model="detalle.detalleCompra.cantidad" type="number" /> -->
										{{detalle.detalleCompra.cantidad}}
									</td>
									<td>
										<input onfocus="this.select();" id="cantidad" required class="col-xs-12"
											ng-model="detalle.detalleCompra.cantidad_parcial" type="number"
											step="0.000001" min="0"
											ng-change="calcularImportePedido(detalle.detalleCompra); recalcularDeducciones(pedido); calcularImportePedidoSinRet(detalle.detalleCompra);" />

									</td>
									<td>
										<input required onfocus="this.select();" class="col-xs-12"
											ng-change="calcularImportePedido(detalle.detalleCompra, false); recalcularDeducciones(pedido); calcularImportePedidoSinRet(detalle.detalleCompra);"
											step="0.0001" min="0" ng-model="detalle.detalleCompra.costo_unitario"
											type="number" required />
										<span class="blue">
											Último precio
										</span>
										<span class="label label-danger label-white middle tooltip-info"
											data-rel="tooltip" tooltip-placement="top"
											uib-tooltip="Último precio de compra">{{detalle.detalleCompra.producto.costoanterior+'
											Bs.' || 'Sin datos.'}}</span>
									</td>
									<td
										ng-if="compra.movimiento.clase.nombre_corto==diccionario.MOVING_POR_RETENCION_BIENES">
										<input onfocus="this.select();" required class="col-xs-12"
											ng-model="detalle.detalleCompra.importeSinRet" type="number" step="0.001"
											min="0"
											ng-change="calcularImportePedidoSinRet(detalle.detalleCompra, true); " />
									</td>
									<td>
										<input onfocus="this.select();" id="importe" required class="col-xs-12"
											ng-model="detalle.detalleCompra.importe" type="number" step="0.001" min="0"
											ng-change="calcularImportePedido(detalle.detalleCompra, true); recalcularDeducciones(pedido);calcularImportePedidoSinRet(detalle.detalleCompra);" />
									</td>
									<td
										ng-if="filtroPedidosCompra.tipo == '1' && usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
											<input ng-keypress="interceptarTecla($event,'lote',true)"
												class="form-control" type="text"
												ng-model="detalle.detalleCompra.fechaVencimientoTexto"
												placeholder="Ingrese la fecha" />
										</datepicker>
									</td>
									<td
										ng-if="filtroPedidosCompra.tipo == '1' && usuario.empresa.usar_vencimientos && usuario.empresa.usar_vencimiento_productos">
										<input ng-keypress="interceptarTecla($event,'costo_unitario',true)" type="text"
											ng-model="detalle.detalleCompra.lote" class="col-xs-12" />
									</td>


									<td ng-if="verDescuento">
										<input type="number" required ng-change="recalcularTotalDescuentos(pedido)"
											ng-disabled="pedido.descGrl>0" ng-model="detalle.detalleCompra.descuento"
											step="0.01" min="0" class="col-xs-12" />
									</td>
									<td ng-if="verDescuento">
										<input type="number" required ng-change="recalcularTotalRecargos(pedido)"
											ng-disabled="pedido.recGrl>0" ng-model="detalle.detalleCompra.recargo"
											step="0.01" min="0" class="col-xs-12" />
									</td>
									<td ng-if="verDescuento">
										<input type="number" required ng-change="recalcularTotalIce(pedido)"
											ng-disabled="pedido.iceGrl>0" ng-model="detalle.detalleCompra.ice"
											step="0.01" min="0" class="col-xs-12" />
									</td>
									<td ng-if="verDescuento">
										<input type="number" required ng-change="recalcularTotalExentos(pedido)"
											ng-disabled="pedido.exeGrl>0" ng-model="detalle.detalleCompra.excento"
											step="0.01" min="0" class="col-xs-12" />
									</td>
									<td>
										<a ng-if="detalle.pendiente" href="javascript:void(0)" class="red"
											data-rel="tooltip"
											title="El producto se encuentra en estado pendiente para una posterior entrega."
											data-placement="left"><i class="fa fa-exclamation-circle fa-2x"
												aria-hidden="true"></i>
										</a>
										<a ng-if="detalle.detalleCompra.cantidad>detalle.detalleCompra.cantidad_parcial"
											ng-click="cambiarEstadoDetallePedido(detalle.detalleCompra)"
											href="javascript:void(0)"
											ng-class="detalle.detalleCompra.entregado?'green':'red'"><i
												class="fa fa-exclamation-circle fa-2x" data-rel="tooltip"
												data-placement="left"
												title="{{detalle.detalleCompra.entregado?'El ítem se ha eliminado para ser completado, si desea volver a mantenerlo como pendiente para completar su ingreso, haga clic sobre el icono de admiración':'El valor a entregar es menor a la cantidad solicitada por defecto la cantidad el producto mantendra en estado pendiente por la cantidad restante para una posterior entrega, si desea marcar como entregada aga click sobre el icono de exclamacion(estado '+detalle.detalleCompra.estadoProducto}}"
												aria-hidden="true"></i>
										</a>
										<button type="button" ng-click="abrirDialogEliminarDetallePedido(detalle)"
											class="btn btn-danger btn-sm">
											<i class="ace-icon fa fa-trash-o bigger-110"></i>
										</button>
									</td>
								</tr>
								<tr>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td><strong>Totales</strong></td>
									<td><strong>{{totalPedido |number:2}}</strong></td>
									<td ng-if="filtroPedidosCompra.tipo == '1'"></td>
									<td ng-if="filtroPedidosCompra.tipo == '1'"></td>
									<td ng-if="verDescuento"><b>{{pedido.totalDesc |number:2 }}</b></td>
									<td ng-if="verDescuento"><b>{{pedido.totalRec |number:2 }}</b></td>
									<td ng-if="verDescuento"><b>{{pedido.totalIce |number:2 }}</b></td
										ng-if="verDescuento">
									<td ng-if="verDescuento"><b>{{pedido.totalExe ng-if="verDescuento"|number:2 }}</b>
									</td>
									<td></td>
								</tr>
							</tbody>
						</table>

					</div>
				</div>
			</div>

		</div>
		<div class="modal-footer wizard-actions">
			<button class="btn btn-success btn-sm" type="submit">
				<i class="ace-icon fa fa-disck bigger-110">Generar Detalle Compra</i>
			</button>
			<button class="btn btn-danger btn-sm pull-left" type="button" ng-click="cerrarDialogDetallePedidos()">
				<i class="ace-icon fa fa-times"></i>Cancelar
			</button>
		</div>
	</form>

</div>
<!-- ========= fin detalle pedidos ========= -->

<!--==========Mensaje de pago de compra =========== -->
<div id="Modal-Mensaje-Pago" class="modal wizard-posicion">
	<div class="modal-header bg-primary">
		<h4 class='smaller text-white text-uppercase'>
			<center>Mensaje</center>
		</h4>
	</div>
	<div class="modal-body">
		<div class="modal-content">
			<h5>
				<center>El pago excede el monto de la deuda, desea continuar (se registrará como pago anticipado)
				</center>
			</h5>
		</div>
	</div>
	<div class="modal-footer wizard-actions">
		<button class="btn btn-success btn-sm" ng-click="pagoAnticipo(true)">Continuar</button>
		<button class="btn btn-danger btn-sm pull-left" ng-click="pagoAnticipo(false)">Cancelar</button>
	</div>
</div>
<!-- ==============Fin mensaje=============-->
<!-- ==============Ventana Agregar Producto===================-->
<div id="Modal-Ventana-Productos" class="modal">
	<div>
		<p style="color:red;" align="center">El producto no se encuentra en la base de datos</p>
		<h5 style="color: black;">
			<center>Desea agregar un producto</center>
		</h5>
	</div>
	<div class="modal-body step-content">
		<form id="formularioAgreparProductos" name="formularioAgreparProductos"
			ng-submit="agregarProducto(nuevoProducto)">
			<div  class="row">
				<!--<input required="" type="text" id="nombre" autocomplete="off" ng-model="usuario.nombre_usuario" placeholder="Nombre de usuario" class="col-xs-10 col-sm-5 ng-not-empty ng-dirty ng-valid-parse ng-valid ng-valid-required ng-touched" ng-change="validarUsuario(usuario.nombre_usuario)"> -->
				<div class="form-group col-sm-12">
					<input type="text" id="codigo" autocomplete="off" placeholder="Codigo Producto"
						ng-model="nuevoProducto.codigo"
						class="form-control ng-not-empty ng-dirty ng-valid-parse ng-valid ng-valid-required ng-touched"
						typeahead-wait-ms="1000" typeahead-min-length="3" ng-model-options='{ debounce: 1000 }'
						ng-change="validarCodigo(nuevoProducto.codigo)" required>
					<div ng-if="cargadorCodigo" class="blue">
						<i class="fa fa-spinner fa-spin fa-2x fa-fw margin-bottom"></i>
						<span class="">Validando codigo...</span>
					</div>

					<p ng-if="respuesta.length == 0" ng-class="{'text-red':data.type,'text-green':!data.type}"
						class="ng-binding text-green">{{mensajeCodigo}}</p>
					<p ng-if="respuesta.length != 0" ng-class="{'text-red':data.type,'text-green':data.type}"
						class="ng-binding text-red">{{mensajeCodigo}}</p>
				</div>
				<div class="form-group  col-sm-12">
					<input type="text" placeholder="Nombre Producto" ng-model="nuevoProducto.nombre"
						class="form-control" required>
				</div>
				<div class="form-group col-sm-12">
					<label for="unidad_medida">Unidad de Medida</label> 
					<div class="input-group"  style="display: block;">
						<ui-select class="col-sm-9"
							ng-click="listaUnidadMedidaSin(nuevoProducto)" id="selectGruposProductos" 
							ng-model="nuevoProducto.unidad_medida" theme="select2" title="Todos" append-to-body="true"
							style="min-width: 100px; width: 100%; padding-left: 0px; padding-right: 0px;">
							<ui-select-match placeholder="Todos"><span
									style="color:black">{{$select.selected.descripcion}}</span>
							</ui-select-match>
							<ui-select-choices
								repeat="unidMed as unidMed in unidadesMedida  | filter: $select.search">
								<span> {{unidMed.descripcion}} </span>
								<hr style="margin-top: 0px;margin-bottom: 0px;border: 0;border-top: 1px solid rgb(195, 193, 193);">
							</ui-select-choices>
						</ui-select>
					</div>
				</div>
				<div class="form-group col-sm-12" ng-if="usuario.empresa.usar_facturacion_electronica">
					<label for="nombre">Actividad Económica CAEF</label>
					<div class="input-group" style="display: block;">
						<ui-select  class="col-sm-10"
						id="selectGruposProductos" ng-click="listaActividadesSin()"
							on-select="listaProductoServicioSin($item); nuevoProducto.productoServicio=undefined"
							ng-model="nuevoProducto.activEconomica" theme="select2" title="Todos" append-to-body="true"
							style="min-width: 100px; width: 100%; padding-left: 0px; padding-right: 0px;">
							<ui-select-match placeholder="Todos"><span
									style="color:black">{{$select.selected.codigoCaeb}} - {{$select.selected.descripcion}}</span>
							</ui-select-match>
							<ui-select-choices
								repeat="actividadEco as actividadEco in actividadesSin  | filter: $select.search">
								<span> {{actividadEco.codigoCaeb}} - {{actividadEco.descripcion}} </span>
								<hr style="margin-top: 0px;margin-bottom: 0px;border: 0;border-top: 1px solid rgb(195, 193, 193);">
							</ui-select-choices>
						</ui-select>
					</div>
				</div>
				<div class="form-group col-sm-12" ng-if="usuario.empresa.usar_facturacion_electronica">
					<label for="nombre">Producto SIN</label>
					<div class="input-group" style="display: block;">
						<ui-select class="col-sm-10"
							id="selectGruposProductos"
							ng-model="nuevoProducto.productoServicio" theme="select2" title="Todos" append-to-body="true"
							style="min-width: 100px; width: 100%; padding-left: 0px; padding-right: 0px;">
							<ui-select-match placeholder="Todos"><span
									style="color:black">{{$select.selected.codigoProducto}} - {{$select.selected.descripcionProducto}}</span>
							</ui-select-match>
							<ui-select-choices
								repeat="productServicio as productServicio in productoServicioSin | filter: $select.search">
								<span>{{productServicio.codigoProducto}} - {{productServicio.descripcionProducto}} </span>
								<hr style="margin-top: 0px;margin-bottom: 0px;border: 0;border-top: 1px solid rgb(195, 193, 193);">
							</ui-select-choices>
						</ui-select>
					</div>
				</div>
				<div class="form-group col-sm-12">
					<label>Grupo</label>
					<select name="grupo_producto" id="grupo_producto" ng-model="nuevoProducto.grupo" class="form-control"
						placeholder="Grupos"
						ng-options="grupoProducto as grupoProducto.nombre for grupoProducto in gruposProducto | filter:{habilitado:1} track by grupoProducto.id"
						required>
						<option value="">Seleccionar</option>
					</select>
				</div>
			</div>
			<div class="modal-footer wizard-actions">
				<button class="btn btn-success btn-sm" type="submit">Continuar</button>
				<button class="btn btn-danger btn-sm pull-left"
					ng-click="cerrarVentanaAnadirProducto()">Cancelar</button>
				<!-- <button type="button" ng-click="cerrarVentanaAnadirProducto()"
				 class="btn btn-danger button-close">
					<i class="ace-icon fa fa-close align-top bigger-125"></i>
				</button>  -->
			</div>
		</form>
	</div>
</div>
<!-- ==============Fin Agregar Producto===================-->
<div id="dialog-conceptos" class="modal" ng-include src="'/templates/gral/concepto-edicion.html'"></div>

<!-- inicio evaluciones proveedores -->

<div id="modal-detalle-evaluacion-proveedores" class="modal">
	<div class="modal-content">
		<div class="modal-header bg-primary">
			<h4 class='smaller text-white text-uppercase'>
				<i class='fa fa-bar-chart-o'></i>
				<label>Calificaciones a Proveedores</label>
			</h4>
		</div>

		<div class="modal-body">
			<form name="califiacion_proveedor" ng-submit="buscarCalifiaciones(filtroCal)">
				<div class="row">
					<div class="col-md-2 col-sm-2">
						<div class="form-group">
							<label for="fecha-ini-cal">Desde</label>
							<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
								<input autocomplete="off" class="form-control" type="text"
									id="fechainiciocal" ng-model="filtroCal.fecha_inicio"
									placeholder="Ingrese la fecha inicial" />
							</datepicker>

						</div>
					</div>
					<div class="col-md-2 col-sm-2">
						<div class="form-group">
							<label for="fecha-fin-cal">Hasta</label>
							<datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
								<input autocomplete="off" class="form-control" type="text"
									id="fechafincal" ng-model="filtroCal.fecha_fin"
									autocomplete="off" placeholder="Ingrese la fecha final" />
							</datepicker>
						</div>
					</div>
					<div class="col-md-2 col-sm-2">
						<div class="form-group">
							<label for="suc-cal">Sucursal</label>
							<select required ng-model="filtroCal.id_sucursal"
								ng-options="sucursalFiltro.id as sucursalFiltro.nombre for sucursalFiltro in sucursales track by sucursalFiltro.id">
								<option value="">--Ninguno--</option>
							</select>
						</div>
					</div>
					<div class="col-md-6 col-sm-6">
						<div class="form-group">
							<button class="btn btn-app btn-primary btn-xs" type="submit">
								<i class="ace-icon fa fa-print bigger-160"></i>
								buscar
							</button>
							<button class="btn btn-app btn-danger btn-xs" type="button"
								ng-click="reportePdfCalificacionProveedores()">
								<i class="ace-icon fa fa-print bigger-160"></i>
								PDF
							</button>
							<button class="btn btn-app btn-success btn-xs" type="button"
								ng-click="reporteExcelCalificacionProveedores()">
								<i class="ace-icon fa fa-print bigger-160"></i>
								EXCEL
							</button>
							<button class="btn btn-app btn-info btn-xs" type="button"
								ng-click="reporteGraficoCalificacionProveedor()">
								<i class="ace-icon fa  fa-bar-chart-o bigger-160"></i>
								Grafico
							</button>
						</div>
					</div>
				</div>
			</form>
			<div class="row">
				<div class="col-sm-6">
					<div>
						<label>
							Mostrar <select ng-model="paginatorCalificacionProveedor.itemsPerPage"
								ng-change="paginatorCalificacionProveedor.getFirstPage()"
								name="tabla-proveedores_calificacion" class="form-control input-sm">
								<option value="0">Todos</option>
								<option ng-selected="true" value="10">10</option>
								<option value="25">25</option>
								<option value="50">50</option>
								<option value="100">100</option>
							</select> Elementos</label>
					</div>
				</div>
				<div class="col-sm-6" align="right">
					<div>
						<label>Buscar:(Razon Social)
							<input autofocus class="form-control input-sm" type="search" ng-model="textSearch"
								ng-model-options='{ debounce: 600 }'
								ng-change="paginatorCalificacionProveedor.getSearch(textSearch,paginatorCalificacionProveedor.filter,$event)">
						</label>
					</div>
				</div>
			</div>
			<div>
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th>Nº</th>
							<th>Proveedor</th>
							<th>Calificacion</th>
							<th>Acciones</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="proveedor in calificacionProveedores track by $index">
							<td>{{$index+1}}</td>
							<td>{{proveedor.razon_social}}</td>
							<td>{{proveedor.total_calificacion}}</td>
							<td><a href="javasciprt:void()" class="blue"> <i class="fa fa-print" aria-hidden="true"
										ng-click="imprimirPdfCalificacionProveedor(proveedor.id)"></i> </a></td>
						</tr>

					</tbody>
				</table>
				<div class="row">
					<div class="col-sm-6">
						<div>
							Mostrando página {{paginatorCalificacionProveedor.currentPage}} de
							{{paginatorCalificacionProveedor.pages.length}}
						</div>
					</div>
					<div class="col-sm-6" align="right">
						<ul class="pagination">
							<li class="paginate_button">
								<a href="javascript:void(0)"
									ng-click="paginatorCalificacionProveedor.getFirstPage()">Primero</a>
							</li>
							<li class="paginate_button">
								<a href="javascript:void(0)" e-disabled="paginatorCalificacionProveedor.currentPage==1"
									ng-click="paginatorCalificacionProveedor.getPreviousPage()">
									<<< /a>
							</li>
							<li class="paginate_button"
								ng-class="{active:paginatorCalificacionProveedor.currentPage==page}"
								ng-repeat="page in paginatorCalificacionProveedor.pages"
								ng-if="abs(paginatorCalificacionProveedor.currentPage-page)<4">
								<a e-disabled="paginatorCalificacionProveedor.currentPage==page"
									href="javascript:void(0)"
									ng-click="paginatorCalificacionProveedor.getPage(page)">{{page}}</a>
							</li>
							<li class="paginate_button">
								<a href="javascript:void(0)"
									e-disabled="paginatorCalificacionProveedor.currentPage==paginatorCalificacionProveedor.pages.length"
									ng-click="paginatorCalificacionProveedor.getNextPage()">>></a>
								</lidiv>
							<li class="paginate_button">
								<a href="javascript:void(0)"
									ng-click="paginatorCalificacionProveedor.getLastPage()">Ultimo</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer wizard-actions">


			<button class="btn btn-danger btn-sm pull-left" ng-click="cerrarModalDetalleEvaluacionProveedores()">
				<i class="ace-icon fa fa-times"></i>Cancelar
			</button>
		</div>


	</div>

	<div id="modal-grafico-evaluacion-proveedores" class="modal">
		<div class="modal-content">
			<div class="modal-header bg-primary">
				<h4 class='smaller text-white text-uppercase'>
					<i class='fa fa-bar-chart-o'></i>
					<label>Gráfico de Calificaciones a Proveedores</label>
				</h4>
			</div>
			<div class="modal-body">
				<div>
					<div id="chartContainer"
						style="height: 400px;border-radius: 25px;border: 2px solid #000000;; width: 100%;overflow-y:auto;position:relative">

					</div>
				</div>
			</div>
			<div class="modal-footer wizard-actions">
				<button class="btn btn-danger btn-sm pull-right" ng-click="cerrarModalGraficoEvaluacionProveedores()">
					<i class="ace-icon fa fa-times"></i>Cancelar
				</button>
				<div class="row">
					<div class="form-group col-md-2">
						<label for="suc-cals">Tipo Gráfico</label>
						<select required class="form-control  pull-left" ng-model="tipo"
							ng-change="reporteGraficoCalificacionProveedor(tipo)"
							ng-options="tipoGrafico as tipoGrafico.nombre for tipoGrafico in arregloTipoGrafico">
						</select>
					</div>
				</div>
			</div>


		</div>
		<!-- fin evaluaciones proveedores -->
		<div id="modal-config-evaluacion-proveedores" class="modal">
			<div class="modal-content">
				<div class="modal-header bg-primary">
					<h4 class='smaller text-white text-uppercase'>
						<i class='fa fa-bar-chart-o'></i>
						<label>configuracion Calificaciones a Proveedores</label>
					</h4>
				</div>
				<form id="calificacion-config" ng-submit="guardarConfiguracionEvalProv()">
					<div class="modal-body">
						<div ng-if="calificacion.concepto.habilitado"
							ng-repeat="calificacion in configCalifiacionProveedor">
							<div class="row">
								<div class="col-md-8">
									<label class="inline">
										<span class="lbl bigger-80"><sub>{{calificacion.concepto.nombre}}</sub></span>
									</label>
								</div>
								<div class="col-md-3">
									<input type="number" min="1" max="100" step="1" required
										onkeypress="()=>{return event.charCode >= 48 && event.charCode <= 57}"
										ng-model="calificacion.porcentaje" class="form-control" name="puntuacion-prov"
										id="puntuacion-prov" aria-describedby="helpId" placeholder=""
										ng-change="calcularTotalCalificacionProv()">
								</div>
								<div class="col-md-1">
									<span class="pull-right">%</span>
								</div>
							</div>
						</div>

						<div>
							total
							<span class="pull-right">{{totalCalProv}}%</span>
						</div>
						<div ng-if="totalCalProv>100" class="alert alert-warning" role="alert">
							<strong>El total no puede ser mayor a 100%.</strong>
						</div>
					</div>
					<div class="modal-footer">
						<button id="btnguardar" type="submit" ng-disabled="totalCalProv>100" class="btn btn-primary">
							<i class="ace-icon fa fa-floppy-o align-top bigger-125"></i>
							GUARDAR
						</button>
						<button type="button" class="btn btn-primary btn-danger"
							ng-click="cerrarModalConfigEvaluacionProveedores()">
							<i class="ace-icon fa fa-times red2 align-top bigger-125"></i>
							CERRAR
						</button>
					</div>
				</form>
			</div>