<div id="pacientes" class="pacientes">
    <div class="col-xs-12">
        <h3 class="header smaller lighter blue">PACIENTES</h3>
        <!-- CAMBIAR aplicacion POR !aplicacion -->
        <button ng-disabled="!aplicacion.puede_crear" class="btn-woBox button-glow" ng-click="abrirDialogPacienteNuevo()">
            <i class="ace-icon fa fa-plus align-top bigger-125"></i>
            Nuevo
        </button>
        <!-- <div class="fileUpload btn btn-primary btn-success">
            <span class="fileUpload-button ace-icon fa fa-cloud-upload align-top bigger-125">&nbsp&nbspImportar</span>
            <input ng-disabled="!aplicacion.puede_crear" class="upload" type="file" custom-on-file-change="subirExcelPacientes" />&nbsp&nbsp
        </div>
        <a href="/recursos/EJEMPLO-DATOS-CUENTAS.xlsx" class="btn btn-primary btn-danger">
            <i class="ace-icon fa fa-cloud-download align-top bigger-125"></i>
            Ejemplo Importación
        </a> -->
        <div class="clearfix">
            <div class="pull-right tableTools-container"></div>
        </div>
        <form name="formularioFiltroPacientes" novalidate ng-submit="paginator.getSearch(textSearch,filtro,null)">
            <fieldset>
                <legend>Filtro Pacientes</legend>
                <div style="overflow-x:auto;">
                    <table class="table table-striped table-bordered table-hover">
                        <tbody>
                            <tr>

                                <th>
                                    <label>Código</label>&nbsp
                                </th>
                                <th>
                                    <label>Nombre y Apellídos</label>&nbsp
                                </th>
                                <th>
                                    <label>Celuda de Identidad</label>&nbsp
                                </th>
                                <th>
                                    <label>Campo</label>&nbsp
                                </th>
                                <th>
                                </th>
                            </tr>
                            <tr>

                                <td>
                                    <input ng-update-hidden type="text" id="filtroCodigo" ng-model="filtro.codigo"
                                        placeholder="" />
                                </td>
                                <td>
                                    <input ng-update-hidden type="text" id="filtroNombre" ng-model="filtro.nombres"
                                        placeholder="" />
                                </td>
                                <td>
                                    <input ng-update-hidden type="text" id="filtroCedula" ng-model="filtro.ci"
                                        placeholder="" />
                                </td>
                                <td>
                                    <select required id="campo-rol-filtro-pacientes" class="form-control"
                                        name="centroDeCostos"
                                        ng-options="centroCosto.id as centroCosto.nombre for centroCosto in centrosDeCostos | filter:{habilitado:true} track by centroCosto.id"
                                        ng-model="filtro.campo">
                                        <option value="">--Ninguno--</option>
                                    </select>
                                </td>
                                <td>
                                    <button type="submit" ng-disabled="formularioFiltroCuentas.$invalid"
                                        class="btn-primary btn  btn-sm"
                                        ng-click="paginator.getSearch(paginator.search,filtro,null)">
                                        <i class="ace-icon fa fa-search align-top bigger-125"></i>
                                        BUSCAR
                                    </button>
                                    <button id="pdf" ng-disabled="!paciente" class="btn  btn-danger btn-sm"
                                        ng-click="imprimirFiltroPDFPacientes()">
                                        <i class="ace-icon fa fa-print bigger-160"></i>
                                        PDF
                                    </button>

                                    <a id="excel" ng-disabled="!paciente" class="btn  btn-success btn-sm"
                                        popover-trigger="outsideClick : outsideClick"
                                        uib-popover-template="PopoverPacientes.templateUrl" popover-placement="left">
                                        <i class="ace-icon fa fa-print bigger-160"></i>
                                        Excel
                                    </a>

                                    <script type="text/ng-template" id="PopoverPacientes.html">
                                        <div class="form-control">
                                            <a href="javascript:void(0)" class="blue" ng-click="imprimirFiltroExcelPacientesBasico()">Datos Basicos</a>
                                        </div>
                                        <div class="form-control">
                                            <a href="javascript:void(0)" class="blue" ng-click="imprimirFiltroExcelPacientesPreRequisitos(filtro)">Pre-Requisitos</a>
                                        </div>
                                    </script>
                                </td>
                            </tr>
                            <tr>

                                <td>
                                    <label>Cargo</label>&nbsp
                                </td>
                                <td>
                                    <label>Empresa</label>&nbsp
                                </td>
                                <td>
                                    <label>Estado</label>&nbsp
                                </td>
                                <td>
                                    <label>Grupo Sanguineo</label>&nbsp
                                </td>
                            </tr>
                            <tr>

                                <td>
                                    <select ng-change="paginator.getSearch(paginator.search,filtro,null)" name="fecha"
                                        id="tipo-contrato" class="form-control" required style="width:150px"
                                        ng-options="cargo.id as cargo.nombre for cargo in listaCargos.clases track by cargo.id"
                                        ng-model="filtro.cargo">
                                        <option value="">--Ninguno--</option>
                                    </select>
                                </td>
                                <td>
                                    <input ng-update-hidden type="text" name="filtroEmpresa" id="filtroEmpresa"
                                        ng-model="filtro.busquedaEmpresa" />
                                </td>
                                <td>
                                    <select id="filtroEstado" name="filtroEstado" ng-model="filtro.estado">
                                        <option value="Activo">Inactivo</option>
                                        <option value="Inactivo">Activo</option>
                                    </select>
                                </td>
                                <td>
                                    <input ng-update-hidden type="text" name="filtroGrupoSanguineo"
                                        id="filtroGrupoSanguineo" ng-model="filtro.grupo_sanguineo" />
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </fieldset>
        </form>

        <div class="table-header cabezera-paciente">
            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirDialogReporteRolTurnos()" role="button">
                    <i class="fa fa-clock-o text-white pt-4 margin-0-5 bigger-160" data-rel="tooltip" data-placement="top" uib-tooltip="Roles de Turnos"></i>
                </a>
            </span>
            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirReportesFichasMedicas()" role="button">
                    <i class="fa fa-file-text text-white pt-4 margin-0-5 bigger-130" aria-hidden="true"></i>
                </a>
            </span>
            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirDialogPrerequisitoNuevo()" style="vertical-align: middle;">
                    <i class="icono-prerequisito text-white pt-4 margin-0-5 bigger-150" aria-hidden="true" data-rel="tooltip" data-placement="top" uib-tooltip="Prerequisitos"></i>
                </a>
            </span>
            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirModalVacunas()" style="vertical-align: middle;">
                    <i class="icono-vacuna margin-0-5 bigger-150" style="color: white!important;" aria-hidden="true" data-rel="tooltip" data-placement="top" uib-tooltip="Vacunas"></i>
                </a>
            </span>

            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirReportesLaboratorios()" style="vertical-align: middle;">
                    <i class="icono-laboratorio icono-font margin-0-5 bigger-150" style="color: white!important;" aria-hidden="true" data-rel="tooltip" data-placement="top" uib-tooltip="Laboratorios"></i>
                </a>
            </span>
            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirReportesConsultas()" style="vertical-align: middle;">
                    <i class="icono-consulta icono-font margin-0-5 bigger-150" style="color: white!important;" aria-hidden="true" data-rel="tooltip" data-placement="top" uib-tooltip="Consultas"></i>
                </a>
            </span>
            <span class="pos-rel pull-left">
                <a href="javascript:void(0)" ng-click="abrirReportesDiagnosticos()" style="vertical-align: middle;">
                    <i class="icono-diagnostico icono-font margin-0-5 bigger-150" style="color: white!important;" aria-hidden="true" data-rel="tooltip" data-placement="top" uib-tooltip="Diagnósticos"></i>
                </a>
            </span>

            <span class="margin-0-5"> Lista de Pacientes</span>
            <div class="inline pos-rel pull-right">
                <div class="col-sm-10" ng-include src="'/templates/gral/fields-viewer.html'"></div>
            </div>
            <div class="pos-rel pull-right">
                <a data-toggle="dropdown" class="btn btn-primary btn-xs dropdown-toggle" id="zoomBtn">
                    <i class="ace-icon fa fa-wrench  bigger-110 icon-only "></i>
                </a>

                <ul
                    class="dropdown-menu-right dropdown-navbar navbar-orange dropdown-menu dropdown-caret dropdown-close importar-text">
                    <li class="dropdown-header header-importar">
                        <i class="ace-icon fa fa-wrench white"></i> Importaciones
                    </li>

                    <li class="dropdown-content">
                        <ul class="dropdown-menu dropdown-navbar navbar-pink">
                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        Vacunas
                                    </span>

                                    <a href="/recursos/EJEMPLO-DATOS-PACIENTES-VACUNAS.xlsx"
                                        class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>
                                    <div class="fileUpload boton-importar pull-right">
                                        <span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
                                        <input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
                                            custom-on-file-change="subirExcelVacunasPacientes" />
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        Fichas médicas
                                    </span>

                                    <a href="/recursos/EJEMPLO-DATOS-PACIENTES-FICHA-MEDICA.xlsx"
                                        class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>
                                    <div class="fileUpload boton-importar pull-right">
                                        <span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
                                        <input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
                                            custom-on-file-change="subirExcelFichasTecnicas" />
                                    </div>
                            </li>
                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        SOAP
                                    </span> Lista de Pacientes
                                    <a href="/recursos/EJEMPLO-DATOS-PACIENTES-SOAP.xlsx"
                                        class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>
                                    <div class="fileUpload boton-importar pull-right">
                                        <span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
                                        <input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
                                            custom-on-file-change="subirExcelSOAP" />
                                    </div>

                                </div>
                            </li>
                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        Pacientes
                                    </span>

                                    <a href="/recursos/EJEMPLO-DATOS-PACIENTES.xlsx" class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>

                                    <div class="fileUpload boton-importar pull-right">
                                        <span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
                                        <input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
                                            custom-on-file-change="subirExcelPacientes" />
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        Laboratorio
                                    </span>
                                    <a class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>
                                    <a class="boton-importar pull-right">
                                        <i class="fa fa-cloud-upload blue"></i>
                                    </a>
                                </div>
                            </li>

                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        Consulta
                                    </span>
                                    <a href="/recursos/EJEMPLO-DATOS-PACIENTES-SIGNOS-VITALES.xlsx"
                                        class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>

                                    <div class="fileUpload boton-importar pull-right">
                                        <span class="fileUpload-button ace-icon fa fa-cloud-upload blue"></span>
                                        <input ng-disabled="!aplicacion.puede_crear" class="upload" type="file"
                                            custom-on-file-change="subirExcelSignosVitales" />
                                    </div>

                                </div>
                            </li>
                            <li>
                                <div class="clearfix">
                                    <span class="pull-left">
                                        Diagnostico
                                    </span>
                                    <a class="boton-importar pull-right">
                                        <i class="fa  fa-cloud-download green"></i>
                                    </a>
                                    <a class="boton-importar pull-right">
                                        <i class="fa fa-cloud-upload blue"></i>
                                    </a>
                                </div>
                            </li>


                        </ul>
                    </li>

                    <li class="dropdown-footer">

                    </li>
                </ul>
            </div>

        </div>
        <!-- div.table-responsive -->
        <!-- <div id="dialog-conceptos-riesgos" class="modal" ng-include src="'/templates/gral/concepto-edicion-riesgo-trabajo.html'"></div> -->
        <div id="dialog-conceptos-riesgos" class="modal">
            <div class="modal-header bg-primary">
                <h4 class='smaller text-white text-uppercase'>
                    <i class='icono-prerequisito'></i>
                    <label> Riesgos del trabajo</label>
                </h4>
            </div>
            <div class="row">
                <form name="formularioRiesgos" novalidate>
                    <div class="col-sm-5">
                        <div class="form-group">
                            <label for="ciudad">Cargo</label>
                            <select class="form-control" required
                                ng-options="empleo as empleo.nombre for empleo in empleos track by empleo.id"
                                ng-model="empleo.cargo">
                                <option disabled selected value="">Seleccione una actividad</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="form-group">
                            <label for="ciudad">Nombre</label>
                            <input ng-model="empleo.nombre" type="text" required capitalize
                                style="text-transform:uppercase;" class="form-control" name="riesgo"
                                placeholder="Nombre riesgo">
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="form-group">
                            <label for="ciudad">Descripción</label>
                            <input ng-model="empleo.descripcion" type="text" capitalize
                                style="text-transform:uppercase;" class="form-control" name="descripcion"
                                placeholder="Descripción">
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <br>
                        <div class="form-group">
                            <!-- <button type="button" class="btn btn-success" ng-click="asignarRiesgoLaboral()">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                            </button> -->
                            <button ng-if="!empleo.editar" class="btn btn-primary"
                                ng-disabled="formularioRiesgos.$invalid" ng-click="asignarRiesgoLaboral()">
                                <i class="fa fa-floppy-o bigger-130"></i> Guardar
                            </button>
                            <button ng-if="empleo.editar" class="btn btn-success"
                                ng-disabled="formularioRiesgos.$invalid" ng-click="modificarRiesgoLaborar(empleo)">
                                <i class="fa fa-floppy-o bigger-130"></i> Modificar
                            </button>
                            <button ng-if="empleo.editar" class="btn btn-primary"
                                ng-click="cancelarEditarRiesgoLaboral()">
                                <i class="fa fa-th-list bigger-130"></i> Nuevo
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="table-responsive">
                <div class="table-fixed-header">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="th-fix">Cargo</th>
                                <th class="th-fix">Nombre</th>
                                <th class="th-fix">Descripción</th>
                                <th class="th-fix">Deshabilitar</th>
                                <th class="th-fix">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="riesgo in RiesgosCargo">
                                <th scope="row">{{riesgo.riesgo.nombre}}</th>
                                <th scope="row">{{riesgo.nombre_riesgo}}</th>
                                <td>{{riesgo.descripcion}}</td>
                                <td>
                                    <!-- <label>
                                        <input ng-model="riesgo.habilitado" name="switch-field-1" class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-espaniol"></span>
                                    </label> -->
                                    <label class="pos-rel">
                                        <input name="switch-field-1" type="checkbox" class="ace"
                                            ng-model="riesgo.eliminado"
                                            ng-change="modificarRiesgoLaborar(riesgo, true)" />
                                        <span class="lbl"></span>
                                    </label>
                                </td>
                                <td>
                                    <a class="green" href="javascript:void(0)" ng-click="editarRiesgoLaboral(riesgo)">
                                        <i class="ace-icon fa fa-pencil bigger-130"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>


            <div class="row">
                <div class="modal-footer wizard-actions">
                    <!-- <button class="btn btn-primary btn-sm" ng-click="guardarConceptoEdicion(tipo_edicion)">
                        <i class="glyphicon glyphicon-floppy-disk"></i>Guardar
                    </button> -->
                    <button class="btn btn-danger btn-sm" ng-click="cerrarDialogConceptoEdicion()">
                        <i class="ace-icon fa fa-times"></i>Cancelar
                    </button>
                </div>
            </div>
        </div>
        <!-- div.dataTables_borderWrap -->
        <div>
            <div id="tabla-pacientes_wrapper" class="dataTables_wrapper form-inline no-footer">
                <!-- <div class="row" ng-include src="'/templates/gral/fields-viewer.html'"> -->
                <div class="row" ng-include src="'/templates/gral/paginator-header-1.html'">
                </div>
                <div style="overflow-x:auto;">
                    <table id="tabla-contabilidadCuentas" class="table table-striped table-bordered table-hover"
                        ng-if="pacientes.length > 0">
                        <thead>
                            <tr>
                                <th class="center">
                                    Nro.
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('activo',obtenerLista)">Activo
                                        <span id="codigo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().codigo.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('codigo',obtenerLista)">Código
                                        <span id="codigo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().nombre.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('nombre_completo',obtenerLista)">Nombre
                                        completo
                                        <span id="nombre_completo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().fecha_inicio.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('fecha_inicio',obtenerLista)">Fecha Inicio
                                        <span id="fecha_inicio" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().empresa.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('designacion_empresa',obtenerLista)">Empresa
                                        <span id="nombre" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().imagen.show">Imagen </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().ci.show">
                                    <a href="javascript:void(0)" ng-click="paginator.sortColumn('ci',obtenerLista)">C.I.
                                        <span id="CI" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().extension.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('extension',obtenerLista)">Extención
                                        <span id="Extención" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().extension.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('residencia',obtenerLista)">Residencia
                                        <span id="Extención" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().grupo_sanguineo.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('grupo_sanguineo',obtenerLista)">Grupo
                                        sanguineo
                                        <span id="Grupo_sanguineo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                    <!-- <a class="blue" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="agregarClasificacionCuenta()">
                                        <i class="ace-icon fa fa-plus bigger-130"></i>
                                    </a> -->
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().campo.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('campo',obtenerLista)">Campo
                                        <span id="Campo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center" ng-if="fieldViewer.getConfiguration().cargo.show">
                                    <a href="javascript:void(0)"
                                        ng-click="paginator.sortColumn('cargo',obtenerLista)">Cargo
                                        <span id="Cargo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">Acciones</th>
                                <th class="center">Gestion</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="paciente in pacientes">
                                <td class="center">
                                    {{($index+1)+(paginator.itemsPerPage*(paginator.currentPage-1))}}
                                </td>
                                <td class="center">

                                    <label>
                                        <input disabled name="switch-field-1" class="ace ace-switch ace-switch-4"
                                            type="checkbox" ng-model="paciente.activo"
                                            ng-change="changeActivo(paciente)" />
                                        <span class="lbl check-descuento"></span>
                                    </label>
                                    <!-- {{paciente.activo}} -->
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().codigo.show" class="center">
                                    {{paciente.codigo}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().nombre.show">
                                    {{paciente.nombre_completo}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().fecha_inicio.show">
                                    {{paciente.fecha_inicio | date:"dd/MM/yyyy"}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().empresa.show">
                                    {{paciente.designacion_empresa}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().imagen.show">
                                    <img ng-src="{{paciente.imagen | cachePath}}" width="50">
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().ci.show">
                                    {{paciente.ci}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().extension.show">

                                    {{paciente.extension}}
                                </td>

                                <td ng-if="fieldViewer.getConfiguration().residencia.show">
                                    {{paciente.numero}}
                                    <i class="fa fa-exclamation-circle blue" data-rel="tooltip" tooltip-placement="top"
                                        uib-tooltip='{{paciente.zona}}'></i>
                                </td>

                                <td ng-if="fieldViewer.getConfiguration().grupo_sanguineo.show">

                                    {{(paciente.id_grupo_sanguineo && obtenerNombreGrupoSangioneo(paciente.id_grupo_sanguineo) || 'Sin asignación' )}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().campo.show">
                                    {{paciente.campamento}}
                                </td>
                                <td ng-if="fieldViewer.getConfiguration().cargo.show">
                                    <a popover-placement="right" uib-popover-template="dynamicPopoverCargos.templateUrl"
                                        popover-trigger="outsideClick: outsideClick" popover-title="Cargos"
                                        class="blue">
                                        <i class="fa fa-list-ol bigger-200 orange" aria-hidden="true"></i>
                                    </a>
                                    <script type="text/ng-template" id="myPopoverTemplate.html">
                                        <div class="form-group">                                              
                                                <p ng-repeat="cargos in paciente.cargos">{{$index+1}}.{{cargos}}</p>
                                            <p ng-if="!paciente.cargos">1. Externo</p>
                                        </div>                                           
                                    </script>
                                </td>
                                <td>
                                    <div class="hidden-md hidden-lg">
                                        <div class="inline pos-rel">
                                            <button class="btn btn-minier btn-yellow dropdown-toggle"
                                                data-toggle="dropdown" data-position="auto">
                                                <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                            </button>

                                            <ul
                                                class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                                <li>
                                                    <a href="javascript:void(0)" ng-if="paciente.es_empleado"
                                                        ng-click="abrirIdModalDialogPreRequisitos(paciente)"
                                                        id="id-btn-dialogPrerequisitos" class="acciones tooltip-info"
                                                        data-rel="tooltip" tooltip-placement="top"
                                                        uib-tooltip="Pre-requisitos">
                                                        <span class="icono-prerequisito icono-font"></span>
                                                    </a>
                                                </li>
                                                <a href="javascript:void(0)" ng-click="abrirDialogVacunasPaciente(paciente)"
                                                    class="acciones vacuna tooltip-info" data-rel="tooltip"
                                                    tooltip-placement="top" uib-tooltip="Vacuna">
                                                    <span class="icono-vacuna icono-font"></span>
                                                </a>
                                                <li>
                                                    <a href="javascript:void(0)"
                                                        ng-click="abrirIdModalDialogLaboratorio(paciente)"
                                                        id="id-btn-laboratorio"
                                                        class="acciones laboratorio tooltip-info" data-rel="tooltip"
                                                        tooltip-placement="top" uib-tooltip="Laboratorio">
                                                        <span class="icono-laboratorio icono-font"></span>
                                                    </a>
                                                </li>
                                                <a href="javascript:void(0)" ng-click="crearNuevaConsulta(paciente)"
                                                    id="id-btn-consulta" data-toggle="modal"
                                                    class="acciones consulta tooltip-info" data-rel="tooltip"
                                                    tooltip-placement="top" uib-tooltip="Consulta">
                                                    <span class="icono-consulta icono-font"></span>
                                                </a>

                                                <li>
                                                    <a href="javascript:void(0)"
                                                        ng-click="abrirDialogDiagnosticos(paciente)"
                                                        class="acciones diagnostico tooltip-info" data-rel="tooltip"
                                                        tooltip-placement="top" uib-tooltip="Diagnostico">
                                                        <span class="icono-diagnostico icono-font"></span>
                                                    </a>

                                                </li>
                                                <a href="javascript:void(0)"
                                                    ng-click="abrirIdModalFichaTecnica(paciente)"
                                                    class="acciones tooltip-info" data-rel="tooltip"
                                                    tooltip-placement="top" uib-tooltip="Ficha medica">
                                                    <span class="icono-ficha_medica icono-font"></span>
                                                </a>
                                                <li>
                                                    <a href="javascript:void(0)"
                                                        ng-click="abrirDialogDialogCredencial(paciente)"
                                                        class="acciones credencial-salud tooltip-info"
                                                        data-rel="tooltip" tooltip-placement="top"
                                                        uib-tooltip="Credencial"
                                                        data-original-title="Credencial de salud">
                                                        <span class="icono-credencial_salud icono-font"></span>
                                                    </a>


                                                </li>
                                                <li>
                                                    <a href="javascript:void(0)"
                                                        ng-click="abrirIdModalGraficoSV(paciente)"
                                                        class="acciones graficos tooltip-info" data-rel="tooltip"
                                                        tooltip-placement="top" uib-tooltip="Graficos S.V."
                                                        id="id-btn-dialogGrafico">
                                                        <span class="icono-graficosv icono-font"></span>
                                                    </a>

                                                </li>
                                                <li>
                                                    <a href="javascript:void(0)"
                                                        ng-click="abrirDialogDialogPatologias(paciente)"
                                                        class="acciones graficos tooltip-info purple" data-rel="tooltip"
                                                        tooltip-placement="top" uib-tooltip="Patologias">
                                                        <span class="icono-patologia icono-font"></span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="javascript:void(0)"
                                                        ng-click="abrirDialogDialogComentario(paciente)"
                                                        class="acciones graficos tooltip-info grey" data-rel="tooltip"
                                                        tooltip-placement="top" uib-tooltip="{{paciente.comentario}}">
                                                        <span class="fa fa-comment" style="font-size: 20px;"></span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="javascript:void(0)" ng-disabled="paciente.eliminado"
                                                        ng-click="abrirDialogRolTurnos(paciente)" role="button"
                                                        class="tooltip-info" data-rel="tooltip" data-placement="top"
                                                        uib-tooltip="Rol de Turnos">
                                                        <span class="fa fa-clock-o fa-2x"></span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="hidden-sm hidden-xs action-buttons">
                                        <a href="javascript:void(0)"
                                            ng-click="abrirIdModalDialogPreRequisitos(paciente)"
                                            id="id-btn-dialogPrerequisitos" class="acciones tooltip-info"
                                            data-rel="tooltip" tooltip-placement="top" uib-tooltip="Pre-requisitos">
                                            <span class="icono-prerequisito icono-font"></span>
                                        </a>
                                        <!---CORREGIR e-disable to !aplicacion... e-disabled="aplicacion.puede_modificar" -->
                                        <a href="javascript:void(0)" ng-click="abrirDialogVacunasPaciente(paciente)"
                                            class="acciones vacuna tooltip-info" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="Vacuna">
                                            <span class="icono-vacuna icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="abrirIdModalDialogLaboratorio(paciente)"
                                            id="id-btn-laboratorio" class="acciones laboratorio tooltip-info"
                                            data-rel="tooltip" tooltip-placement="top" uib-tooltip="Laboratorio">
                                            <span class="icono-laboratorio icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="crearNuevaConsulta(paciente)"
                                            id="id-btn-consulta" data-toggle="modal"
                                            class="acciones consulta tooltip-info" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="Consulta">
                                            <span class="icono-consulta icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="abrirDialogDiagnosticos(paciente)"
                                            class="acciones diagnostico tooltip-info" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="Diagnostico">
                                            <span class="icono-diagnostico icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="abrirIdModalFichaTecnica(paciente)"
                                            class="acciones tooltip-info" data-rel="tooltip" tooltip-placement="top"
                                            uib-tooltip="Ficha medica">
                                            <span class="icono-ficha_medica icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="abrirDialogDialogCredencial(paciente)"
                                            class="acciones credencial-salud tooltip-info" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="Credencial"
                                            data-original-title="Credencial de salud">
                                            <span class="icono-credencial_salud icono-font"></span>
                                        </a>

                                        <a href="javascript:void(0)" ng-click="abrirIdModalGraficoSV(paciente)"
                                            class="acciones graficos tooltip-info" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="Graficos S.V."
                                            id="id-btn-dialogGrafico">
                                            <span class="icono-graficosv icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="abrirDialogDialogPatologias(paciente)"
                                            class="acciones graficos tooltip-info purple" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="Patologias">
                                            <span class="icono-patologia icono-font"></span>
                                        </a>
                                        <a href="javascript:void(0)" ng-click="abrirDialogDialogComentario(paciente)"
                                            class="acciones graficos tooltip-info grey" data-rel="tooltip"
                                            tooltip-placement="top" uib-tooltip="{{paciente.comentario}}">
                                            <span class="fa fa-comment" style="font-size: 30px;"></span>
                                        </a>
                                        <a href="javascript:void(0)" class="acciones graficos tooltip-info blue"
                                            data-rel="tooltip" tooltip-placement="top"
                                            ng-click="abrirDialogRolTurnos(paciente)" uib-tooltip="Rol de Turnos">
                                            <span class="fa fa-clock-o " style="font-size: 30px;"></span>
                                        </a>

                                    </div>
                                    <!-- <div class="hidden-md hidden-lg">
                                        <div class="inline pos-rel">
                                            <button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
                                                <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                            </button>

                                            <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                                <li>
                                                    <a href="javascript:void(0)" e-disabled="!aplicacion.puede_ver" ng-click="verCuenta(paciente)" class="tooltip-info" data-rel="tooltip"
                                                        title="View">
                                                        <span class="blue">
                                                            <i class="ace-icon fa fa-search-plus bigger-120"></i>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                   
                                                    <a href="javascript:void(0)" ng-click="modificarPaciente(paciente)" class="tooltip-success" data-rel="tooltip" title="Edit">
                                                        <span class="green">
                                                            <i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
                                                        </span>
                                                    </a>
                                                </li>

                                                <li>
                                                    <a href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar" ng-click="mostrarConfirmacionEliminacion(paciente)"
                                                        class="tooltip-error" data-rel="tooltip" title="Delete">
                                                        <span class="red">
                                                            <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                        </span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="javascript:void(0)" ng-click="kardexCuenta(paciente)" class="tooltip-info" data-rel="tooltip" title="View">
                                                        <span class="orange">
                                                            <i class="ace-icon fa fa-file-text bigger-120"></i>
                                                        </span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </td> -->
                                <td>
                                    <div class="action-buttons">

                                        <a class="blue" href="javascript:void(0)" e-disabled="!aplicacion.puede_ver"
                                            ng-click="verPaciente(paciente)" class="tooltip-info" data-rel="tooltip"
                                            title="View">
                                            <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                        </a>
                                        <a class="green" href="javascript:void(0)"
                                            e-disabled="!aplicacion.puede_modificar"
                                            ng-click="modificarPaciente(paciente)">
                                            <i class="ace-icon fa fa-pencil bigger-130"></i>
                                        </a>

                                        <!-- <a class="red" href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar"
                                            ng-click="mostrarConfirmacionEliminacion(paciente)">
                                            <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                        </a> -->
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row" ng-include src="'/templates/gral/paginator.html'" ng-if="pacientes.length > 0">
                </div>
            </div>
        </div>
    </div>
    <div id="dialog-eliminar-paciente" class="modal" title="¿Eliminación de Paciente?">
        <p>
            <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Esta seguro de
            eliminar el Paciente seleccionado?
        </p>
        <button type="button" class="btn btn-danger" ng-click="eliminarPaciente(paciente)">Si</button>
        <button type="button" class="btn btn-success" ng-click="cerrarConfirmacionEliminacion()">No</button>
    </div>
    <div id="dialog-entrega-adelantada-prerequisito" class="modal" title="¿Entrega Adelantada de prerequisito?">
        <p>
            <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>¿Efectuar entrega
            adelantada de prerequisito?
        </p>
        <button type="button" class="btn btn-danger"
            ng-click="abrirDialogEntregaPreRequisito(preRequisito,paciente);">Si</button>
        <button type="button" class="btn btn-success"
            ng-click="cerrarConfirmacionEntragaAdelantadaPrerequisito()">No</button>
    </div>
    <!-- modal edicion consulta -->
    <div id="modal-wizard-consulta" class="modal wizard-posicion">
        <div class="modal-consulta">
            <div class="modal-content">
                <div class="modal-header bg-primary">
                    <button type="button" class="close" ng-click="cerrarPopUpConsulta()" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="text-center text-white">{{paciente.nombre_completo}}</h4>
                </div>
                <form novalidate ng-submit="guardarConsulta(formularioConsulta,consulta)" id="formularioConsulta"
                    name="formularioConsulta">
                    <div id="modal-wizard-container-consulta">
                        <div class="steps-container">
                            <ul class="steps">
                                <li data-step="1" class="active">
                                    <span class="step">
                                        <span class="icono-pre "></span>
                                    </span>
                                    <span class="title">Signos Vitales</span>
                                </li>

                                <li data-step="2">
                                    <span class="step">
                                        <span class="icono-pre3 icono-step"></span>
                                    </span>
                                    <span class="title">SOAP Subj - obj</span>
                                </li>

                                <li data-step="3">
                                    <span class="step">
                                        <span class="icono-pre2 icono-step-soap"></span>
                                    </span>
                                    <span class="title">SOAP Analitico y Planes</span>
                                </li>

                                <li data-step="4">
                                    <span class="step">
                                        <span class="icono-pre4 icono-step"></span>
                                    </span>
                                    <span class="title">Revisíon por sistema</span>
                                </li>
                                <li data-step="5">
                                    <span class="step">
                                        <span class="icono-pre4 icono-step"></span>
                                    </span>
                                    <span class="title">Finalizar</span>
                                </li>
                            </ul>
                        </div>
                        <div class="modal-body step-content">
                            <div class="step-pane active" data-step="1">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Fecha y Hora</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required ng-update-hidden class="form-control date-timepicker"
                                                    data-date-format="DD/MM/YYYY HH:mm A" type="text" id="consultaFecha"
                                                    ng-model="consulta.fecha">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Presión</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <div class="input-daterange input-group">
                                                    <input required autofocus id="presionAlta"
                                                        ng-model="consulta.presionAlta" type="text"
                                                        class="input-sm form-control" name="start">
                                                    <span class="input-group-addon">
                                                        /
                                                    </span>
                                                    <input required id="presionBaja" ng-model="consulta.presionBaja"
                                                        type="text" class="input-sm form-control" name="end">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Pulso</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required id="pulso" ng-model="consulta.pulso" type="text"
                                                    class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Talla</label>
                                            </div>
                                            <div class="col-lg-7">

                                                <div class="input-group">
                                                    <input required id="talla" ng-model="consulta.talla"
                                                        class="form-control input-mask-product" type="number"
                                                        step="0.01" ng-change="imcCal(consulta)">
                                                    <!-- id="form-field-mask-3">-->
                                                    <span class="input-group-addon">
                                                        Cm
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Peso</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <div class="input-group">
                                                    <input required id="peso" ng-model="consulta.peso"
                                                        class="form-control input-mask-product" type="number"
                                                        step="0.01" ng-change="imcCal(consulta)">
                                                    <!-- id="form-field-mask-3">-->
                                                    <span class="input-group-addon">
                                                        Kg
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Temperatura</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <div class="input-group">
                                                    <input required id="temperatura" ng-model="consulta.temperatura"
                                                        class="form-control input-mask-product" type="number"
                                                        step="0.01">
                                                    <!-- id="form-field-mask-3">-->
                                                    <span class="input-group-addon">
                                                        °C
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Frecuencia Respiratoria</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required id="frecuenciaRespiratoria"
                                                    ng-model="consulta.frecuencia_respiratoria" type="text"
                                                    class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Frecuencia Cardiaca</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required id="frecuenciaCardiaca"
                                                    ng-model="consulta.frecuencia_cardiaca" type="text"
                                                    class="form-control">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-5">
                                                <label for="">Indice de Masa Corporal</label>
                                            </div>
                                            <div class="col-lg-7">

                                                <input disabled id="indiceMasa" ng-model="consulta.indice_masa"
                                                    type="text" class="form-control"> {{ClasificacionIMC}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <!-- <div>
                                                  <a data-toggle="collapse" href="#other">
                                                    <span class=" fa fa-caret-right "></span>
                                                  </a>
                                                  <div id="other" class="collapse">
                                                    <h1>Others are</h1>
                                                  </div>
                                                </div>-->
                                        <h4 class="blue">Historial Signos Anteriores
                                            <!-- <button class="btn btn-sm btn-danger">
                                                    <i class="ace-icon fa fa-print bigger-110"></i>
                                                    Pdf
                                                </button>
                                                <button class="btn btn-sm btn-success">
                                                    <i class="ace-icon fa fa-print bigger-110"></i>
                                                    Excel
                                                </button> -->
                                        </h4>

                                        <div class="content">
                                            <div class="panel-group accordion" id="accordionConsulta">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <h4 class="panel-title-consulta">

                                                            <a href="javascript:void(0)" data-toggle="collapse"
                                                                data-parent="#accordion" data-target="#collapseOne">
                                                                <span
                                                                    class="toggle-icon glyphicon glyphicon-chevron-down"></span>
                                                            </a>
                                                        </h4>
                                                    </div>
                                                    <div id="collapseOne" class="panel-collapse collapse in">
                                                        <div class="panel-body panel-body-consulta">
                                                            <div class="cont-paciente ScrollStyle-consulta">
                                                                <div
                                                                    ng-repeat=" historial in consultas | orderBy: '-fecha'">
                                                                    <h4 class="fecha-historial">
                                                                        <strong style="color: black;">{{historial.fecha
                                                                            | date:"dd/MM/yyyy - HH:mm"
                                                                            }}
                                                                        </strong>
                                                                    </h4>
                                                                    <ul class="lista">
                                                                        <li>Presión: {{historial.presion}}</li>
                                                                        <li>Pulso:{{historial.pulso}} </li>
                                                                        <li>Talla:{{historial.talla}} Cm</li>
                                                                        <li>Peso: {{historial.peso}} kg</li>
                                                                        <li>Temperatura:{{historial.temperatura}} °C
                                                                        </li>
                                                                        <li>Frecencia Respiratoria:
                                                                            {{historial.frecuencia_respiratoria}}</li>
                                                                        <li>Indice de Masa Corporal:
                                                                            {{historial.indice_masa_corporal}}</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="step-pane" data-step="2">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div>
                                            <label for="form-field-9">SUBJETIVO</label>

                                            <textarea ng-model="consulta.subjetivo" class="form-control limited"
                                                id="subjetivo-consulta-paciente" maxlength="100"
                                                style=" height: 100px;"></textarea>
                                        </div>
                                        <div>
                                            <label for="form-field-9">OBJETIVO</label>
                                            <textarea ng-model="consulta.objetivo" class="form-control limited"
                                                id="objetivo-consulta-paciente" maxlength="100"
                                                style=" height: 100px;"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="step-pane" data-step="3">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div>
                                            <label for="form-field-9">ANALÍTICO(DIAGNOSTICOS)</label>
                                            <textarea ng-model="consulta.diagnosticos" class="form-control limited"
                                                id="diagnosticos-consulta-paciente" maxlength="100"
                                                style=" height: 100px;"></textarea>
                                        </div>
                                        <div>
                                            <label for="form-field-9">PLANES</label>
                                            <textarea ng-model="consulta.planes" class="form-control limited"
                                                id="planes-consulta-paciente" maxlength="100"
                                                style=" height: 100px;"></textarea>
                                        </div>
                                        <div>
                                            <label for="form-field-9">EVOLUCIÓN</label>
                                            <textarea ng-model="consulta.evolucion" class="form-control limited"
                                                id="evolucion-consulta-paciente" maxlength="100"
                                                style=" height: 100px;"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="step-pane" data-step="4">
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Nervioso Central</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.nervioso_central" type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Ojos, oído, naríz y garganta</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.ojos_oido_nariz_garganta" type="text"
                                            class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Cardio Vascular</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.cardio_vascular" type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Respiratorio</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.respiratorio" type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Gastro Intestinal</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.gastro_instestinal" type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Genitourinario</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.genitourinario" type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Locomotor</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.locomotor" type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label for="">Piel y faneras</label>
                                    </div>
                                    <div class="col-lg-9">
                                        <input ng-model="consulta.piel_faneras" type="text" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="step-pane" data-step="5">
                                <div class="row">
                                    <div class="center">
                                        <h4 class="blue">Finalización</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer wizard-actions">
                        <button type="button" class="btn btn-primary btn-sm "
                            ng-click="guardarDatosConsulta(formularioConsulta,consulta)">
                            <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                        <button class="btn btn-sm btn-prev">
                            <i class="ace-icon fa fa-arrow-left"></i>
                            Anterior
                        </button>

                        <button ng-disabled="!aplicacion.puede_crear" class="btn btn-success btn-sm btn-next"
                            id="siguiente-c" data-last="Finish">
                            Siguiente
                            <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                        </button>

                        <button class="btn btn-danger btn-sm pull-left" data-dismiss="modal"
                            ng-click="cerrarPopUpConsulta()">
                            <i class="ace-icon fa fa-times"></i>
                            Cancelar
                        </button>
                        <button class="btn btn-info btn-sm pull-left" data-dismiss="modal"
                            ng-click="abrirDialogHistorialConsulta()">
                            H
                        </button>
                        <button class="btn btn-success btn-sm pull-left" data-dismiss="modal"
                            ng-click="reporteConsultasPacienteExcel(paciente.id)">
                            Excel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- modal consulta fin -->
    <!-- =========== panel historial consulta ==================== -->
    <div id="dialog-historial-consulta" class="modal wizard-posicion">
        <!-- TOP BAR -->
        <div class=" ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-5" class="ui-dialog-title">
                <h4 class="smaller blue">
                    <i class="ace-icon icono-consulta icono-font "></i>
                    <label>Historial consulta médica</label>
                </h4>
            </span>
            <button ng-click="cerrarDialogHistorialConsulta()" type="button" class="ui-dialog-titlebar-close"></button>
        </div>
        <!-- TOP BAR -->
        <br>
        <div class="container-fluid">
            <div class="row">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Desde</th>
                            <th>Hasta</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <input required="" size="15" ng-update-hidden=""
                                    class="form-control date-picker"
                                    type="text" data-date-format="dd/mm/yyyy"
                                    id="fechainicio-historial-consulta-paciente" ng-model="filtro.inicio"
                                    placeholder="Fecha inicial">
                            </td>
                            <td>
                                <input required="" ng-update-hidden="filtro.fin"
                                    class="form-control date-picker"
                                    type="text" data-date-format="dd/mm/yyyy"
                                    id="fechafinal-historial-consulta-paciente" ng-model="filtro.fin"
                                    placeholder="Fecha final" size="10">
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary btn-sm"
                                    ng-click="listarConsultasPaciente(filtro)">
                                    <i class="ace-icon fa fa-search bigger-130"></i>Buscar</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <!-- <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <input required="" size="15" ng-update-hidden="" class="form-control date-picker"
                            type="text" data-date-format="dd/mm/yyyy" id="fechainicio" ng-model="filtro.inicio" placeholder="Fecha inicial">
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                        <input required="" ng-update-hidden="filtro.fin" class="form-control date-picker"
                            type="text" data-date-format="dd/mm/yyyy" id="fechainicio" ng-model="filtro.fin" placeholder="Fecha final"
                            size="10">
                    </div>
                    <button type="button" class="btn btn-primary btn-sm" ng-click="listarConsultasPaciente(filtro)">
                        <i class="ace-icon fa fa-search bigger-130"></i>Buscar</button>
                </div> -->


            </div>
            <br>
            <div class="conatainer-fluid">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>
                                Nro
                            </th>
                            <th>
                                Fecha
                            </th>
                            <th>
                                Acciones
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="consulta in consultas">
                            <td>{{$index+1}}</td>
                            <td>{{consulta.fecha | date:"dd/MM/yyyy" }}</td>
                            <td>
                                <div class="hidden-sm hidden-xs action-buttons">
                                    <a style="cursor: pointer;" popover-placement="left"
                                        uib-popover-template="dynamicPopoverCargos.templateUrl"
                                        popover-trigger="outsideClick: outsideClick"
                                        popover-title="Información consulta" class="blue">
                                        <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                    </a>
                                    <a style="cursor: pointer;" ng-click="imprimirConsultaMedica(paciente, consulta)"
                                        class="red">
                                        <i class="ace-icon fa fa-file-pdf-o bigger-130"></i>
                                    </a>
                                    <script type="text/ng-template" id="consultaPopoverTemplate.html">
                                            <div class="container-fluid form-group">
                                                
                                                <table class="table table-striped table-bordered table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>Presión alta/baja</th>
                                                            <th>Talla Cm</th>
                                                            <th>Peso Kg</th>
                                                            <th>IMC</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                {{consulta.presion}}
                                                            </td>
                                                            <td>
                                                            {{consulta.talla}}
                                                            </td>
                                                            <td>
                                                                {{consulta.peso}}
                                                            </td>
                                                            <td>
                                                                {{consulta.indice_masa_corporal}}
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>                                              
                                            </div>                                           
                                        </script>
                                    <!-- <a class="orange" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar" ng-click="modificarProducto(producto)">
                                                    <i class="ace-icon fa fa-print bigger-130"></i>
                                                </a> -->
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- ===== fin historial consulta ============================= -->
    <!-- =========== panel diagnosticos ==================== -->
    <div id="dialog-diagnosticos" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarDialogDiagnosticos()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class='text-center bold text-white text-uppercase'>
                    <i class="ace-icon pacientes-vacuna icono-diagnostico bigger-110"></i> DIAGNÓSTICO
                </h4>
                <h4 class="small text-center bold text-white text-uppercase">{{paciente.nombre_completo}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12" style="margin-bottom: 10px;" >
                        <button ng-disabled="!aplicacion.puede_crear" ng-click="abrirDialogDiagnosticoNuevo()"
                            id="id-btn-buscar-consulta" class="btn btn-primary btn-sm">
                            <i class="ace-icon fa fa-plus align-top bigger-125"></i>
                            Nuevo
                        </button>
                        <button style="margin-left: 4px;" ng-disabled="!aplicacion.puede_crear" ng-click="reportePacienteDiagnosticoXlsx(paciente.id)" class="pull-right btn btn-success btn-sm">
                            <i class="fa fa-file-excel-o align-top aling-left bigger-110"></i> Excel
                        </button>
                        <button ng-disabled="!aplicacion.puede_crear" ng-click="reportePacienteDiagnosticoPdf(paciente.id)" class="pull-right btn btn-danger btn-sm">
                            <i class="fa fa-file-pdf-o align-top aling-left bigger-110"></i> PDF
                        </button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table id="dynamic-table" class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>Diagnostico</th>
                                <th>Resultado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
    
                        <tbody>
                            <tr ng-repeat="diagnostico in listaDiagnosticos">
                                <td>{{diagnostico.nombre}}</td>
                                <td>
                                    <div class="action-buttons">
                                        <a class="blue" ng-click="abrirDialogExamenesDiagnostico(diagnostico)"
                                            href="javascript:void(0)" id="id-examenesDiagnostico">
                                            <i class="icono-prerequisito icono-font"></i>
                                        </a>
                                    </div>
    
                                </td>
                                <td>
                                    <div class="action-buttons">
    
                                        <a class="blue" ng-click="abrirDialogDiagnosticoNuevo(diagnostico,true)">
                                            <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                        </a>
    
                                        <a class="green" e-disabled="!aplicacion.puede_modificar"
                                            ng-click="abrirDialogDiagnosticoNuevo(diagnostico)">
                                            <i class="ace-icon fa fa-pencil bigger-130"></i>
                                        </a>
    
                                        <a class="red" e-disabled="!aplicacion.puede_eliminar"
                                            ng-click="eliminarDiagnostico(diagnostico)">
                                            <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button ng-click="cerrarDialogDiagnosticos()" type="button" class="btn btn-danger btn-sm">
                    <i class="ace-icon fa fa-times bigger-110"></i>
                    Cerrar
                </button>
            </div>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->
    <!-- =========== panel nuevo examen ==================== -->
    <div id="dialog-diagnostico-nuevo" class="modal wizar-posicion">
        <!-- topbar -->
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-6" class="ui-dialog-title">
                <div>
                    <h4 class="smaller red">
                        <i class="ace-icon icono-diagnostico icono-font "></i>
                        <label>NUEVO DIAGNOSTICO</label>
                    </h4>
                </div>
            </span>
            <button ng-click="cerrarDialogDiagnosticoNuevo()" type="button" class="ui-dialog-titlebar-close"></button>
        </div>
        <!-- topbar -->

        <div class="">
            <form name="fromNuevoDig" ng-submit="guardarNuevoDiagnostico(fromNuevoDig)" novalidate>
                <div>
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Nombre</label>
                        <input required ng-disabled="diagnostico.soloVista" name="nombre" ng-model="diagnostico.nombre"
                            type="text" class="form-control">
                        <div ng-show="fromNuevoDig.nombre.$error.required" class="invalid-message help-block"
                            ng-messages="fromNuevoDig.nombre.$error"
                            ng-if="fromNuevoDig.nombre.$touched || (fromNuevoDig.$submitted && fromNuevoDig.nombre.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="col-lg-12">
                        <label for="form-field-select-1">descripcion</label>
                        <input required name="descripcion" ng-disabled="diagnostico.soloVista"
                            ng-model="diagnostico.descripcion" type="text" class="form-control">
                        <div ng-show="fromNuevoDig.descripcion.$error.required" class="invalid-message help-block"
                            ng-messages="fromNuevoDig.descripcion.$error"
                            ng-if="fromNuevoDig.descripcion.$touched || (fromNuevoDig.$submitted && fromNuevoDig.descripcion.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>
                    </div>
                </div>
                <div class="space-6"></div>
                <div class="col-lg-12 modal-footer wizard-actions">
                    <button ng-if="!diagnostico.soloVista" type="submit" class="btn btn-primary">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal"
                        ng-click="cerrarDialogDiagnosticoNuevo()">
                        <i class="ace-icon fa fa-times"></i>
                        Cancelar
                    </button>
                </div>
            </form>
            <!--  <form>
                <div class="row">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Nombre</label>
                        <input type="text" class="form-control">
                    </div>
                </div>
                <div class="space-6"></div>
                <div class="row">
                    <div class="modal-footer wizard-actions">
                        <button type="button" class="btn btn-primary" ng-click="cerrarDialogDiagnosticoNuevo()" data-last="Finish">
                            <i class="ace-icon fa fa-floppy-o bigger-110"></i>
                            Guardar
                        </button>

                        <button type="button" ng-click="cerrarDialogDiagnosticoNuevo()" class="btn btn-danger" data-dismiss="modal">
                            <i class="ace-icon fa fa-times"></i>
                            Cancelar
                        </button>
                    </div>
                </div>
            </form> -->
        </div>
    </div>
    <!-- ===== fin panel ============================= -->
    <!-- =========== panel diagnostico examenes ==================== -->
    <div id="dialog-examenesDiagnostico" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarDialogExamenesDiagnostico()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class='text-center bold text-white text-uppercase'>
                    <i class="ace-icon icono-diagnostico icono-font bigger-110"></i> DIAGNÓSTICO MÉDICO
                </h4>
                <h4 class="small text-center bold text-white text-uppercase">{{diagnostico.nombre}}</h4>
            </div>
            <form name="formResult" ng-submit="guardarDiagnosticoExamenResultados(formResult,fechaResultado)" novalidate>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12">
                            <button ng-disabled="!aplicacion.puede_crear" type="button"
                                ng-click="abrirDialogNuevoExamenDiagnostico()" id="id-btn-nuevo-diagnostico-resultado"
                                class="btn btn-primary btn-sm">
                                <i class="ace-icon fa fa-plus align-top bigger-125"></i>
                                Nuevo
                            </button>
        
                        <div class="pull-right">
                            <label> Fecha:</label>
                            <label>
                                <input required size="15" name="fecha" ng-update-hidden=""
                                    class="form-control date-picker"
                                    type="text" data-date-format="dd/mm/yyyy" id="fechainicio-diagnostico-examen-paciente"
                                    ng-model="fechaResultado" placeholder="Fecha inicial">
                                <div ng-show="formResult.fecha.$error.required" class="invalid-message help-block"
                                    ng-messages="formResult.fecha.$error"
                                    ng-if="formResult.fecha.$touched || (formResult.$submitted && formResult.fecha.$invalid)">
                                    <div ng-messages-include="/templates/gral/messages.html"></div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="table-responsive" style="overflow-x:auto;">
                    <table id="dynamic-table"
                        class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>Examenes</th>
                                <th>Ultimo resultado</th>
                                <th>Resultado actual</th>
                                <th>Estadistica</th>
                                <th>Rango ref.</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="examen in listaDiagnosticosExamenes">
                                <td>{{examen.examen}}</td>
                                <td>
                                    <input disabled type="text" ng-model="examen.ultimo_resultado" class="form-control">
                                </td>
                                <td>
                                    <input type="text" ng-model="examen.resultado" class="form-control">
                                </td>
                                <td>
                                    <select name="estadistica" id="estadistica"
                                        ng-options="estadistica as estadistica.nombre for estadistica in estadisicasResultados track by estadistica.id"
                                        ng-model="examen.estadistica">
                                        <option disabled value="">Seleccionar....</option>
                                    </select>
                                </td>
                                <td>
                                    {{(examen.maximo ? examen.maximo + 'Max.':'')}}{{examen.minimo && examen.maximo ? " - ":""}}{{(examen.minimo ? examen.minimo + 'Min.':'')}}
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <a class="blue" href="javascript:void(0)" ng-click="abrirDialogNuevoExamenDiagnostico(examen,true)">
                                            <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                        </a>

                                        <a class="green" href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar"
                                            ng-click="abrirDialogNuevoExamenDiagnostico(examen)">
                                            <i class="ace-icon fa fa-pencil bigger-130"></i>
                                        </a>

                                        <a class="red" href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar"
                                            ng-click="eliminarNuevoDiagnosticoExamen(examen)">
                                            <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                        </a>
                                    </div>

                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-footer wizard-actions">
                    <button ng-click="abrirIdModalDialogDiagnosticoExamenesHistoricoResultados()" type="button"
                        class="btn btn-white  btn-bold btn-danger" id="id-btn-historicoResultado">
                        <i class="ace-icon fa fa-h-square bigger-110"></i>&nbsp; Historico</button>
                    <button ng-disabled="!aplicacion.puede_crear" type="submit" class="btn btn-primary btn-sm ">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal"
                        ng-click="cerrarDialogExamenesDiagnostico()">
                        <i class="ace-icon fa fa-times"></i>Cancelar
                    </button>
                </div>
            </div>
            </form>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->
    <!-- =========== panel nuevo examen diagnosticoo ==================== -->
    <div id="dialog-examenDiagnostico-nuevo" class="modal wizar-posicion">
        <!-- topbar -->
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-6" class="ui-dialog-title">
                <div>
                    <h4 class="smaller red">
                        <i class="ace-icon icono-diagnostico icono-font "></i>
                        <label> DIAGNOSTICO NUEVO EXAMEN</label>
                    </h4>
                </div>
            </span>
            <button ng-click="cerrarDialogNuevoExamenDiagnostico()" type="button"
                class="ui-dialog-titlebar-close"></button>
        </div>
        <!-- topbar -->

        <div class="">
            <form ng-submit="guardarNuevoDiagnosticoExamen(formNuevoExamen2)" name="formNuevoExamen2" novalidate>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Examen de Diag.</label>
                        <input ng-disabled="examen.soloVista" required name="examen" ng-model="examen.examen"
                            type="text" class="form-control">
                        <div ng-show="formNuevoExamen2.examen.$error.required" class="invalid-message help-block"
                            ng-messages="formNuevoExamen2.examen.$error"
                            ng-if="formNuevoExamen2.examen.$touched || (formNuevoExamen2.$submitted && formNuevoExamen2.examen.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>

                    </div>

                </div>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Unidad</label>
                        <input required ng-disabled="examen.soloVista" name="unidad" ng-model="examen.unidad"
                            type="text" class="form-control">
                        <div ng-show="formNuevoExamen2.unidad.$error.required" class="invalid-message help-block"
                            ng-messages="formNuevoExamen2.unidad.$error"
                            ng-if="formNuevoExamen2.unidad.$touched || (formNuevoExamen2.$submitted && formNuevoExamen2.unidad.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>

                    </div>
                </div>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Rango (parametro) referencia mínimo</label>
                        <input ng-disabled="examen.soloVista" name="minimo" ng-model="examen.minimo" type="text"
                            class="form-control">
                    </div>
                    <div class="">
                        <div class="col-lg-12">
                            <label for="form-field-select-1">Rango (parametro) referencia máximo</label>
                            <input ng-disabled="examen.soloVista" name="maximo" ng-model="examen.maximo" type="text"
                                class="form-control">
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-9">Observaciones</label>
                        <textarea ng-disabled="examen.soloVista" ng-model="examen.observacion" name="observacion"
                            class="form-control limited" id="observacion-examen-paciente" maxlength="50"></textarea>
                        <div ng-show="formNuevoExamen2.unidad.$error.required" class="invalid-message help-block"
                            ng-messages="formNuevoExamen2.unidad.$error"
                            ng-if="formNuevoExamen2.unidad.$touched || (formNuevoExamen2.$submitted && formNuevoExamen2.unidad.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>
                    </div>
                </div>
                <div class="space-6"></div>
                <div class="col-lg-12 modal-footer wizard-actions">
                    <button ng-if="!examen.soloVista" type="submit" class="btn btn-primary">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button class="btn btn-danger" type="button" data-dismiss="modal"
                        ng-click="cerrarDialogNuevoExamenDiagnostico()">
                        <i class="ace-icon fa fa-times"></i>
                        Cancelar
                    </button>
                </div>
            </form>
            <!--  <form>
                <div class="row">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Nombre</label>
                        <input type="text" class="form-control">
                    </div>
                </div>
                <div class="space-6"></div>
                <div class="row">
                    <div class="modal-footer wizard-actions">
                        <button type="button" class="btn btn-primary" ng-click="cerrarDialogNuevoExamenDiagnostico()" data-last="Finish">
                            <i class="ace-icon fa fa-floppy-o bigger-110"></i>
                            Guardar
                        </button>

                        <button type="button" ng-click="cerrarDialogNuevoExamenDiagnostico()" class="btn btn-danger" data-dismiss="modal">
                            <i class="ace-icon fa fa-times"></i>
                            Cancelar
                        </button>
                    </div>
                </div>
            </form> -->
        </div>
    </div>
    <!-- ===== fin panel ============================= -->
    <!-- panel vacunas paciente =====================================================-->
    <div id="dialog-vacunas-paciente" class="modal wizard-posicion">
        <!-- TOPBAR -->
        <div class=" modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarPopPupVacunasPaciente()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class='smaller text-center text-white text-uppercase'>VACUNAS</h4>
                <h5 class="white text-center smaller">{{paciente.nombre_completo ? paciente.nombre_completo: ''}}</h5> 
                <div>
                    <span class="smaller text-white" style="cursor: pointer!important;" id="id-btn-vacunaConfig" ng-click="abrirDialogVacunasConfig(true, paciente.id)">
                        <i class=" glyphicon glyphicon-cog bigger-100"> </i> Configuración
                    </span>
                </div>
            </div>
        </div>
        <div class="table-responsive">
            <table id="tabla-vacunas" class="table">
                <thead>
                    <tr>
                        <th class="text-center">N°</th>
                        <th></th>
                        <th class="text-center">Vacuna</th>
                        <th class="text-center">Proyección</th>
                        <!-- <th class="text-center">Última aplicación</th>
                        <th class="text-center" ng-if="!paciente.eliminado"></th>
                        <th class="text-center">Proxima aplicación</th> -->
                        <th class="text-center">Acciones</th>
                    </tr>
                </thead>
                <div class="alert alert-danger text-center" style="margin-bottom: 0px!important;" ng-if="paciente.eliminado">Las funcionalidades de vacunas en trabajadores inactivos, son sólo de consulta.</div>
                <tbody>
                    <tr ng-repeat="vacuna in vacunasAsignadas" >
                        <td>{{ $index + 1}}</td>
                        <td><span class="badge badge-primary">{{vacuna.pacienteVacunaDosis.length}}/{{vacuna.pacienteVacuna.vacunaDosis.length}}</span></td>
                        <td>{{vacuna.pacienteVacuna.nombre}}</td>
                        
                        <td style="display: flex; flex-wrap: wrap; justify-items: center;">
                            <div ng-if="vacuna.historico" ng-repeat="dosis in vacuna.historico.dosis">
                                <div class="label label-success" style="margin: 3px 3px;  background-color: #0c8245!important; border-radius:4px;" ng-if="dosis.estado==1">
                                    <span class="padding: 8px 14px!important; " uib-popover="{{ dosis.comentario}}" popover-trigger="mouseenter" >{{dosis.aplicacion ? fechaATexto(dosis.aplicacion) : '' }}</span>
                                </div>
                                <div class="label label-danger" style="margin: 3px 3px; background-color: #c2212e!important; border-radius:4px;" ng-if="dosis.estado==2">
                                    <span class="padding: 8px 14px!important;" uib-popover="{{ dosis.comentario}}" popover-trigger="mouseenter" >{{dosis.aplicacion ? fechaATexto(dosis.aplicacion) : '' }}</span>
                                </div>
                                <div class="label label-info" style="margin: 3px 3px; border-radius:4px;" ng-if="dosis.estado==3">
                                    <span class="padding: 8px 14px!important;">{{dosis.proyeccion ? fechaATexto(dosis.proyeccion) : '' }}</span>
                                </div>
                            </div>
                        </td>
                        <td class="action-buttons">
                            <a ng-if="!((vacuna.pacienteVacunaDosis.length == vacuna.pacienteVacuna.vacunaDosis.length) || (vacuna.pacienteVacuna.unico && vacuna.pacienteVacunaDosis.length==1))" e-disabled="!aplicacion.puede_crear" href="javascript:void(0)"
                                ng-click="iniciarVacunacion(vacuna, false, paciente)" class="acciones vacuna tooltip-info" data-rel="tooltip"
                                data-placement="bottom" data-original-title="Vacuna" style="text-decoration: none!important;">
                                <i ng-if="vacuna.pacienteVacuna.eliminado" class="icono-vacuna" style="font-size: 2.4rem; color: #CD0B3D!important;"></i>
                                <i ng-if="!vacuna.pacienteVacuna.eliminado" class="icono-vacuna" style="font-size: 2.4rem; color: #05974B!important;"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <div class="pull-right">
                <button style="padding: 3px 9px !important;" ng-click="imprimirVacunasAplicadas(paciente)" type="button"
                    class="btn btn-success ">
                    <i class="fa fa-file-pdf-o"></i>
                    Imprimir
                </button>
                <button ng-click="cerrarPopPupVacunasPaciente()" type="button" class="btn btn-danger btn-sm">
                    Salir
                    <i class="ace-icon fa fa-arrow-right icon-on-right bigger-110"></i>

                </button>
            </div>
        </div>
    </div>
    <!-- fin panel vacunas paciente -->
    <!-- panel configuracion vacunas =========================================================== -->
    <div id="dialog-vacunas-config" class="modal wizard-posicion">
        <!-- TOPBAR -->
        <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarPopUpVacunasConfig()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class=" text-center text-white">
                    <i class="ace-icon icono-vacuna" style="color: white!important;"></i>
                    <label> VACUNAS</label>
                </h4>
                <h4 class="text-center"><small class="text-white">{{paciente.persona ? paciente.persona.nombre_completo : ''}}</small></h4>
        </div>
        <div class="table-responsive">
            <table id="tabla-vacunas" class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>N°</th>
                        <th>Nombre</th>
                        <th>Dosis</th>
                        <th>Observación</th>
                        <th>Estado</th>
                        <th>Aplicado</th>
                        <th>Asignado</th>
                        <th></th>
                    </tr>
                </thead>
                <div class="alert alert-danger text-center" style="margin-bottom: 0px!important;" ng-if="paciente.eliminado">El paciente esta inactivo, no podrá realizar cambios.</div>
                <tbody>
                    <tr ng-repeat="vacuna in vacunasPaciente">
                        <td>{{ $index+1 }}</td>
                        <td class="uppercase">{{ vacuna.nombre }}</td>
                        <td>
                            <span class="badge badge-success" ng-if="vacuna.unico">Única</span>
                            <span class="badge badge-info" ng-if="!vacuna.unico">Múltiple</span>
                        </td>
                        <td>{{ vacuna.observacion }}</td>
                        <td>
                            <span class="badge badge-danger" ng-if="vacuna.eliminado">Inactivo</span>
                            <span class="badge badge-success" ng-if="!vacuna.eliminado">Activo</span>
                        </td>
                        <td> {{ vacuna.aplicado ? 'Si' : 'No' }}</td>
                        <td>
                            <label>
                                <input ng-disabled="(!aplicacion.puede_modificar || paciente.eliminado)" ng-change="asignarVacunas($index, paciente.id, vacuna.id)" name="switch-field-1"
                                    ng-model="vacuna.asignado" class="ace ace-switch ace-switch-4" type="checkbox" />
                                <span class="lbl check-descuento"></span>
                            </label>
                        </td>
                        <td class="action-buttons">
                            <a style="text-decoration: none; cursor: pointer;" class="info" ng-click="abrirModalCrearEditarVacuna(vacuna, true)" id="id-btn-vacunaEditar">
                                <i class="ace-icon fa fa-search-plus bigger-160"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
            <div class="ui-dialog-buttonset">
                <!-- <button ng-click="cerrarPopUpVacunasConfig()" type="button" class="btn btn-white  btn-bold btn-danger "><i class="ace-icon fa fa-h-square  bigger-110"></i>&nbsp; Historial</button> -->
               <!--  <button ng-disabled="(!aplicacion.puede_crear || paciente.eliminado)" ng-click="asignarVacunas(paciente.id, vacuna.id)" type="button"
                    class="btn btn-primary">
                    <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button> -->
                <button ng-click="cerrarPopUpVacunasConfig()" type="button" class="btn btn-danger">
                    <i class="ace-icon fa fa-times bigger-110"></i>&nbsp; Cancelar</button>
            </div>
        </div>
        <div class="space-6"></div>
    </div>

    <!-- fin panel configuracion vacunas -->

    <!-- panel vacunas nuevas/edicion =================================================== -->

    <div id="dialog-vacuna-nueva" class="modal wizard-posicion" style="overflow-x: hidden;">
        <div class="modal-content">
            <form  id="formVacuna" name="formVacuna" ng-submit="editarVacuna(formVacuna.$valid, vacuna)">
                <div class="modal-header bg-primary">
                    <button type="button" class="close" ng-click="cerrarPopUpVacunaNueva()" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 ng-if="!vacuna.id" class="text-center"><small class="text-white">NUEVA VACUNA</small></h3>
                    <h3 ng-if="vacuna.id" class="text-center"><small class="text-white">EDITAR VACUNA</small></h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-xs-12 col-sm-6" style="padding: 0px 0px 12px 0px!important;">
                            <div class="col-xs-12" style="padding: 0px 15px 15px 15px!important;">
                                <div class="table-header">
                                    Datos de la Vacuna
                                </div>
                                <div class="col-xs-12">
                                    <div class="form-group col-xs-12" style="padding: 0px 0px!important;">
                                        <label for="vacuna_nombre">Nombre</label>
                                        <input required type="text" ng-disabled="ver" class="form-control" ng-model="vacuna.nombre">
                                    </div>
                                    <div class="col-xs-12" style="padding: 0px 0px!important;">
                                        <div class="col-xs-6" style="padding: 0px 0px!important;">
                                            <label for="vacuna_tipo_dosis" style="width: 100%;">Dosis Única</label>
                                            <label>
                                                <input id="checkbox-dosis-unico" ng-disabled="ver" class="ace ace-switch ace-switch-4 dosis" type="checkbox"
                                                ng-model="vacuna.unico">
                                                <span class="lbl check-descuento"></span>
                                            </label>
                                        </div>
                                        <div ng-if="ver" class="col-xs-6" style="padding: 0px 0px!important;">
                                            <label for="vacuna_tipo_dosis" style="width: 100%;">Eliminado</label>
                                            <label>
                                                <input id="checkbox-dosis-unico" ng-disabled="ver" class="ace ace-switch ace-switch-4 dosis" type="checkbox"
                                                ng-model="vacuna.eliminado">
                                                <span class="lbl check-descuento"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-lg-12" style="padding: 0px 0px!important;">
                                        <label for="observacion_vacuna">Observaciones</label>
                                        <textarea class="form-control limited" ng-disabled="ver" id="observacion-vacuna-paciente" maxlength="50"
                                            ng-model="vacuna.observacion"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="table-header">
                                    Productos de Vacunación
                                </div>
                                <table ng-if="!ver" id="tabla-productos-vacuna" class="table table-striped table-bordered table-hover nowrap dataTable no-footer" style=margin-top:0px!important;>
                                    <thead>
                                        <tr>
                                            <th class="text-center">Producto</th>
                                            <th class="text-center">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <input ng-disabled="ver" type="text" ng-model="vacunaProducto" uib-typeahead="producto as producto.nombre for producto in productos | filter:$viewValue | limitTo:8" typeahead-append-to-body="true" class="form-control input-sm" placeholder="Ingrese producto">
                                            </td>
                                            <td>
                                                <span>
                                                    <a id="id-btn-agregarDosis" ng-disabled="!vacunaProducto.id" ng-click="addProducto(vacunaProducto); vacunaProducto=undefined;"
                                                        class="btn btn-primary btn-sm">
                                                        <i class="ace-icon fa fa-plus"></i>
                                                    </a>
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table ng-if="vacunaProductos.length>0" id="tabla-dosis" class="table table-striped table-bordered table-hover nowrap dataTable no-footer" style="margin-top:0px!important;">
                                    <thead>
                                        <tr>
                                            <th>N°</th>
                                            <th>Producto</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="prod in vacunaProductos track by $index">
                                            <td>{{$index+1}}</td>
                                            <td>
                                                {{ prod.producto.nombre }}
                                            </td>
                                            <td>
                                                <span ng-if="!prod.eliminado" class="badge badge-success" >Activo</span>
                                                <span ng-if="prod.eliminado" class="badge badge-danger" >Inactivo</span>
                                            </td>
                                            <td>
                                                <div class="action-buttons">
                                                    <a ng-class="prod.eliminado ? 'green' : 'red'" style="cursor: pointer;" ng-if="!ver && prod.id" ng-click="eliminarVacunaProducto(prod, $index)">
                                                        <i ng-if="!prod.eliminado" class="ace-icon fa fa-ban bigger-130"></i>
                                                        <i ng-if="prod.eliminado" class="ace-icon fa fa-external-link-square bigger-130"></i>
                                                    </a>
                                                    <a class="red" style="cursor: pointer;" ng-if="!prod.id" ng-click="eliminarVacuna($index)">
                                                        <i class="ace-icon fa fa-trash bigger-130"></i>
                                                    </a>
                                                </div>
                                                
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6" style="padding: 0px 0px!important;">
                            <div class="col-xs-12">
                                <div class="table-header">
                                    Dosis de la Vacuna
                                </div>
                                <table ng-if="!(ver || vacuna.unico)" id="tabla-dosis" class="table table-striped table-bordered table-hover nowrap dataTable no-footer" style="margin-top: 0px!important;">
                                    <thead>
                                        <tr>
                                            <th class="text-center">Tipo</th>
                                            <th class="text-center">Tiempo</th>
                                            <th class="text-center">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <label >
                                                    <input id="checkbox-dosis" name="switch-field-1" class="ace ace-switch ace-switch-4 dosis" type="checkbox" ng-model="dosis.es_dosis" ng-change="textoDosis(dosis)">
                                                    <span class="lbl check-dosis"></span>
                                                </label>
                                            </td>
                                            <td>
                                                <input type="number" ng-model="dosis.tiempo" id="tiempo_dosis" class="form-control">
                                            </td>
                                            <td>
                                                <span ng-if="dosisEdit">
                                                    <a id="id-btn-agregarDosis" ng-click="agregarDosisEditada(dosis)"
                                                        class="btn btn-success btn-sm"
                                                        ng-disabled="!dosis.tiempo > 0">
                                                        <i class="ace-icon fa fa-plus "></i>
                                                    </a>
                                                </span>
                                                <span ng-if="!dosisEdit">
                                                    <a id="id-btn-agregarDosis" ng-click="agregarDosisVacuna(dosis)"
                                                        class="btn btn-primary btn-sm"
                                                        ng-disabled="!dosis.tiempo > 0">
                                                        <i class="ace-icon fa fa-plus "></i>
                                                    </a>
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table ng-if="vacunaDosis.length>0" id="tabla-dosis" class="table table-striped table-bordered table-hover nowrap dataTable no-footer" style="margin-top: 0px!important;">
                                    <thead>
                                        <tr>
                                            <th>N°</th>
                                            <th>Tipo</th>
                                            <th>Tiempo</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="ladosis in vacunaDosis track by $index">
                                            <td>{{$index+1}}</td>
                                            <td>
                                                <span class="badge badge-success" ng-if="ladosis.es_dosis">Dosis</span>
                                                <span class="badge badge-info" ng-if="!ladosis.es_dosis">Refuerzo</span>
                                            </td>
                                            <td>
                                                {{ladosis.es_dosis ? ladosis.tiempo + ' Día(s)' : ladosis.tiempo + ' Mes(es)' }}
                                            </td>
                                            <td>
                                                <div class="action-buttons">
                                                    <a class="green" style="cursor: pointer;" ng-if="!(ver || vacuna.unico)" ng-click="editarLaDosis(ladosis)">
                                                        <i class="ace-icon fa fa-pencil bigger-130"></i>
                                                    </a>
                                                    <a class="red" style="cursor: pointer;" ng-if="!(ver || vacuna.unico)" ng-click="eliminarDosisVacuna(ladosis)">
                                                        <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                                    </a>
                                                </div>
    
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="ui-dialog-buttonset">
                        <button ng-if="!ver" ng-disabled="!vacunaDosis.length > 0 && !vacuna.unico" type="submit" class="btn btn-primary">
                            <i class="ace-icon fa fa-floppy-o bigger-110"></i>
                            Guardar
                        </button>
                        <button ng-click="cerrarPopUpVacunaNueva()" type="button" class="btn btn-danger">
                            <i class="ace-icon fa fa-times bigger-110"></i>
                            Cancelar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- fin panel vacuna =========================-->

    <!-- =========== panel historico vacuna  ==================== -->
    <div id="dialog-historial-vacuna" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <h5 class="text-center text-white">HISTORIAL DE VACUNACIÓN</h5>
                <h6 class="text-center text-white">{{paciente.nombre_completo}}</h6>
                <h6 class="text-center text-white">{{vacuna.pacienteVacuna.nombre}}</h6>
            </div>
            <div class="modal-body">
                <div class="row " style="padding-bottom: 12px;">
                    <form class="col-xs-12" novalidate id="formFiltroHistoricoVacuna" name="formFiltroHistoricoVacuna" ng-submit="filtrarHistorialVacunas(filtroVacunas)">
                        <div class="col-xs-12 col-md-12 header">
                            <div class="col-xs-6 col-md-3">
                                <label style="width: 100%;">Desde</label>
                                <input ng-update-hidden type="text" id="fechaInicio-filtro-historico-vacunas-paciente" autocomplete="off" placeholder="" class="form-control date-picker" ng-model="filtroVacunas.inicio">
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label style="width: 100%;">Hasta</label>
                                <input ng-update-hidden id="fechaFinal-filtro-historico-vacunas-paciente" autocomplete="off" type="text" placeholder="" class="form-control date-picker" ng-model="filtroVacunas.fin">
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label style="width: 100%;">Estado</label>
                                <select name="filtroHistoricoGralVacunas" class="form-control" ng-model="filtroVacunas.opcion">
                                    <option value="0" selected>Todas</option>
                                    <option value="2">Retrasada</option>
                                    <option value="1">En fecha</option>
                                    <option value="3">Proyectada</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <button type="submit" class="btn btn-sm btn-primary" style="margin-top: 15px;">
                                    <i class="ace-icon fa fa-search  bigger-160"></i> BUSCAR
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="row">
                    <div style="display: flex; justify-content: space-around;">
                        <span ><i class="fa fa-circle red" aria-hidden="true"></i> Retrasado</span>
                        <span ><i class="fa fa-circle green" aria-hidden="true"></i> En fecha</span>
                        <span ><i class="fa fa-circle blue" aria-hidden="true"></i> Proyectada</span>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table  table-bordered nowrap tabla-vacunas">
                        <thead>
                            <tr>
                                <th class="bolder smaller text-center">VACUNA</th>
                                <th class="bolder smaller text-center">HISTÓRICO</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="min-height: 45px!important; width: 140px; vertical-align: middle;">{{historicoVacuna.nombre}}</td>
                                <td style="min-height: 45px!important; display: flex; flex-wrap: wrap;">
                                    <div ng-repeat="dosis in historicoVacuna.dosis">
                                        <div class="label label-success" style="margin: 3px 3px;" ng-if="(dosis.estado==1 && ( filtroVacunas.opcion == 0 || filtroVacunas.opcion==1))">
                                            <span class="padding: 8px 14px!important;" uib-popover="{{ dosis.comentario}}" popover-trigger="mouseenter">{{dosis.aplicacion ? fechaATexto(dosis.aplicacion) : '' }}</span>
                                        </div>
                                        <div class="label label-danger" style="margin: 3px 3px;" ng-if="(dosis.estado==2 && ( filtroVacunas.opcion == 0 || filtroVacunas.opcion==2))">
                                            <span class="padding: 8px 14px!important;" uib-popover="{{ dosis.comentario}}" popover-trigger="mouseenter">{{dosis.aplicacion ? fechaATexto(dosis.aplicacion) : '' }}</span>
                                        </div>
                                        <div class="label label-info" style="margin: 3px 3px;" ng-if="(dosis.estado==3 && ( filtroVacunas.opcion == 0 || filtroVacunas.opcion==3))">
                                            <span class="padding: 8px 14px!important;">{{dosis.proyeccion ? fechaATexto(dosis.proyeccion) : '' }}</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="pull-right">
                    <button ng-click="cerrarDialogHistorialVacuna()" type="button" class="btn btn-sm btn-danger">
                        <i class="ace-icon fa fa-times bigger-110"></i>
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->

    <!-- =========== panel historico vacuna general ==================== -->
    <div id="dialog-historial-vacuna-general" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <h4 class="smaller white text-center">VACUNAS</h4>
                <h5 class="smaller white text-center">{{paciente.nombre_completo}}</h5>
            </div>
            <div class="modal-body">
                <div class="row"  style="padding: 10px 0px!important;">
                    <form novalidate id="formFiltroHistoricoVacunas" name="formFiltroHistoricoVacunas"
                        ng-submit="filtrarHistorialVacunas(true)">
                        <div class="col-xs-6 col-sm-3">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <label class="col-xs-12">Desde</label>
                                <input ng-update-hidden type="text" id="fechaInicio-filtro-historico-general-vacunas-paciente" autocomplete="off" placeholder="" class="col-xs-12 form-control input-xs date-picker" ng-model="filtroVacunas.inicio">
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-3">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <label class="col-xs-12">Hasta</label>
                                <input ng-update-hidden id="fechafinal-filtro-historico-general-vacunas-paciente" type="text" autocomplete="off" placeholder="" class="col-xs-12 form-control input-xs date-picker" ng-model="filtroVacunas.fin">
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-3">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <label class="col-xs-12">Aplicada</label>
                                <select name="filtroHistoricoGralVacunas" class="form-control" ng-model="filtroVacunas.opcion"
                                    ng-change="filtrarHistorialVacunas(true)">
                                    <option value="0">Todas</option>
                                    <option value="1">En fecha</option>
                                    <option value="2">Retrasada</option>
                                    <option value="3">Proyectada</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-3">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <label class="col-xs-12 text-white"></label>
                                <button type="submit" class="btn btn-sm btn-primary">
                                    <i class="ace-icon fa fa-search  bigger-130"></i>
                                    Buscar
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="row" style="padding: 15px 0px!important; display: flex; justify-content: space-between;">
                    <span ><i class="fa fa-circle red" aria-hidden="true"></i> Retrasado</span>
                    <span ><i class="fa fa-circle green" aria-hidden="true"></i> En fecha</span>
                    <span ><i class="fa fa-circle blue" aria-hidden="true"></i> Proyectada</span>
                </div>
                <div class="table-responsive">
                    <table class="table  table-bordered nowrap tabla-vacunas">
                        <thead>
                            <tr>
                                <th class="bolder smaller text-center">VACUNA</th>
                                <th class="bolder smaller text-center">HISTÓRICO</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="vacunaAplicada in historialVacunas" ng-if="vacunaAplicada.totalAplicados > 0">
                                <td style="min-height: 45px!important; width: 140px; vertical-align: middle;">{{vacunaAplicada.nombre}}</td>
                                <td style="min-height: 45px!important; display: flex; flex-wrap: wrap;">
                                    <div ng-repeat="dosis in vacunaAplicada.dosis">
                                        <div class="label label-success" style="margin: 3px 3px;" ng-if="(dosis.estado==1 && ( filtroVacunas.opcion == 0 || filtroVacunas.opcion==1 ) )">
                                            <span class="padding: 8px 14px!important;" uib-popover="{{ dosis.comentario}}" popover-trigger="mouseenter" >{{dosis.aplicacion ? fechaATexto(dosis.aplicacion) : '' }}</span>
                                        </div>
                                        <div class="label label-danger" style="margin: 3px 3px;" ng-if="(dosis.estado==2 && ( filtroVacunas.opcion == 0 || filtroVacunas.opcion==2 ) )">
                                            <span class="padding: 8px 14px!important;" uib-popover="{{ dosis.comentario}}" popover-trigger="mouseenter" >{{dosis.aplicacion ? fechaATexto(dosis.aplicacion) : '' }}</span>
                                        </div>
                                        <div class="label label-info" style="margin: 3px 3px;" ng-if="(dosis.estado==3 && ( filtroVacunas.opcion == 0 || filtroVacunas.opcion==3 ) )">
                                            <span class="padding: 8px 14px!important;">{{dosis.proyeccion ? fechaATexto(dosis.proyeccion) : '' }}</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="pull-right">
                    <button ng-click="cerrarDialogHistorialVacunaGeneral()" type="button" class="btn btn-sm btn-danger">
                        <i class="ace-icon fa fa-times bigger-110"></i>
                        Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->

    <!-- panel laboratorio============================= -->

    <div id="dialog-laboratorio" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarIdModalDialogLaboratorio()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class='text-center bold text-white text-uppercase'>
                    <i class="ace-icon icono-laboratorio icono-font bigger-110"></i> LABORATORIO
                </h4>
                <h4 class="small text-center bold text-white text-uppercase">{{paciente.nombre_completo}}</h4>
            </div>
        </div>
        <div class="modal-body">
            <div class="row">
               <div class="col-xs-12">
                    <button ng-disabled="!aplicacion.puede_crear" ng-click="abrirIdModalDialogNuevoLaboratorio()" id="id-btn-nuevo-examen" class="btn btn-primary btn-sm">
                        <i class="ace-icon fa fa-plus align-top aling-left bigger-125"></i>Nuevo
                    </button>
                    <button style="margin-left: 4px;" ng-disabled="!aplicacion.puede_crear" ng-click="reportePacienteLaboratorioXlsx(paciente.id)" class="pull-right btn btn-success btn-sm">
                        <i class="fa fa-file-excel-o align-top aling-left bigger-110"></i> Excel
                    </button>
                    <button ng-disabled="!aplicacion.puede_crear" ng-click="reportePacienteLaboratorioPdf(paciente.id)" class="pull-right btn btn-danger btn-sm">
                        <i class="fa fa-file-pdf-o align-top aling-left bigger-110"></i> PDF
                    </button>
                   
               </div>
            </div>
            <div class="space-6" ></div>
            <div class="table-responsive">
                <table id="dynamic-table"
                    class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                    <thead>
                        <tr>
                            <th>Laboratorio</th>
                            <th>Resultado</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="laboratorio in listaLaboratorios">
                            <td>{{laboratorio.nombre}}</td>
                            <td>
                                <div class="action-buttons">
                                    <a href="javascript:void(0)"
                                        ng-click="abrirIdModalDialogLaboratorioExamenes(laboratorio)"
                                        class="blue">
                                        <i class="icono-prerequisito icono-font"></i>
                                    </a>
                                </div>
                            </td>
                            <td>
                                <p ng-if="laboratorio.eliminar">Eliminado</p>
                                <p ng-if="!laboratorio.eliminar">Activo</p>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <a class="blue"
                                        ng-click="abrirIdModalDialogNuevoLaboratorio(laboratorio,true)">
                                        <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                    </a>
                                    <a class="green" e-disabled="!aplicacion.puede_modificar"
                                        ng-click="abrirIdModalDialogNuevoLaboratorio(laboratorio)">
                                        <i class="ace-icon fa fa-pencil bigger-130"></i>
                                    </a>

                                    <a e-disabled="!aplicacion.puede_eliminar" ng-if="!laboratorio.eliminar"
                                        class="red" href="javascript:void(0)"
                                        ng-click="activarLab(true, laboratorio)">
                                        <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                    </a>
                                    <a e-disabled="!aplicacion.puede_eliminar" ng-if="laboratorio.eliminar"
                                        class="blue" href="javascript:void(0)"
                                        ng-click="activarLab(false, laboratorio)">
                                        <i class="ace-icon fa fa-check-circle-o bigger-130"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" ng-click="cerrarIdModalDialogLaboratorio()" class="btn btn-danger btn-sm" data-dismiss="modal">
                <i class="ace-icon fa fa-times"></i>Cancelar
            </button>
        </div>
        
    </div>

    <!-- =========== panel fecha entrega de laboratorios ==================== -->
    <div id="dialog-fecha-entrega" class="modal wizard-posicion">
        <h3 class=" blue titulo-pre-requisito">Exa. preocupacional</h3>
        <div class="row">
            <div class="col-lg-12">
                <label for="form-field-select-1">Fecha entrega</label>
                <input type="text" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <label for="form-field-9">Observaciones</label>
                <textarea class="form-control limited" id="observaciones-entrega-laboratorios-pacientes"
                    maxlength="50"></textarea>
            </div>
        </div>
        <div class="space-6"></div>
    </div>
    <!-- ===== fin panel ============================= -->
    
    <!---================ el modal paciente nuevo ====== -->
    <div id="dialog-paciente-nuevo" class="modal wizard-posicion">
        <div class="modal-dialog modal-paciente-nuevo">
            <div class="modal-content">
                <form name="form" novalidate ng-submit="saveForm(paciente)">
                    <div id="modal-wizard-paciente-container">
                        <div class="modal-header">
                            <ul class="steps">
                                <li data-step="1" class="active">
                                    <span class="step">
                                        <span class="fa fa-user"></span>
                                    </span>
                                    <span class="title">Datos Personales</span>
                                </li>
                                <li data-step="2">
                                    <span class="step">
                                        <span class="fa fa-list-alt"></span>
                                    </span>
                                    <span class="title">Datos Complementarios</span>
                                </li>
                                <li data-step="3">
                                    <span class="step">
                                        <span class="fa fa-wrench"></span>
                                    </span>
                                    <span class="title">Datos Laborales</span>
                                </li>
                                <li data-step="4">
                                    <span class="step">4</span>
                                    <span class="title">Finalizacion</span>
                                </li>
                            </ul>
                        </div>

                        <div class="modal-body step-content">
                            <div class="step-pane active" data-step="1">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label class="control-label  col-sm-5 no-padding-right">Foto</label>
                                            <div class="col-sm-7">
                                                <label class="ace-file-input ace-file-multiple">
                                                    <img ng-if="paciente.id" ng-src="{{paciente.persona.imagen}}"
                                                        width="100" heigth=100>
                                                    <input type="file" id="imagen-persona"
                                                        onchange="uploadImage(this,'imagen-persona-oculto')" />
                                                    <input id="imagen-persona-oculto" ng-model="paciente.persona.imagen"
                                                        name="imagen" type="hidden" ng-update-hidden>

                                                </label>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="paterno">Apellido Paterno</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required type="text" id="apellido_paterno"
                                                    ng-model="paciente.persona.apellido_paterno"
                                                    placeholder="Apellido Paterno" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="materno">Apellido Materno</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required type="text" id="apellido_materno"
                                                    ng-model="paciente.persona.apellido_materno"
                                                    placeholder="Apellido Materno" class="form-control" />
                                            </div>

                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="nombres">Nombres</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required type="text" id="nombres"
                                                    ng-model="paciente.persona.nombres" placeholder="Nombres"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="ci">C.I.</label>
                                            </div>
                                            <div class="col-lg-7">

                                                <input required type="text" id="ci" ng-model="paciente.persona.ci"
                                                    placeholder="C.I" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="extension">Extensión</label>
                                            </div>
                                            <div class="input-group col-lg-7">
                                                <span
                                                    class="input-group-addon glyphicon glyphicon-pencil point-edit green"
                                                    aria-hidden="true"
                                                    ng-click="abrirDialogConceptoEdicion(expeditos)"></span>
                                                <select class="form-control" required
                                                    ng-options="expedido as expedido.nombre_corto for expedido in expeditos.clases | filter:{habilitado:true} track by expedido.id"
                                                    ng-model="paciente.extension"></select>
                                            </div>
                                        </div>


                                    </div>

                                </div>


                            </div>

                            <div class="step-pane" data-step="2">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label no-padding-right" for="codigo">Código
                                            </label>

                                            <div class="col-sm-7">
                                                <input required type="text" id="codigo_cuenta"
                                                    ng-model="paciente.codigo" placeholder="Codigo"
                                                    class="col-xs-10 col-sm-5"
                                                    ng-change="validarCodigoCuentaEmpleado(paciente.codigo)" />
                                                <br>
                                                <p ng-class="{'text-red':data.type,'text-green':!data.type}">
                                                    {{data.message}}</p>
                                            </div>
                                        </div>
                                        <!--  <div class="row form-group">
                                                <div class="col-lg-5">
                                                    <label for="codigo">Codigo</label>
                                                </div>
                                                <div class="col-lg-7">
                                                    <input required type="text" id="codigo" ng-model="paciente.codigo" placeholder="Codigo" class="form-control" />
                                                </div>
                                            </div> -->
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="sanguineo">Grupo Sanguíneo</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input required type="text" id="grupo_sanguineo"
                                                    ng-model="paciente.grupo_sanguineo" placeholder="Grupo Sanguíneo"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="edad">Fecha de Nacimiento</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input name="fecha" required ng-update-hidden
                                                    class="form-control date-picker" type="text"
                                                    data-date-format="dd/mm/yyyy" id="fecha"
                                                    ng-model="paciente.fecha_nacimiento_texto"
                                                    placeholder="Ingrese la fecha" />
                                            </div>

                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="sexo">Genero</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <select required style="width:250px" name="genero_paciente"
                                                    id="genero_paciente" ng-model="paciente.persona.genero"
                                                    ng-options="genero as genero.nombre for genero in generos track by genero.id"></select>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="telefono">Telefonos</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input type="text" id="telefono" ng-model="paciente.persona.telefono"
                                                    placeholder="Telefonos" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="movil">Celular</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input type="text" id="telefono_movil"
                                                    ng-model="paciente.persona.telefono_movil" placeholder="Celular"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="step-pane" data-step="3">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="empresa">Empresa</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input type="text" id="designacion_empresa"
                                                    ng-model="paciente.designacion_empresa" placeholder="Empresa"
                                                    class="form-control" ng-disabled="paciente.es_empleado" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="campo">Campo</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <select required id="campo-rol" name="centroDeCostos"
                                                    ng-options="centroCosto as centroCosto.nombre for centroCosto in centrosDeCostos | filter:{habilitado:true} track by centroCosto.id"
                                                    ng-model="paciente.campo" ng-disabled="paciente.es_empleado">
                                                    <option value="">--selecionar--</option>
                                                </select>
                                            </div>

                                        </div>
                                        <!--   <div class="row form-group">
                                                <div class="col-lg-5">
                                                    <label for="cargo">Cargo</label>
                                                </div>
                                                <div class="col-lg-7"> -->
                                        <!-- <div isteven-multi-select input-model="myArray" output-model="paciente.cargos" button-label="icon nombre" item-label="icon nombre maker"
                                                    tick-property="ticked" translation="localLang">
                                                </div> -->
                                        <!--   <div isteven-multi-select input-model="cargos" output-model="paciente.cargos" button-label="icon nombre" item-label="icon nombre maker" tick-property="ticked" >
                                                    </div>                                                  
                                                </div>
                                            </div> -->

                                    </div>
                                </div>
                            </div>
                            <div class="step-pane" data-step="4">
                                <div class="center">
                                    <h4 class="blue">Finalización</h4>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="modal-footer wizard-actions">

                        <button class="btn btn-sm btn-prev">
                            <i class="ace-icon fa fa-arrow-left"></i>
                            Anterior
                        </button>

                        <button type="submit" ng-disabled="data.message=='¡el codigo ya Exsiste!'" id="siguiente"
                            class="btn btn-success btn-sm btn-next" data-last="Finish">
                            Siguiente
                            <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                        </button>

                        <button class="btn btn-danger btn-sm pull-left" data-dismiss="modal"
                            ng-click="cerrarPopupPacienteNuevo()">
                            <i class="ace-icon fa fa-times"></i>
                            Cancelar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- PAGE CONTENT ENDS -->

    <div id="dialog-paciente-vista" class="modal wizard-posicion">
        <div class="modal-dialog">
            <div class="modal-content">
                <form name="form" ng-submit="finVerPaciente()" novalidate>
                    <div id="modal-wizard-container-paciente-vista">
                        <div class="modal-header">
                            <ul class="steps">
                                <li data-step="1" class="active">
                                    <span class="step">
                                        <span class="fa fa-user"></span>
                                    </span>
                                    <span class="title">Datos Personales</span>
                                </li>
                                <li data-step="2">
                                    <span class="step">
                                        <span class="fa fa-list-alt"></span>
                                    </span>
                                    <span class="title">Datos Complementarios</span>
                                </li>
                                <li data-step="3">
                                    <span class="step">
                                        <span class="fa fa-wrench"></span>
                                    </span>
                                    <span class="title">Datos Laborales</span>
                                </li>
                                <li data-step="4">
                                    <span class="step">4</span>
                                    <span class="title">Finalizar</span>
                                </li>
                            </ul>
                        </div>

                        <div class="modal-body step-content">
                            <div class="step-pane active" data-step="1">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label class="control-label  col-sm-5 no-padding-right">Foto</label>
                                            <div class="col-sm-7">
                                                <label class="ace-file-input ace-file-multiple">
                                                    <img ng-if="paciente.id" ng-src="{{paciente.persona.imagen}}"
                                                        width="100">
                                                    <input disabled type="file" id="imagen-persona-disabled"
                                                        onchange="uploadImage(this,'imagen-persona-oculto')" />
                                                    <input disabled id="imagen-persona-oculto-disabled"
                                                        ng-model="paciente.persona.imagen" name="imagen" type="hidden"
                                                        ng-update-hidden>

                                                </label>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="paterno">Apellido Paterno</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="apellido_paterno-disabled"
                                                    ng-model="paciente.persona.apellido_paterno"
                                                    placeholder="Apellido Paterno" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="materno">Apellido Materno</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="apellido_materno-disabled"
                                                    ng-model="paciente.persona.apellido_materno"
                                                    placeholder="Apellido Materno" class="form-control" />
                                            </div>

                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="nombres">Nombres</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="nombres-disabled"
                                                    ng-model="paciente.persona.nombres" placeholder="Nombres"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="ci">C.I.</label>
                                            </div>
                                            <div class="col-lg-7">

                                                <input disabled type="text" id="ci-disabled"
                                                    ng-model="paciente.persona.ci" placeholder="C.I"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="extension">Extensión</label>
                                            </div>
                                            <div class="input-group- col-lg-7">
                                                <span
                                                    class="input-group-addon glyphicon glyphicon-pencil point-edit green"
                                                    aria-hidden="true"
                                                    ng-click="abrirDialogConceptoEdicion(expeditos)"></span>
                                                <select class="form-control" required
                                                    ng-options="expedido as expedido.nombre_corto for expedido in expeditos.clases | filter:{habilitado:true} track by expedido.id"
                                                    ng-model="paciente.extension"></select>
                                            </div>
                                        </div>


                                    </div>

                                </div>


                            </div>

                            <div class="step-pane" data-step="2">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="codigo">Codigo</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="codigo-disabled"
                                                    ng-model="paciente.codigo" placeholder="Codigo"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="sanguineo">Grupo Sanguíneo</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="grupo_sanguineo-disabled"
                                                    ng-model="paciente.grupo_sanguineo" placeholder="Grupo Sanguíneo"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="edad">Fecha de Nacimiento</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled name="fecha" required ng-update-hidden
                                                    class="form-control date-picker" type="text"
                                                    data-date-format="dd/mm/yyyy" id="fecha-disabled"
                                                    ng-model="paciente.fecha_nacimiento_texto"
                                                    placeholder="Ingrese la fecha" />
                                            </div>

                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="sexo">Genero</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <select disabled required style="width:250px"
                                                    ng-options="genero as genero.nombre for genero in generos track by genero.id"
                                                    ng-model="paciente.persona.genero"></select>
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="telefono">Telefonos</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="telefono-disabled"
                                                    ng-model="paciente.persona.telefono" placeholder="Telefonos"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="movil">Celular</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="telefono_movil-disabled"
                                                    ng-model="paciente.persona.telefono_movil" placeholder="Celular"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="step-pane" data-step="3">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="empresa">Empresa</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <input disabled type="text" id="designacion_empresa-disabled"
                                                    ng-model="paciente.designacion_empresa" placeholder="Empresa"
                                                    class="form-control" />
                                            </div>
                                        </div>
                                        <div class="row form-group">
                                            <div class="col-lg-5">
                                                <label for="campo">Campo</label>
                                            </div>
                                            <div class="col-lg-7">
                                                <select disabled required id="campo-rol-disabled" name="centroDeCostos"
                                                    ng-options="centroCosto as centroCosto.nombre for centroCosto in centrosDeCostos | filter:{habilitado:true} track by centroCosto.id"
                                                    ng-model="paciente.campo">
                                                    <option value="">--selecionar--</option>
                                                </select>
                                            </div>

                                        </div>
                                        <!-- <div class="row form-group">
                                                <div class="col-lg-5">
                                                    <label for="cargo">Cargo</label>
                                                </div>
                                                <div class="col-lg-7">
                                                    <input disabled type="text" id="cargo" ng-model="paciente.cargo" placeholder="Cargo" class="form-control" />
                                                </div>
                                            </div> -->

                                    </div>
                                </div>
                            </div>
                            <div class="step-pane" data-step="4">
                                <div class="center">
                                    <h4 class="blue">Finalización</h4>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="modal-footer wizard-actions">

                        <button class="btn btn-sm btn-prev">
                            <i class="ace-icon fa fa-arrow-left"></i>
                            Anterior
                        </button>

                        <button type="submit" id="siguiente-v" class="btn btn-success btn-sm btn-next"
                            data-last="Finish">
                            Siguiente
                            <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                        </button>

                        <button class="btn btn-danger btn-sm pull-left" data-dismiss="modal"
                            ng-click="cerrarPopPupVista()">
                            <i class="ace-icon fa fa-times"></i>
                            Cancelar
                        </button>
                    </div>
                </form>
            </div>

        </div>
    </div>
    


    <!-- =========== panel Graficos C.V. ==================== -->
    <div id="dialog-grafico" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarIdModalGraficoSV()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="text-center text-white">REPORTE DE SIGNOS VITALES</h4>
                <h4 class="text-center text-white small">{{paciente.nombre_completo}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-2">
                        <table class="table table-striped table-bordered table-hover dataTable no-footer">
                            <thead>
                                <tr>
                                    <th>Signo Vital</th>
                                    <th>
                                        <label>
                                            <input ng-model="selectedAll" ng-click="checkAll($event)"
                                                class="ace ace-switch ace-switch-4" type="checkbox">
                                            <span class="lbl check-descuento">Todos</span>
                                        </label>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="sv in DatosSV">
                                    <td>{{sv.name}}</td>
                                    <td>
                                        <label>
                                            <input ng-model="sv.selected" value="{{sv.name}}"
                                                ng-checked="selection.indexOf(sv.name) > -1" ng-click="toggleSelection(sv)"
                                                class="ace ace-switch ace-switch-4  " type="checkbox" data-column="1">
                                            <span class="lbl check-descuento"></span>
                                        </label>
        
                                    </td>
                                </tr>
        
                            </tbody>
                        </table>
                    </div>
                    <div class="col-lg-10">
                        <div id="chartContainer" style="max-height:auto; min-height: 400px;  width: 100%;overflow-y:auto;position:relative"></div>
                        <div class="my-wrapper" ng-if="selection.length>0">
                            <div class="scrollSV">
                                <table class="table table-striped table-bordered tabla-signoVital">
                                    <thead>
                                        <th class="">Signo Vital</th>
                                        <th ng-repeat="l in fechasLabel">{{l}}</th>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="d in selection">
                                            <td class="">{{d.name}}</td>
                                            <td ng-repeat="p in d.dataPoints">{{p.y}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" ng-click="cerrarIdModalGraficoSV()" class="btn btn-danger btn-sm" data-dismiss="modal">
                    <i class="ace-icon fa fa-times"></i>Cerrar
                </button>
            </div>
        </div>



    </div>
    <!-- ===== fin grafico ============================= -->

    <!-- =========== panel patologias ==================== -->
    <div id="dialog-patologias" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary" >
                <button ng-click="cerrarDialogDialogPatologias()" type="button" class="ui-dialog-titlebar-close"></button>
                <h4 class="smaller text-center text-white">
                    <i class="ace-icon icono-patologia icono-font"></i> PATOLOGIAS
                </h4>
                <h4 class="text-white text-center small">{{paciente.nombre_completo}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="cabezera-ficha">
                            <h4 class="blue">
                                1. Antecedentes de enfermedades
                            </h4>
                        </div>
                        <div class="">
                            <div class=" row form-group">
                                <div class="col-lg-2">
                                    <label for="">Usted se ha enfermado de:</label>
                                </div>
                                <div class="col-lg-3">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_hipertension"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Hipertension</span>
                                    </label>
                                </div>
                                <div class="col-lg-2">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_diabetes"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Diabetes</span>
                                    </label>
                                </div>
                                <div class="col-lg-3">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_epilepsia"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Epilepsia</span>
                                    </label>
                                </div>
                                <div class="col-lg-2">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_asma"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Asma</span>
                                    </label>
                                </div>
                            </div>
                            <div class=" row form-group">
                                <div class="col-lg-2"></div>
                                <div class="col-lg-3">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_cardilogia"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Cardiologia</span>
                                    </label>
                                </div>
                                <div class="col-lg-2">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_digestiva"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Digestivas</span>
                                    </label>
                                </div>
                                <div class="col-lg-3">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_chagas"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Chagas</span>
                                    </label>
                                </div>
                                <div class="col-lg-2">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_hepatitis"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Hepatitis</span>
                                    </label>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-lg-2">
                                </div>
                                <div class="col-lg-3">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_lumbalgia"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Lumbalgias</span>
                                    </label>
                                </div>
                                <div class="col-lg-3">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.enfermedad_otros"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Otras enfermedades</span>
                                    </label>
                                </div>
                                <div class="col-lg-4">
        
                                </div>
        
                            </div>
                            <div class=" row form-group" ng-if="ficha.enfermedad_otros">
                                <div class="col-lg-12">
                                    <label for="">Detalle de la enfermedad / tratamiento /medicamento / resultado</label>
                                    <textarea rows="5" ng-model="ficha.enfermedad_comentario" class="form-control"
                                        id="comentario-enfermedad-paciente" placeholder=""></textarea>
                                </div>
                            </div>
        
                            <div class=" row form-group">
                                <div class="col-lg-12">
                                    <h4 class="blue">
                                        2. Antecedentes de Quirurgicos
                                    </h4>
                                </div>
                                <div class="col-lg-3">
                                    <label for="">Ustede ha sido operado: </label>
                                </div>
                                <div class="col-lg-6">
                                    <label>
                                        <input name="switch-field-1" ng-model="ficha.quirurgico_operado"
                                            class="ace ace-switch ace-switch-5" type="checkbox">
                                        <span class="lbl check-descuento">Operado</span>
                                    </label>
                                    <div ng-if="ficha.quirurgico_operado">
                                        <label>Algún Comentario</label>
                                        <textarea rows="3" ng-if="ficha.quirurgico_operado" class="form-control"
                                            id="antecedentes-operado-bool" ng-model="ficha.quirurgico_comentario"
                                            placeholder=""></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button ng-disabled="!aplicacion.puede_crear" type="button" ng-click="guardarPatoliga()"
                    class="btn btn-primary btn-sm " data-dismiss="modal">
                    <i class="ace-icon fa fa-floppy-o"></i>
                    guardar
                </button>
                <button type="button" ng-click="cerrarDialogDialogPatologias()" class="btn btn-danger btn-sm "
                    data-dismiss="modal">
                    <i class="ace-icon fa fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->

    <!-- =========== panel editar comentario ==================== -->
    <div id="dialog-editar-comentario" class="modal wizard-posicion">
        <!-- TOPBAR -->
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-1" class="ui-dialog-title">
                <div>
                    <h4 class="smaller">
                        <i class="ace-icon fa fa-comment"></i>
                        <label>Comentario
                        </label>
                    </h4>
                </div>
            </span>
            <button type="button" ng-click="cerrarDialogDialogComentario()" class="ui-dialog-titlebar-close">
            </button>
        </div>
        <!-- TOPBAR -->
        <div class="container-fluid">
            <div class="row">
                <h4 class="blue titulo-pre-requisito">{{paciente.nombre_completo}}</h4>
            </div>
            <!-- <div class="row">
                    <h4 class="blue titulo-pre-requisito">{{paciente.cargo}}</h4>
                </div>
                <div class="row">
                    <h4 class="blue titulo-pre-requisito">{{paciente.designacion_empresa}}</h4>
                </div> -->
        </div>
        <form name="form" ng-submit="saveComment(paciente)" novalidate>
            <div class="row">
                <div class="col-lg-12">
                    <label for="form-field-select-1">Comentario</label>
                    <textarea required="" ng-model="paciente.comentario"
                        class="form-control limited ng-pristine ng-empty ng-invalid ng-invalid-required ng-valid-maxlength ng-touched"
                        id="comentario-paciente" maxlength="100" style=" height: 90px;">
                    </textarea>
                </div>

            </div>
            <div class="space-6"></div>
            <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                <div class="ui-dialog-buttonset">

                    <button ng-disabled="!aplicacion.puede_crear" type="submit" id="guardarComentarioPaciente"
                        class="btn btn-primary" data-last="Finish">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>
                        Guardar
                    </button>

                    <button type="button" ng-click="cerrarDialogDialogComentario()" class="btn btn-danger"
                        data-dismiss="modal">
                        <i class="ace-icon fa fa-times"></i>
                        Cancelar
                    </button>
                </div>
            </div>
        </form>

    </div>
    <!-- ===== fin panel ============================= -->

    <!-- =========== panel Preview historico ==================== -->
    <div class="container">
        <div id="dialog-previewHistorico" class="modal wizard-posicion">
            <h3 class=" blue titulo-pre-requisito">11/9/2017</h3>
            <div class="row">
                <div class="table-responsive">
                    <table id="dynamic-table"
                        class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>HEMATOLOGIA SANGUINEA</th>
                                <th>Resultado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>HEMATOCRITO</td>
                                <td>
                                    34
                                </td>
                            </tr>
                            <tr>
                                <td>HEMOGLOBINA</td>
                                <td>
                                    56
                                </td>
                            </tr>
                            <tr>
                                <td>GLOBULOS ROJOS</td>
                                <td>
                                    65
                                </td>
                            </tr>
                            <tr>
                                <td>GLOBULOS BLANCOS</td>
                                <td>
                                    12
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="space-6"></div>
        </div>
    </div>

    <!-- ===== fin panel ============================= -->

    <!-- =========== panel historico resultados ==================== -->
    <div id="dialog-historico-resultado" class="modal">
        <div class="modal-content">
            <div>
                <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
                    <span id="ui-id-9" class="ui-dialog-title">
                        <div>
                            <h4 class="smaller red">
                                <i class="ace-icon fa fa-h-square bigger-110 "></i>
                                <label>{{paciente.nombre_completo}}</label>
                            </h4>
                        </div>
                    </span>
                    <button ng-click="cerrarIdModalDialogLaboratorioExamenesHistoricoResultados()" type="button"
                        class="ui-dialog-titlebar-close"></button>
                </div>
            </div>
            <br>
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover nowrap dataTable no-foot">
                    <thead>
                        <tr>
                            <th>
                                Desde
                            </th>
                            <th>
                                Hasta
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <input required="" size="15" ng-update-hidden=""
                                    class="form-control date-picker"
                                    type="text" data-date-format="dd/mm/yyyy" id="fechainicioResultados"
                                    ng-model="filtro.inicio" placeholder="Fecha inicial">

                            </td>
                            <td>
                                <input required="" size="15" ng-update-hidden=""
                                    class="form-control date-picker"
                                    type="text" data-date-format="dd/mm/yyyy" id="fechafinResuldados"
                                    ng-model="filtro.fin" placeholder="Fecha limite">

                            </td>
                            <td>
                                <button type="submit" ng-click="ObtenerHistorialLaboratorioExamenes(filtro)"
                                    class="btn btn-primary" style="margin-top: 15px;">
                                    <i class="ace-icon fa fa-search  align-top bigger-125"></i>
                                    Filtrar
                                </button>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br>
            <div>
                <div class="table-responsive">
                    <table id="dynamic-table"
                        class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>Laboratorio</th>
                                <th>Fecha</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="historialLaboratorio in listaHistorialLaboratorioExamenes" ng-click>

                                <td>{{historialLaboratorio.laboratorio.nombre }}</td>
                                <td>{{historialLaboratorio.fecha | date:"dd/MM/yyyy" }}</td>
                                <td>
                                    <div class="hidden-sm hidden-xs action-buttons">
                                        <!--  <a class="blue" ng-click="abrirDialogVerResultadosLab(historialLaboratorio)" id="id-previewHistorico">
                                                <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                            </a>
                                            <a class="btn btn-primary elo" data-toggle="popover" data-placement="right" cust-popover popover-html="Some Poppy Text"  popover-placement="bottom" myId="#myId" newvar="historialLaboratorio.laboratorioResultados" popover-label="Label">
                                                <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                            </a> -->
                                        <a class="blue" cust-popover popover-html="Some Poppy Text"
                                            popover-placement="bottom" myId="#myId"
                                            newvar="historialLaboratorio.laboratorioResultados" popover-label="Label">

                                        </a>
                                        <a class="red" href="javascript:void(0)" ng-click="editarResultadoLaboratorio(historialLaboratorio.laboratorioResultados)">
                                            <i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
                                        </a>
                                        <a class="red" href="javascript:void(0)" ng-click="eliminarResultadoLaboratorio(historialLaboratorio.laboratorioResultados, historialLaboratorio)">
                                            <i class="ace-icon fa fa-trash bigger-130"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="space-6"></div>

            <div class="col-lg-12 ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                <div class="ui-dialog-buttonset">
                    <!-- <button ng-click="reportePorLaboratorioPacienteXlsx(paciente.id,listaHistorialLaboratorioExamenes[0].laboratorio.id)" type="button" class="btn btn-success">
                        <i class="ace-icon fa fa-print  bigger-110"></i>&nbsp; Excel</button> -->
                    <button ng-click="reportePorLaboratorioPacientePdf(paciente.id,listaHistorialLaboratorioExamenes[0].laboratorio.id)" type="button" class="pull-left btn btn-sm btn-danger">
                        <i class="ace-icon fa fa-pdf-o bigger-110"></i>&nbsp; Pdf</button>
                    <button ng-click="cerrarIdModalDialogLaboratorioExamenesHistoricoResultados()" type="button" class="btn btn-sm btn-danger">
                            <i class="ace-icon fa fa-times bigger-110"></i>&nbsp; Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== fin panel ============================= -->
    <!-- =========== panel historico resultados  diag ==================== -->
    <div id="dialog-historico-resultado-diag" class="modal wizard-posicion">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarIdModalDialogDiagnosticoExamenesHistoricoResultados()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="smaller white">
                    <i class="ace-icon fa fa-h-square bigger-110 "></i>
                    <label>{{paciente.nombre_completo}}</label>
                </h4>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>
                                    Desde
                                </th>
                                <th>
                                    Hasta
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <input size="15" ng-update-hidden=""
                                        class="form-control date-picker"
                                        type="text" data-date-format="dd/mm/yyyy" id="fechainicio-historico-resultados"
                                        ng-model="filtro.inicio" placeholder="Fecha inicial">
                                </td>
                                <td>
                                    <input size="15" ng-update-hidden=""
                                        class="form-control date-picker"
                                        type="text" data-date-format="dd/mm/yyyy" id="fechafin-historico-resultados"
                                        ng-model="filtro.fin" placeholder="Fecha limite">
                                </td>
                                <td>
                                    <button type="submit" ng-click="ObtenerHistorialDiagnosticoExamenes(filtro)"
                                        class="btn btn-primary btn-sm" >
                                        <i class="ace-icon fa fa-search  align-top bigger-110"></i>
                                        Filtrar
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="space-6"></div>
                <div class="table-responsive">
                    <table id="dynamic-table"
                        class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>Laboratorio</th>
                                <th>Fecha</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="historialDiagnostico in listaHistorialDiagnosticoExamenes">

                                <td>{{historialDiagnostico.diagnostico.nombre }}</td>
                                <td>{{historialDiagnostico.fecha | date:"dd/MM/yyyy" }}</td>
                                <td>
                                    <div class="action-buttons">
                                        <a class="blue ng-isolate-scope" href="javascript:void(0)" cust-popover="" popover-html="Some Poppy Text"
                                            popover-placement="left" myid="#myId"
                                            newvar="historialDiagnostico.diagnosticoResultados" popover-label="Label"
                                            data-original-title="" title="">
                                            <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                        </a>
                                        <a class="red" href="javascript:void(0)" ng-click="eliminarHistoricoPaciente(historialDiagnostico.id, 3)">
                                                <i class="ace-icon fa fa-trash bigger-130"></i>
                                            </a>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button ng-disabled="!aplicacion.puede_crear" ng-click="reportePorDiagnosticoPacientePdf(paciente.id, diagnostico.id)" class="pull-left btn btn-danger btn-sm">
                    <i class="fa fa-file-pdf-o align-top aling-left bigger-110"></i> PDF
                </button>
                <button ng-click="cerrarIdModalDialogDiagnosticoExamenesHistoricoResultados()" type="button" class="pull-right btn btn-danger btn-sm">
                    <i class="ace-icon fa fa-times bigger-110"></i>&nbsp; Salir</button>
            </div>
        </div>
    </div>

    <!-- ===== fin panel ============================= -->

    <!-- =========== panel nuevo examen ==================== -->
    <div id="dialog-nuevo-examen" class="modal wizar-posicion">
        <!-- topbar -->
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-6" class="ui-dialog-title">
                <div>
                    <h4 class="smaller green">
                        <i class="ace-icon icono-laboratorio icono-font "></i>
                        <label>NUEVO EXAMEN</label>
                    </h4>
                </div>
            </span>
            <button ng-click="cerrarPopUpExamenLaboratorio()" type="button" class="ui-dialog-titlebar-close"></button>
        </div>
        <!-- topbar -->
        <br>
        <div class="">
            <form>
                <div class="row">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Nombre</label>
                        <input type="text" class="form-control">
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Examen de Lab.</label>
                        <input type="text" class="form-control">
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Unidad</label>
                        <input type="text" class="form-control">
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <label for="form-field-9">Observaciones</label>
                        <textarea class="form-control limited" id="observaciones-nuevo-examen"
                            maxlength="50"></textarea>
                    </div>
                </div>
                <div class="space-6"></div>
                <div class="row">
                    <div class="modal-footer wizard-actions">
                        <button type="button" class="btn btn-primary" ng-click="cerrarPopUpExamenLaboratorio()"
                            id="guardarRequisitos" data-last="Finish">
                            <i class="ace-icon fa fa-floppy-o bigger-110"></i>
                            Guardar
                        </button>

                        <button type="button" ng-click="cerrarPopUpExamenLaboratorio()" class="btn btn-danger"
                            data-dismiss="modal">
                            <i class="ace-icon fa fa-times"></i>
                            Cancelar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->

    <!-- =========== panel resultado examenes ==================== -->

    <!-- =========== panel examenes ==================== -->
    <div id="dialog-ver-resultados-Examen" class="modal wizard-content">
        <!-- topbar -->
        <div class=" ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-5" class="ui-dialog-title">
                <h4 class="smaller green">
                    <i class="ace-icon icono-laboratorio icono-font"></i>
                    <label>Laboratorio {{laboratorio.nombre}}</label>
                </h4>
            </span>
            <button ng-click="cerrarDialogVerResultadosLab()" type="button" class="ui-dialog-titlebar-close"></button>

        </div>
        <!-- topbar -->
        <form name="formResult" ng-submit="guardarLaboratorioExamenResultados(formResult,fechaResultado)" novalidate>
            <div>
                <div class="col-lg-12">
                    <table id="dynamic-table"
                        class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>Examenes</th>
                                <th>Resultado</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="examen in Hostorialexamenes">
                                <td>{{examen.laboratorioExamen.examen}}</td>
                                <td>{{examen.resultado}}</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>

            <div class="space-6"></div>
            <div class="col-lg-12">
                <div class="modal-footer wizard-actions">
                    <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal"
                        ng-click="cerrarDialogVerResultadosLab()">
                        <i class="ace-icon fa fa-times"></i>Cancelar
                    </button>
                </div>
            </div>
        </form>
    </div>
    <!-- ===== fin panel ============================= -->
    <!-- =========== panel examenes ==================== -->
    <div id="dialog-examenes" class="modal wizard-content" style="overflow-x: hidden;">
        <!-- topbar -->
        <div class=" ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-5" class="ui-dialog-title">
                <h4 class="smaller green">
                    <i class="ace-icon icono-laboratorio icono-font"></i>
                    <label>Laboratorio {{laboratorio.nombre}}</label>
                </h4>
            </span>
            <button ng-click="cerrarIdModalDialogLaboratorioExamenes()" type="button"
                class="ui-dialog-titlebar-close"></button>

        </div>
        <!-- topbar -->
        <form name="formResult" ng-submit="formResult.$valid && guardarLaboratorioExamenResultados(formResult,fechaResultado)">
            <div class="row" style="margin: 6px 0px;">
                <div class="col-xs-12 col-sm-6">
                    <button ng-disabled="!aplicacion.puede_crear" type="button"
                        ng-click="abrirIdModalDialogLaboratorioExamenesNuevoResultado()" id="id-btn-nuevo-examen"
                        class="btn btn-primary btn-sm">
                        <i class="ace-icon fa fa-plus align-top bigger-125"></i> Nuevo</button>

                </div>
                <div class="col-xs-12 col-sm-6 right">
                    <label class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> Fecha:</label>
                    <input required size="15" name="fecha" ng-update-hidden=""
                        class="form-control input-sm date-picker col-xs-12 col-sm-6 col-md-6 col-lg-6"
                        type="text" data-date-format="dd/mm/yyyy" id="fecha-inicial-examen-resultado"
                        ng-model="fechaResultado" placeholder="Fecha inicial">
                    <div ng-show="formResult.fecha.$error.required" class="invalid-message help-block"
                        ng-messages="formResult.fecha.$error"
                        ng-if="formResult.fecha.$touched || (formResult.$submitted && formResult.fecha.$invalid)">
                        <div ng-messages-include="/templates/gral/messages.html"></div>
                    </div>
                </div>
            </div>
            <div>
                <div class="col-lg-12">
                    <table id="tabla-de-laboratorios" style="overflow-x: auto;" class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                        <thead>
                            <tr>
                                <th>Examenes</th>
                                <th>Ultimo Resultado</th>
                                <th>Resultado Actual</th>
                                <th>Unidad</th>
                                <th>Rango Ref.</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="examen in listaLaboratorioExamenes">
                                <td>{{examen.examen}}</td>
                                <td>{{examen.ultimo_resultado}}</td>
                                <td>
                                    <input autofocus type="text" ng-model="examen.resultado" required class="form-control">
                                </td>
                                <td>{{examen.unidad}}</td>
                                <td>{{ examen.maximo && examen.minimo ? examen.minimo +" min. - "+ examen.maximo+" max." :  "" }}
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <a class="blue"
                                            ng-click="abrirIdModalDialogLaboratorioExamenesNuevoResultado(examen,true)">
                                            <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                        </a>
                                        <a class="green" e-disabled="!aplicacion.puede_modificar"
                                            ng-click="abrirIdModalDialogLaboratorioExamenesNuevoResultado(examen)">
                                            <i class="ace-icon fa fa-pencil bigger-130"></i>
                                        </a>
                                        <a class="red" e-disabled="!aplicacion.puede_eliminar"
                                            ng-click="EliminarNuevoLaboratorioExamen(examen)">
                                            <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                        </a>
                                    </div>

                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>

            <div class="space-6"></div>
            <div class="col-lg-12">
                <div class="modal-footer wizard-actions">
                    <button ng-click="abrirIdModalDialogLaboratorioExamenesHistoricoResultados()" type="button"
                        class="btn btn-white  btn-bold btn-danger" id="id-btn-historicoExamenResultado">
                        <i class="ace-icon fa fa-h-square bigger-110"></i>&nbsp; Historico</button>
                    <button ng-disabled="!aplicacion.puede_modificar" type="submit" class="btn btn-primary btn-sm ">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal"
                        ng-click="cerrarIdModalDialogLaboratorioExamenes()">
                        <i class="ace-icon fa fa-times"></i>Cancelar
                    </button>
                </div>
            </div>
        </form>
    </div>
    <!-- ===== fin panel ============================= -->

    <!-- =========== panel nuevo Laboratorio ==================== -->
    <div id="dialog-nuevo-laboratorio" class="modal wizard-posicion">
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-7" class="ui-dialog-title">
                <div>
                    <h4 class="smaller green">
                        <i class="ace-icon icono-laboratorio icono-font "></i>
                        <label>Nuevo Laboratorio</label>
                    </h4>
                </div>
            </span>
            <button ng-click="cerrarIdModalDialogNuevoLaboratorio()" type="button"
                class="ui-dialog-titlebar-close"></button>
        </div>
        <div class="">
            <form name="fromNuevoLab" ng-submit="guardarNuevoLaboratorio(fromNuevoLab)" novalidate>
                <div>
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Nombre</label>
                        <input ng-disabled="laboratorio.soloVista" required name="nombre" ng-model="laboratorio.nombre"
                            type="text" class="form-control">
                        <div ng-show="fromNuevoLab.nombre.$error.required" class="invalid-message help-block"
                            ng-messages="fromNuevoLab.nombre.$error"
                            ng-if="fromNuevoLab.nombre.$touched || (fromNuevoLab.$submitted && fromNuevoLab.nombre.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="col-lg-12">
                        <label for="form-field-select-1">descripcion</label>
                        <input ng-disabled="laboratorio.soloVista" name="descripcion" ng-model="laboratorio.descripcion"
                            type="text" class="form-control">
                        <!-- <div ng-show="fromNuevoLab.descripcion.$error.required" class="invalid-message help-block"
                            ng-messages="fromNuevoLab.descripcion.$error"
                            ng-if="fromNuevoLab.descripcion.$touched || (fromNuevoLab.$submitted && fromNuevoLab.descripcion.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div> -->
                    </div>

                </div>

                <div class="space-6"></div>
                <div class="col-lg-12 modal-footer wizard-actions">
                    <button ng-if="!laboratorio.soloVista" type="submit" class="btn btn-primary">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal"
                        ng-click="cerrarIdModalDialogNuevoLaboratorio()">
                        <i class="ace-icon fa fa-times"></i>
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- =========== panel nuevo resultado ==================== -->
    <div id="dialog-nuevo-resultado" class="modal wizard-posicion" style="overflow-x: hidden;">
        <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-7" class="ui-dialog-title">
                <div>
                    <h4 class="smaller green">
                        <i class="ace-icon icono-laboratorio icono-font "></i>
                        <label>{{paciente.examen.nombre}}</label>
                    </h4>
                </div>
            </span>
            <button ng-click="cerrarIdModalDialogLaboratorioExamenesNuevoResultado()" type="button"
                class="ui-dialog-titlebar-close"></button>
        </div>
        <div class="">
            <form ng-submit="guardarNuevoLaboratorioExamen(formNuevoExamen)" name="formNuevoExamen" novalidate>
                <!--  <div class="">
                        <div class="col-lg-12">
                            <label for="form-field-select-1">Nombre</label>
                            <input required name="nombre" ng-model="examen.nombre" type="text" class="form-control">
                            <div ng-show="formNuevoExamen.nombre.$error.required" class="invalid-message help-block" ng-messages="formNuevoExamen.nombre.$error"
                                ng-if="formNuevoExamen.nombre.$touched || (formNuevoExamen.$submitted && formNuevoExamen.nombre.$invalid)">
                                <div ng-messages-include="/templates/gral/messages.html"></div>
                            </div>

                        </div>
                    </div> -->
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Examen de Lab.</label>
                        <input ng-disabled="examen.soloVista" required name="examen" ng-model="examen.examen"
                            type="text" class="form-control">
                        <div ng-show="formNuevoExamen.examen.$error.required" class="invalid-message help-block"
                            ng-messages="formNuevoExamen.examen.$error"
                            ng-if="formNuevoExamen.examen.$touched || (formNuevoExamen.$submitted && formNuevoExamen.examen.$invalid)">
                            <div ng-messages-include="/templates/gral/messages.html"></div>
                        </div>

                    </div>
                </div>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Unidad</label>
                        <input ng-disabled="examen.soloVista" name="unidad" ng-model="examen.unidad" type="text"
                            class="form-control">
                    </div>

                </div>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-select-1">Rango (parametro) referencia mínimo</label>
                        <input ng-disabled="examen.soloVista" name="minimo" ng-model="examen.minimo" type="text"
                            class="form-control">
                    </div>
                    <div class="">
                        <div class="col-lg-12">
                            <label for="form-field-select-1">Rango (parametro) referencia máximo</label>
                            <input ng-disabled="examen.soloVista" name="maximo" ng-model="examen.maximo" type="text"
                                class="form-control">
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="col-lg-12">
                        <label for="form-field-9">Observaciones</label>
                        <textarea ng-disabled="examen.soloVista" ng-model="examen.observacion" name="observacion"
                            class="form-control limited" id="observacion-examen-laboratorio-paciente"
                            maxlength="50"></textarea>
                    </div>
                </div>
                <div class="space-6"></div>
                <div class="col-lg-12 modal-footer wizard-actions">
                    <button ng-show="!examen.soloVista" type="submit" class="btn btn-primary btn-sm">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button class="btn btn-danger btn-sm" type="button" data-dismiss="modal"
                        ng-click="cerrarIdModalDialogLaboratorioExamenesNuevoResultado()">
                        <i class="ace-icon fa fa-times"></i>
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

<!-- modal ficha tecnica ======================================================== -->
    <div id="modal-fichaMedica" class="modal wizard-posicion">
        <div class="modal-content">
            <form ng-submit="guardarFichaTecnica(frmFicha,ficha)" name="frmFicha" id="formularioFichaTecnica"
                name="formularioFichaTecnica">
                <div id="modal-wizard-container-ficha">
                    <div class="modal-header modal-header-ficha">
                        <div class="titulo-ficha">
                            <h4>FICHA MÉDICA DE IDENTIFICACIÓN PERSONAL</h4>
                            <h5>(HISTORIAL {{ficha.fecha_elaboracion}})</h5>
                        </div>
                    </div>
                    <div class="modal-header">
                        <div class="foto-paciente">
                            <span class="profile-picture">

                                <img id="avatar" class="editable img-responsive editable-click editable-empty"
                                    alt="{{paciente.nombres}}'s Avatar" ng-src="{{paciente.imagen | cachePath}}">
                            </span>
                            <div class="width-85 label label-Light label-xlg arrowed-in arrowed-in-right"
                                ng-if="paciente.eliminado">
                                <span class="titulo-foto red" ng-if="!paciente.eliminado">DADO DE BAJA</span>
                                <span class="titulo-foto red" ng-if="paciente.eliminado">ACTIVO</span>
                            </div>
                        </div>
                        <ul class="steps pasos-ficha">
                            <li data-step="1" class="active">
                                <span class="step">
                                    <span class="fa fa-user "></span>
                                </span>
                                <span class="title">Datos personales</span>
                            </li>
                            <li data-step="2">
                                <span class="step">
                                    <span class="icono-pre3 icono-step"></span>
                                </span>
                                <span class="title">Datos Laborales/Referenciales</span>
                            </li>
                            <li data-step="3">
                                <span class="step">
                                    <span class="icono-pre4 icono-step"></span>
                                </span>
                                <span class="title">Indicadores Especificos</span>
                            </li>
                            <li data-step="4">
                                <span class="step">
                                    <span class="icono-pre2 icono-step-soap"></span>
                                </span>
                                <span class="title">Antecedentes Enfermedades/Quirúrgicos</span>
                            </li>
                            <li data-step="5">
                                <span class="step">5</span>
                                <span class="title">Finalizar</span>
                            </li>
                        </ul>
                    </div>
                    <div class="modal-body step-content">

                        <div class="step-pane active" data-step="1">
                            <div class="row">
                                <div class="col-lg-2">
                                    <label for="">Fecha de Elaboracion</label>
                                </div>
                                <div class="col-lg-2">
                                    <input required="" size="15" ng-update-hidden=""
                                        class="form-control date-picker"
                                        type="text" data-date-format="dd/mm/yyyy" id="fecha-elaboracion-ficha-paciente"
                                        ng-model="ficha.fecha_elaboracion" placeholder="Fecha Elaboracion">
                                </div>
                            </div>
                            <div class="page-header">
                                <h4 class="blue">
                                    1. Datos personales
                                </h4>
                            </div>
                            <div class="">
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Apellido Paterno</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input disabled type="text" id="fichaapellidopaterno" class="form-control"
                                            ng-model="ficha.paciente.persona.apellido_paterno" autofocus>
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Apellido Materno</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input disabled type="text" class="form-control"
                                            ng-model="ficha.paciente.persona.apellido_materno">
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Nombres</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input disabled type="text" class="form-control"
                                            ng-model="ficha.paciente.persona.nombres">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Edad</label>
                                    </div>
                                    <div class="col-lg-1">
                                        <input disabled type="number" class="form-control" ng-model="ficha.edad">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Sexo</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select disabled required style="width:150px"
                                            ng-options="genero as genero.nombre for genero in generos track by genero.id"
                                            ng-model="ficha.paciente.persona.genero"></select>
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">C.I.</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input disabled type="text" class="form-control"
                                            ng-model="ficha.paciente.persona.ci">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Exp.</label>
                                    </div>
                                    <div class="input-group- col-lg-2">
                                        <select disabled class="form-control" required
                                            ng-options="expedido as expedido.nombre_corto for expedido in expeditos.clases | filter:{habilitado:true} track by expedido.id"
                                            ng-model="ficha.paciente.extension"></select>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Telefono</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input name="telefonoPaciente" type="text" ng-maxlength="12" onkeypress='()=>{return event.charCode >= 48 && event.charCode <= 57}' class="form-control" ng-model="ficha.paciente.persona.telefono">
                                        <span class="red" ng-show="frmFicha.telefonoPaciente.$error.maxlength">El teléfono debe tener menos 12 caracteres</span>
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Celular</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input name="celularPaciente" type="text" class="form-control" ng-maxlength="12"  onkeypress='()=>{return event.charCode >= 48 && event.charCode <= 57}' placeholder="78658978" ng-model="ficha.paciente.persona.telefono_movil">
                                        <span class="red" ng-show="frmFicha.celularPaciente.$error.maxlength">El Celular debe tener menos 12 caracteres</span>
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Email</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input type="text" class="form-control"
                                            ng-model="ficha.paciente.persona.correo_electronico">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Estilo de Vida</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <textarea class="form-control" ng-model="ficha.estilo_vida" maxlength="2000"
                                            id="estilo_vida-ficha-paciente" placeholder=""></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="step-pane" data-step="2">
                            <div class="cabezera-ficha">
                                <h4 class="blue">
                                    2. Datos Laborales
                                    <!-- <a uib-tooltip="Permitir Edición" href="javascript:void(0)"
                                                e-disabled="!aplicacion.puede_crear"
                                                ng-click="abrirModalVerificarCuenta(ficha,'datosLaborales')">
                                                <i ng-hide="!ficha.editDatosLaborales"
                                                    class="green ace-icon fa fa-unlock bigger-150"></i>
                                                <i ng-hide="ficha.editDatosLaborales"
                                                    class="red ace-icon fa fa-lock bigger-150"></i>
                                            </a> -->
                                </h4>
                            </div>
                            <div class="container">
                                <div class="row form-group">

                                </div>
                                <div class="row form-group">

                                </div>
                                <div class="row form-group">
                                    <div class="col-sm-6 col-lg-1">
                                        <label for="">Cargos</label>
                                    </div>
                                    <!-- <div class="col-sm-6 col-lg-4">
                                        <input type="text" value="{{ficha.paciente.empleadosFichas[0].cargos[0].cargo.nombre}}">
                                            <select disabled class="form-control" required
                                            ng-options="cargo as cargo.nombre for cargo in ficha.empleado.fichas[0].cargos.clases track by cargo.id"
                                            ng-model="ficha.paciente.extension">
                                            <option value="{{cargo.id}}">{{cargo}}</option>
                                        </select>
                                    </div> -->
                                    <div class="row form-group">
                                        <div class="col-lg-2">
                                            <label for="">Empresa </label>
                                        </div>
                                        <div class="col-lg-2">
                                            <input disabled value="{{ficha.paciente.empresa.razon_social}}" type="text"
                                                class="form-control">
                                        </div>
                                        <div class="col-lg-2">
                                            <label for="">Telefono</label>
                                        </div>
                                        <div class="col-lg-2">
                                            <input disabled value="{{ficha.paciente.empresa.telefono1}}" type="text"
                                                class="form-control">
                                        </div>
                                        <div class="col-lg-2">
                                            <label for="">Área de Operación</label>
                                        </div>
                                        <div class="col-lg-2">
                                            <input disabled ng-model="ficha.paciente.empleadosFichas[0].area.nombre"
                                                type="text" class="form-control">
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-lg-2">
                                            <label for="">Actividades Laborales</label>
                                        </div>
                                        <div class="col-lg-4">
                                            <textarea disabled ng-model="ficha.cargos" rows="1"
                                                class="form-control" id="riesgo-ficha-paciente"
                                                placeholder=""></textarea>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-lg-3">
                                            <label for="">Riesgos de los Procesos de Trabajo</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="col-lg-3">
                                                <span
                                                    class="input-group-addon glyphicon glyphicon-pencil point-edit green"
                                                    ng-click="abrirDialogConceptoEdicion(tiposPersonales)"></span>
                                            </div>
                                            <div class="col-lg-8">
                                                <textarea ng-model="ficha.riesgo" rows="1" class="form-control"
                                                    id="riesgo-ficha-paciente" placeholder=""></textarea>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="cabezera-ficha">
                                <h4 class="blue">
                                    3. Datos Referenciales:
                                    <small>(En caso de emergencia llamar a)</small>
                                </h4>
                            </div>
                            <div class="container">
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Nombre de la Persona</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.nombres" required type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Teléfono</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.telefono" name="telefonoReferencia" type="text" class="form-control" ng-required="ficha.personaReferencia.telefono.length>0" ng-minlength="7" ng-maxlength="12"  onkeypress='()=>{return event.charCode >= 48 && event.charCode <= 57}'>
                                        <span class="red" ng-show="frmFicha.telefonoReferencia.$error.maxlength">El teléfono debe tener máximo 12 caracteres</span>
                                        <span class="red" ng-show="frmFicha.telefonoReferencia.$error.minlength">El teléfono debe tener mínimo 7 caracteres</span>
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Celular</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.telefono_movil" name="celularReferencia" type="text" class="form-control" ng-required="ficha.personaReferencia.telefono_movil.length>0" ng-minlength="7" ng-maxlength="12"  onkeypress='()=>{return event.charCode >= 48 && event.charCode <= 57}'>
                                        <span class="red" ng-show="frmFicha.celularReferencia.$error.maxlength">El celular debe tener máximo 12 caracteres</span>
                                        <span class="red" ng-show="frmFicha.celularReferencia.$error.minlength">El celular debe tener mínimo 7 caracteres</span>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-1">
                                        <label for="">Ciudad </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.direccion_ciudad" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Zona</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.direccion_zona" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Calle/Avenida</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.direccion_localidad" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Número</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input ng-model="ficha.personaReferencia.direccion_numero" type="text"
                                            class="form-control">
                                    </div>
                                </div>

                            </div>
                            <!-- <div class="cabezera-ficha">
                                <h4 class="blue">
                                    2. Datos Laborales
                                </h4>
                            </div>
                            <div class="">
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Empresa </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.paciente.empresa.razon_social" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Telefono</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.paciente.empresa.telefono1" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Área de Operación</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.area_operacion" type="text"
                                            class="form-control">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Actividades Laborales</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.actividad_laboral" type="text"
                                            class="form-control">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-3">
                                        <label for="">Riesgos de los Procesos de Trabajo</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <textarea required ng-model="ficha.riesgo" rows="1" class="form-control"
                                            id="riesgo-ficha-paciente" placeholder=""></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="cabezera-ficha">
                                <h4 class="blue">
                                    3. Datos Referenciales:
                                    <small>(En caso de emergencia llamar a)</small>
                                </h4>
                            </div>
                            <div class="">
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Nombre de la Persona</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.nombres" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Teléfono</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.telefono" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Celular</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.telefono_movil" type="text"
                                            class="form-control">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-1">
                                        <label for="">Ciudad </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.direccion_ciudad" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Zona</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.direccion_zona" type="text"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Calle/Avenida</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.direccion_localidad"
                                            type="text" class="form-control">
                                    </div>
                                    <div class="col-lg-1">
                                        <label for="">Número</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <input required ng-model="ficha.personaReferencia.direccion_numero" type="text"
                                            class="form-control">
                                    </div>
                                </div>
                            </div> -->
                        </div>
                        <div class="step-pane" data-step="3">
                            <div class="cabezera-ficha">
                                <h4 class="blue">
                                    4. Indicadores Específicos
                                </h4>
                            </div>
                            <div class="">
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Tipo de Control </label>
                                    </div>
                                    <div class="col-lg-3">
                                        <select required style="width:150px"
                                            ng-options="tipoControl as tipoControl.nombre for tipoControl in tiposControl track by tipoControl.id"
                                            ng-model="ficha.tipoControl"></select>
                                        </select>
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Grupo Sanguíneo</label>
                                    </div>
                                    <div class="col-lg-2">
                                        <select required style="width:150px" ng-model="ficha.paciente.grupo_sanguineo"
                                            ng-options="grupo as grupo.nombre for grupo in grupos_sanguineos track by grupo.id"></select>
                                        <!-- <input type="text" ng-model="ficha.paciente.grupo_sanguineo"
                                            class="form-control"> -->
                                        <!-- </select> -->
                                    </div>
                                    <div class="col-lg-1">
                                        &emsp;
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.es_donante"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Donante</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Es Alérgico a:</label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_humo_cigarrillo"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Humo de Cigarrillo</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_quimico"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Quimicos</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_medicamento"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Medicamentos</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_plantas"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Plantas</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">

                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_polvo"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Polvo</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_algun_material"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Algún Material</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_alimentos"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Alimentos</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_conservas"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Conservas</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">

                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_picadura"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Picaduras</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.alergia_otros"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Otros</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-3" ng-if="ficha.alergia_otros">
                                        <label>
                                            Especifique el Producto o Elemento
                                        </label>
                                    </div>
                                    <div class="col-lg-2" ng-if="ficha.alergia_otros">
                                        <input type="text" ng-model="ficha.alergia_otros_comentario"
                                            class="form-control">
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            Descripción:
                                        </label>
                                    </div>
                                    <div class="col-lg-4">
                                        <input type="text" ng-model="ficha.descripcion_indicadores"
                                            class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="step-pane" data-step="4">
                            <div class="cabezera-ficha">
                                <h4 class="blue">
                                    5. Antecedentes de enfermedades
                                </h4>
                            </div>
                            <div class="">
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                        <label for="">Usted se ha enfermado de:</label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_hipertension"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Hipertension</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_diabetes"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Diabetes</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_epilepsia"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Epilepsia</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_asma"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Asma</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_cardilogia"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Cardiologia</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_digestiva"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Digestivas</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_chagas"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Chagas</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_hepatitis"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Hepatitis</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-2">
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_lumbalgia"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Lumbalgias</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.enfermedad_otros"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Otras enfermedades</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-4" ng-if="ficha.enfermedad_otros">
                                        <label for="ficha.enfermedad_otros">Detalle de la enfermedad / tratamiento
                                            /medicamento / resultado</label>
                                        <textarea rows="2" ng-disabled="" ng-model="ficha.enfermedad_comentario"
                                            class="form-control" id="enfermedad-otros-ficha-paciente"
                                            placeholder=""></textarea>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-24">
                                        <div class="col-lg-3">
                                            <label>
                                                Descripción:
                                            </label>
                                        </div>
                                        <div class="col-lg-18">
                                            <textarea type="text" ng-model="ficha.descripcion_antecedentes" rows="2"
                                                cols="400" class="form-control"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col-lg-24">
                                        <div class="col-lg-3">
                                            <label>
                                                Tratamiento:
                                            </label>
                                        </div>
                                        <div class="col-lg-18">
                                            <textarea type="text" ng-model="ficha.tratamiento" rows="2" cols="400"
                                                class="form-control"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="cabezera-ficha">
                                <h4 class="blue">
                                    6. Antecedentes de Quirurgicos
                                </h4>
                            </div>
                            <div class="">
                                <div class="row ">
                                    <div class="col-lg-3">
                                        <label for="">Usted ha sido operado: </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label>
                                            <input name="switch-field-1" ng-model="ficha.quirurgico_operado"
                                                class="ace ace-switch ace-switch-5" type="checkbox">
                                            <span class="lbl check-descuento">Operado</span>
                                        </label>
                                    </div>
                                    <div class="col-lg-2">
                                        <label for="">Descripción</label>
                                    </div>
                                    <div class="col-lg-5">
                                        <textarea rows="1" class="form-control" ng-model="ficha.quirurgico_descripcion"
                                            placeholder=""></textarea>
                                    </div>
                                    <div class="col-lg-2" ng-if="ficha.quirurgico_operado">
                                        <label for="">Algun Comentario</label>
                                    </div>
                                    <div class="col-lg-5" ng-if="ficha.quirurgico_operado">
                                        <textarea rows="1" class="form-control" id="quirurgico_comentario"
                                            ng-model="ficha.quirurgico_comentario" placeholder=""></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="step-pane" data-step="5">
                            <div class="row">
                                <div class="center">
                                    <h4 class="blue">Finalización</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer wizard-actions">
                    <button type="button" ng-click="abrirDialogHistorialFicha(ficha)" id="historialFicha"
                        class="btn btn-white  btn-bold btn-danger ">
                        <i class="ace-icon fa fa-h-square  bigger-110"></i>
                        Historial
                    </button>
                    <button ng-if="mostarGuardarFicha" ng-disabled="!aplicacion.puede_crear" type="button"
                        class="btn btn-primary btn-sm "
                        ng-click="guardarFichaTecnicaExistente(frmFicha,ficha)">
                        <i class="ace-icon fa fa-floppy-o bigger-110"></i>&nbsp; Guardar</button>
                    <button class="btn btn-sm btn-prev">
                        <i class="ace-icon fa fa-arrow-left"></i>
                        Anterior
                    </button>
                    <button class="btn btn-success btn-sm btn-next" ng-disabled="!aplicacion.puede_crear"
                        id="siguiente-f" data-last="Finish">
                        Siguiente
                        <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                    </button>
                    <div class="pull-left">
                        <div class="col-lg-4"><button ng-click="cerrarPopUpIdModalFichaTecnica()"
                                class="btn btn-danger btn-sm" data-dismiss="modal">
                                <i class="ace-icon fa fa-times"></i>
                                Cancelar
                            </button></div>
                        <div class="col-lg-4"><a href="javascript:void(0)"
                                ng-click="abrirIdModalDialogLaboratorio(paciente)" id="id-btn-laboratorio"
                                class="acciones laboratorio tooltip-info" data-rel="tooltip" tooltip-placement="top"
                                uib-tooltip="Laboratorio">
                                <span class="icono-laboratorio icono-font"></span>
                            </a></div>
                        <div class="col-lg-2"><a href="javascript:void(0)" ng-click="abrirDialogDiagnosticos(paciente)"
                                class="acciones diagnostico tooltip-info" data-rel="tooltip" tooltip-placement="top"
                                uib-tooltip="Diagnostico">
                                <span class="icono-diagnostico icono-font"></span>
                            </a></div>
                        <div class="col-lg-2"><a href="javascript:void(0)" ng-click="crearNuevaConsulta(paciente)"
                                class="acciones diagnostico tooltip-info" data-rel="tooltip" tooltip-placement="top"
                                uib-tooltip="Consulta">
                                <span class="icono-consulta icono-font"></span>
                            </a></div>
                    </div>



                </div>
            </form>
        </div>
    </div>

    <!-- fin modal ficha tecnica ====================================== -->
    <!-- =========== panel historico ficha ==================== -->
    <div id="dialog-historico-ficha" class="modal wizard-posicion">
        <!-- topbar -->
        <div class=" ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
            <span id="ui-id-5" class="ui-dialog-title">
                <h4 class="smaller red">
                    <i class="ace-icon fa fa-h-square bigger-110"></i>
                    <label>HISTORIAL FICHA MEDICA</label>
                </h4>
            </span>
            <button ng-click="cerrarDialogHistorialFicha()" type="button" class="ui-dialog-titlebar-close"></button>
        </div>
        <!-- topbar -->
        <div class="space-6"></div>
        <table class="table table-striped table-bordered ">
            <tbody>
                <tr>
                    <th>
                        <label>Desde</label>&nbsp;
                    </th>
                    <th>
                        <label>Hasta</label>&nbsp;
                    </th>
                    <th>
                        <label>Tipo de Control :</label>&nbsp;
                    </th>
                    <th>
                    </th>
                </tr>
                <tr>
                    <td>
                        <input required="" size="15" ng-update-hidden=""
                            class="form-control date-picker"
                            type="text" data-date-format="dd/mm/yyyy" id="fechainicio-historico-ficha-paciente"
                            ng-model="filtro.inicio" placeholder="Fecha inicial">

                    </td>
                    <td>
                        <input required="" size="15" ng-update-hidden=""
                            class="form-control date-picker"
                            type="text" data-date-format="dd/mm/yyyy" id="fechafinal-historico-ficha-paciente"
                            ng-model="filtro.fin" placeholder="Fecha inicial">

                    </td>
                    <td>

                        <select ng-model="filtro.tipo_control"
                            ng-options="tipoControl.id as tipoControl.nombre for tipoControl in tiposControl">
                            <option value="">-- TODOS --</option>
                        </select>
                    </td>

                    <td>
                        <button type="submit" class="btn btn-sm btn-primary"
                            ng-click="ObtenerHistorialFichaMedica(filtro)">
                            <i class="ace-icon fa fa-search  bigger-160"></i>
                            BUSCAR
                        </button>
                        <!-- <button id="pdf" class="btn btn-sm btn-danger">
                                <i class="ace-icon fa fa-print bigger-160"></i>
                                PDF
                            </button> -->

                    </td>
                </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="col-lg-12">
                <table id="dynamic-table"
                    class="table table-striped table-bordered table-hover nowrap dataTable no-footer">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo de Control</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat=" ficha in listaHistorialfichaMEdica">
                            <td>{{ficha.fecha | date:"dd/MM/yyyy"}}</td>
                            <td>{{ficha.tipoControl.nombre}}</td>
                            <td>
                                <div class="action-buttons">
                                    <a class="red puntero" ng-click="imprimirIsoFichaMedica(ficha.id, ficha.configuracionesIso.version_impresion)"
                                        id="id-previewHistorico">
                                        <i class="ace-icon fa fa-file-pdf-o bigger-130"></i>
                                    </a>
                                    <!-- <a class="red" ng-click="sinFuncionalidad()">
                                            <i class="ace-icon fa fa-print bigger-130"></i>
                                        </a> -->
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="space-6"></div>
        <div class="row">
            <div class="modal-footer wizard-actions">

                <button class="btn btn-danger btn-sm" data-dismiss="modal" ng-click="cerrarDialogHistorialFicha()">
                    <i class="ace-icon fa fa-times"></i>Cerrar
                </button>
            </div>
        </div>

    </div>
    <!-- ===== fin panel ============================= -->
    <!-- =========== panel credencial ==================== -->
    <div id="dialog-credencial" class="modal wizard-posicion">
        <!-- topbar -->
        <div id="contenido-credencial">
            <div class=" ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">
                <span id="ui-id-5" class="ui-dialog-title">
                    <h4 class="smaller blue">
                        <i class="icono-credencial_salud icono-font"></i>
                        <label>CREDENCIAL</label>
                    </h4>
                </span>
                <button ng-click="cerrarDialogDialogCredencial()" type="button" class="ui-dialog-titlebar-close"></button>
            </div>
            <br>
            <!-- topbar -->
            <div id="PrintCredencial" class="row PrintCredencial">
                <div class="col-lg-6 carnet-front">
                    <div class="row bordes-carnet">
                        <div class="col-lg-4">
                            <div class="logo-carnet">
                                <img class="img-responsive" alt="{{usuario.empresa.nombre}}'s Avatar"
                                    ng-src="{{usuario.empresa.imagen | cachePath}}" ng-style="{width : 10, height : 10}">
                            </div>
                            <div class="foto-carnet">
                                <img id="avatar" class="img-responsive" alt="{{paciente.nombres}}'s Avatar"
                                    ng-src="{{paciente.imagen | cachePath}}">
                                <!--  class="editable img-responsive editable-click editable-empty"  -->
                            </div>
    
                        </div>
                        <div class="col-lg-8">
                            <div class="titulo-carnet">
                                <div class="contenido-texto">
                                    <h4 class="titulo-texto">CREDENCIAL DE SALUD</h4>
                                    <h4 class="titulo-texto">N° {{paciente.codigo}} </h4>
                                </div>
                            </div>
                            <div class="detalle-carnet">
                                <div class="descripcion-paciente">
                                    <h3 class="nombre-carnet">{{paciente.nombre_completo}}</h3>
                                    <h5 class="cargo-carnet">{{paciente.cargo}}</h5>
                                </div>
                                <h4 class="grupo-carnet">GRUPO DE SANGRE:</h4>
                                <h3 class="red">"{{paciente.grupo_sanguineo.nombre.split(' ')[0]}}"
                                    &nbsp;{{paciente.grupo_sanguineo.nombre.split(' ')[1]}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 carnet-back">
    
                    <div class="row bordes-carnet">
                        <div class="col-lg-4">
                            <div class="logomed-carnet">
                                <img class=" img-responsive logo-medico" alt="Servicio Medico"
                                    src="assets/custom/serviciomed.png">
                            </div>
                        </div>
    
                        <div class="col-lg-8">
                            <div class="titulo-carnet">
                                <div class="contenido-texto">
                                    <h4 class="titulo-texto">CONTROL SANITARIO</h4>
                                </div>
                            </div>
    
                        </div>
                        <div class="col-lg-12">
                            <table class="tabla-examen">
                                <thead>
                                    <tr class="tabla-titulo">
                                        <td>FECHA</td>
                                        <td>EXAMEN FISICO</td>
                                        <td>LABORATORIO</td>
                                        <td>FIRMA MEDICO</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>&emsp;</td>
                                        <td>&emsp;</td>
                                        <td>&emsp;</td>
                                        <td>&emsp;</td>
                                    </tr>
                                    <tr>
                                        <td>&emsp;</td>
                                        <td>&emsp;</td>
                                        <td>&emsp;</td>
                                        <td>&emsp;</td>
                                    </tr>
                                </tbody>
                            </table>
                            <h5 class="titulo-emfermedades">EMFERMEDADES IMPORTANTES</h5>
                            <table class="tabla-emfermedades">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>SI</th>
                                        <th>NO</th>
                                        <th></th>
                                        <th>SI</th>
                                        <th>NO</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Cardiacas</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox1" ng-model="ficha.enfermedad_cardilogia"
                                                    type="checkbox" class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox2" type="checkbox"
                                                    ng-model="ficha.enfermedad_cardilogia2"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>Hipertención</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox3" type="checkbox"
                                                    ng-model="ficha.enfermedad_hipertension"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox4" type="checkbox"
                                                    ng-model="ficha.enfermedad_hipertension2"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Diabetes</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox1" type="checkbox"
                                                    ng-model="ficha.enfermedad_diabetes" class="ace input-sm check-disabled"
                                                    disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox2" type="checkbox"
                                                    ng-model="ficha.enfermedad_diabetes2"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>Epilepsia</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox3" type="checkbox"
                                                    ng-model="ficha.enfermedad_epilepsia"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox4" type="checkbox"
                                                    ng-model="ficha.enfermedad_epilepsia2"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Alérgias</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox1" type="checkbox" ng-model="ficha.alergia"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
    
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox2" type="checkbox" ng-model="ficha.alergia2"
                                                    class="ace input-sm check-disabled" checked disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>Hepatitis</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox3" type="checkbox"
                                                    ng-model="ficha.enfermedad_hepatitis"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox4" type="checkbox"
                                                    ng-model="ficha.enfermedad_hepatitis2"
                                                    class="ace input-sm check-disabled" checked="" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Chagas</td>
                                        <td>
    
                                            <label class="block">
                                                <input name="form-field-checkbox1" type="checkbox"
                                                    ng-model="ficha.enfermedad_chagas" class="ace input-sm check-disabled"
                                                    disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
    
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox2" type="checkbox"
                                                    ng-model="ficha.enfermedad_chagas2" class="ace input-sm check-disabled"
                                                    checked disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>Lumbalgias</td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox3" type="checkbox"
                                                    ng-model="ficha.enfermedad_lumbalgia"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox4" type="checkbox"
                                                    ng-model="ficha.enfermedad_lumbalgia2"
                                                    class="ace input-sm check-disabled" disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Otros</td>
                                        <td>
    
                                            <label class="block">
                                                <input name="form-field-checkbox1" type="checkbox"
                                                    ng-model="ficha.enfermedad_otros" class="ace input-sm check-disabled"
                                                    disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
    
                                        </td>
                                        <td>
                                            <label class="block">
                                                <input name="form-field-checkbox2" type="checkbox"
                                                    ng-model="ficha.enfermedad_otros2" class="ace input-sm check-disabled"
                                                    checked disabled="">
                                                <span class="lbl bigger-120"> </span>
                                            </label>
                                        </td>
    
                                    </tr>
                                </tbody>
                            </table>
                            <!-- <h5 class="titulo-gerente">Gerente de salud</h5> -->
                            <!-- <h5 class="titulo-gerente">
                                -------------------------------------------------------&nbsp;&nbsp;&nbsp; Gerente de salud
                            </h5> -->
                            <h5 class="pull-righ titulo-gerente">
                                <span class="">Gerente de salud</span>
                            </h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="space-6"></div>
        <div class="row">
            <div class="modal-footer wizard-actions">
                <button type="button" ng-click="imprimirCredencial(ficha)" class="btn btn-primary">
                    <i class="ace-icon fa fa-print bigger-110"></i>Imprimir</button>
                <button type="button" ng-click="descargarCredencial()" class="btn btn-success">
                    <i class="ace-icon fa fa-cloud-download bigger-110"></i>Descargar</button>

                <button class="btn btn-danger" data-dismiss="modal" ng-click="cerrarDialogDialogCredencial()">
                    <i class="ace-icon fa fa-times"></i>Cancelar
                </button>
            </div>
        </div>
    </div>
    <!-- ===== fin panel ============================= -->
    <!-- =====  modal  rol de turnos ====== -->
    <div id="dialog-rol-turnos" class="modal modal-700">
        <div class="modal-header ficha">
            <h4 class="modal-title" id="myModalLabel"> Rol de turnos</h4>
            <h5 class="modal-title">{{empleado.nombre_completo}}</h5>
        </div>
        <form id="formRolTurno" ng-submit="GuardarRolTurno(rolTurno)">
            <div class="modal-body">

                <div class="row">
                    <div class="form-group col-sm-5">
                        <label for="sexo">Campo</label>
                        <div class="input-group">

                            <ui-select ng-model="rolTurno.campo" theme="select2" style="width: 200px;"
                                title="Seleccionar campo">
                                <ui-select-match placeholder="seleccionar campo..."><span
                                        style="color:black">{{rolTurno.campo.nombre}}</span>
                                </ui-select-match>
                                <ui-select-choices
                                    repeat="centroCosto in centrosDeCostos | filter:{nombre:$select.search,habilitado:!cargo_activo} | orderBy:'nombre'">

                                    <span>
                                        {{centroCosto.nombre}}
                                    </span>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group col-sm-3">
                        <label for="afiliado"></label>
                        <label class="checkbox-align">
                            <input ng-click="calcularDatosRolTurno(rolTurno)" ng-model="rolTurno.tipo"
                                class="ace ace-switch ace-switch-5 big-switch" type="checkbox">
                            <span class="lbl"
                                data-lbl="Fijo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Temporal"></span>
                        </label>
                        <label class="checkbox-align">
                            <input ng-model="rolTurno.turno_dia" class="ace ace-switch ace-switch-5 big-switch"
                                type="checkbox">
                            <span class="lbl"
                                data-lbl="Dia&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Noche"></span>
                        </label>
                    </div>
                    <div class="form-group col-sm-1">
                        <label for="">A</label>
                        <label class="block">
                            <input name="form-field-checkbox" ng-model="rolTurno.alerta" type="checkbox"
                                class="ace input-lg">
                            <span class="lbl bigger-120"></span>
                        </label>
                    </div>
                    <div class="form-group col-sm-3">
                        <label for="">Historial</label>
                        <div class="checkbox-align">
                            <a href="javascript:void(0)" type="button" ng-click="abrirDialogHistorialTurnos(empleado)"
                                class="margin-icons red">
                                <span class="fa fa-h-square bigger-250"></span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-6">
                        <label>Desde</label>
                        <input ng-disabled="rolTurno.blokearDatos" ng-change="calcularDatosRolTurno(rolTurno)"
                            name="fecha" required ng-update-hidden class="form-control date-picker" autocomplete="off"
                            type="text" data-date-format="dd/mm/yyyy" id="rol-turno-fecha-inicio"
                            ng-model="rolTurno.fecha_inicio" placeholder="Desde" />
                    </div>
                    <div class="form-group col-sm-6">
                        <label>Hasta</label>
                        <input type="text" ng-update-hidden ng-model="rolTurno.fecha_fin" data-date-format="dd/mm/yyyy"
                            class="form-control date-picker" autocomplete="off" ng-disabled="rolTurno.tipo" required
                            id="rol-turno-fecha-final" placeholder="Hasta">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-6">
                        <label>D. Trabajo</label>
                        <input ng-disabled="rolTurno.blokearDatos" required type="number"
                            ng-model="rolTurno.dias_trabajado" class="form-control" id="rol-turno-dias-trabajados"
                            placeholder="D. Trabajo">
                    </div>
                    <div class="form-group col-sm-6">
                        <label>D. Descanso</label>
                        <input ng-disabled="rolTurno.blokearDatos" required type="number"
                            ng-model="rolTurno.dias_descanso" class="form-control" id="rol-turno-dias-descanso"
                            placeholder="D. Descanso">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-6">
                        <label for="ap-materno">Grupo</label>
                        <select ng-model="rolTurno.grupo" class="form-control"
                            ng-options="grupo as grupo.nombre for grupo in gruposRol.clases | filter:{habilitado:true} track by grupo.id">
                            <option value="">--Ninguno--</option>
                        </select>
                    </div>
                    <div class="form-group col-sm-6">
                        <label>Comentario</label>
                        <input ng-disabled="rolTurno.blokearDatos" type="text" ng-model="rolTurno.comentario"
                            class="form-control" id="rol-turno-dias-descanso" placeholder="Comentario">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-6 ">
                        <label for="ap-materno">Clasificación</label>
                        <div class="input-group">
                            <select ng-model="rolTurno.clasificacion" class="form-control"
                                ng-options="clasificacion as clasificacion.nombre for clasificacion in clasificacionesRol.clases | filter:{habilitado:true} track by clasificacion.id">
                                <option value="">--Ninguno--</option>
                            </select>
                            <span class="input-group-addon glyphicon glyphicon-pencil point-edit green"
                                aria-hidden="true" ng-click="abrirDialogConceptoEdicion(clasificacionesRol)"></span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.row -->

            <div class="modal-footer wizard-actions">

                <button ng-disabled="!aplicacion.puede_crear" type="submit" class="btn btn-primary btn-sm">
                    <i class="glyphicon glyphicon-floppy-disk"></i>Guardar
                </button>
                <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogRolTurnos()">
                    <i class="ace-icon fa fa-times"></i>Cancelar
                </button>
            </div>
        </form>
    </div>
    <!--- ==== fin modal rol de turnos  ================================ -->
    <!--- ==== modal historial rol de turnos ================================ -->
    <div id="dialog-historial-turnos" class="modal wizard-posicion">
        <div class="modal-header bg-primary">
            <h4 class='smaller text-white text-uppercase'>
                <i class='icono-prerequisito'></i>
                <label> &nbsp;Historico rol de turnos </label>
            </h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="form-group col-sm-3">
                    <label>Desde</label>
                    <input type="text" class="form-control date-picker" autocomplete="off" id="filtro-rol-turnos-desde"
                        placeholder="Desde">
                </div>
                <div class="form-group col-sm-3">
                    <label>Hasta</label>
                    <input type="text" class="form-control date-picker" autocomplete="off" id="filtro-rol-turnos-hasta"
                        placeholder="Hasta">
                </div>
                <div class="form-group col-sm-2">
                    <label for="sexo">Grupo</label>
                    <input type="text" class="form-control" id="filtro-rol-turno-grupo" placeholder="Hasta">
                </div>
                <div class="form-group col-sm-4">
                    <div class="buttons-align">
                        <button type="button" class="btn btn-primary btn-sm">
                            <i class=" fa fa-search-plus align-top "></i>
                            Filtrar
                        </button>
                        <button type="button" class="btn btn-danger btn-sm">
                            <i class=" fa fa-print align-top "></i>
                            Pdf
                        </button>
                        <button type="button" class="btn btn-success btn-sm">
                            <i class=" fa fa-print align-top "></i>
                            Excel
                        </button>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Fecha I.</th>
                        <th>Fecha F.</th>
                        <th>D. Trab.</th>
                        <th>D. Desc.</th>
                        <th>Grupo</th>
                        <th>Tipo</th>
                        <th>Turno</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="rolTurno in empleadosRolTurnoE track by $index">
                        <td>{{rolTurno.campo.nombre}}</td>
                        <td>{{rolTurno.fecha_inicio | date: "dd/MM/yyyy"}}</td>
                        <td>{{rolTurno.fecha_fin | date: "dd/MM/yyyy"}}</td>
                        <td>{{rolTurno.dias_trabajado}}</td>
                        <td>{{rolTurno.dias_descanso}}</td>
                        <td>{{rolTurno.grupo.nombre}}</td>
                        <td>{{rolTurno.tipo?'FIJO':'TEMPORAL'}}</td>
                        <td>{{rolTurno.turno_dia?"DIA":"NOCHE"}}</td>
                        <td>
                            <a class="green" ng-if="!rolTurno.fecha_fin"
                                ng-click="abrirModalVerificarCuenta(rolTurno,'cerrarRolturnoEmpleado')">
                                <i class="ace-icon fa fa-unlock bigger-130"></i>
                            </a>
                            <a class="green" ng-if="edicionFichasInactivas"
                                ng-click="abrirModalVerificarCuenta(rolTurno,'cerrarRolturnoEmpleado')">
                                <i class="ace-icon fa fa-unlock bigger-130"></i>
                            </a>
                            <a class="red " ng-if="rolTurno.fecha_fin">

                                <span class="fa fa-lock bigger-130" aria-hidden="true"></span>
                            </a>
                            <a class="green" href="javascript:void(0)"
                                ng-click="abrirModalVerificarCuenta(rolTurno,'rolturnoEmpleado')">
                                <i class="ace-icon fa fa-pencil bigger-130"></i>
                            </a>
                            <a class="blue" href="javascript:void(0)" ng-if="rolTurno.turno_dia"
                                uib-tooltip="Noches Extra"
                                ng-click="abrirModalVerificarCuenta(rolTurno,'rolturnoNocturEmpleado')">
                                <i class="ace-icon fa fa-moon-o bigger-130"></i>
                            </a>
                            <a class="text-warning" href="javascript:void(0)" ng-if="!rolTurno.turno_dia"
                                uib-tooltip="dias Extra"
                                ng-click="abrirModalVerificarCuenta(rolTurno,'rolturnoDiaEmpleado')">
                                <i class="ace-icon fa fa-sun-o bigger-130"></i>
                            </a>
                            <a class="text-info" href="javascript:void(0)" uib-tooltip="Descansos"
                                ng-click="abrirModalVerificarCuenta(rolTurno,'rolturnoDescansosEmpleado')">
                                <i class="ace-icon icono-pre2 bigger-160"></i>
                            </a>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <div class="modal-footer wizard-actions">
            <button class="btn btn-danger btn-sm" ng-click="cerrarDialogHistorialTurnos()">
                <i class="ace-icon fa fa-times"></i>Cancelar
            </button>
        </div>

    </div>
    <!--- ==== fin modal historial rol de turnos  ================================ -->

    <!--- ==== inicio modal cerrar rol de turno  ================================ -->
    <div id="modal-cerrar-rol-de-turno" class="modal">
        <div class="modal-header bg-primary">
            <h4 class='smaller text-white text-uppercase'>
                <label>Cerrar Rol de Turno</label>
            </h4>
        </div>
        <form name="asig" ng-submit="GuardarCierreRolTurno(dato)">
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label for="ciudad">Fecha Inicio</label>
                        <input type="text" disabled class="form-control date-picker" required
                            ng-model="dato.fecha_inicio">
                    </div>
                    <div class="form-group">
                        <label for="ciudad">Fecha fin</label>
                        <input type="text" class="form-control date-picker" ng-update-hidden
                            data-date-format="dd/mm/yyyy" ng-model-options="{updateOn: 'blur'}" required
                            ng-model="dato.fecha_fin">
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="modal-footer wizard-actions">
                        <button type="submit" class="btn btn-primary btn-sm">
                            <i class="glyphicon glyphicon-floppy-disk"></i>Asignar
                        </button>
                        <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogCerrarRolDeTurno()">
                            <i class="ace-icon fa fa-times"></i>Cancelar
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <!--- ==== fin modal cerrar rol de turno  ================================ -->

    <!-- inicio confirmar usuario -->
    <div id="modal-verificar-cuenta" class="modal" title="Asignar Cuenta">

        <form name="formularioAsignarCuenta" ng-submit="verificarCuentaAdmin(cuenta)">
            <div class="modal-header">
                <p>
                <h3>Verificar Cuenta</h3>
                </p>
            </div>
            <div class="modal-body">
                <div>
                    <span>Nombre Usuario: </span>
                    <input required class="form-control" type="text" ng-model="cuenta.nombre_usuario">
                </div>
                <div>
                    <span>Clave</span>
                    <input required class="form-control" type="password" name="contra" ng-model="cuenta.clave">
                </div>
            </div>
            <div class="modal-footer">
                <div class="col-sm-6">
                    <button type="submit" class="btn btn-success">Guardar</button>
                </div>


                <div class="col-sm-6">
                    <button type="button" class="btn btn-danger"
                        ng-click="cerrarModalVerificarCuenta()">Cancelar</button>
                </div>
            </div>
        </form>
    </div>
    <!-- fin confirmar usuario -->
    <!-- modal rol noche -->
    <!-- =====  modal  nuevo subsidio ====== -->
    <div id="modal-rol-turnos-noche" class="modal">
        <div class="modal-header ficha">
            <h4 class="modal-title">{{tituloModalRolTurnoNoche}}</h4>
            <h5 class="modal-title">{{empleadoSubsidio.nombre_completo}}</h5>
        </div>

        <div class="modal-body">
            <form id="formARolTurnoN" name="formARolTurnoN" ng-submit="agregarRolTurnoNoche(rolTurnoNoche)">
                <div class="row">
                    <div class="form-group col-sm-3">
                        <label>Desde</label>
                        <input type="text" required ng-model-options="{updateOn: 'submit'}" ng-update-hidden
                            ng-model="rolTurnoNoche.fecha_inicio" data-date-format="dd/mm/yyyy"
                            class="form-control date-picker" autocomplete="off" id="rol-turno-fecha-final"
                            placeholder="Inicio">
                    </div>

                    <div class="form-group col-sm-3">
                        <label>hasta</label>
                        <input type="text" required ng-model-options="{updateOn: 'submit'}" ng-update-hidden
                            ng-model="rolTurnoNoche.fecha_fin" data-date-format="dd/mm/yyyy"
                            class="form-control date-picker" autocomplete="off" id="rol-turno-fecha-final"
                            placeholder="Fin">
                    </div>
                    <div class="form-group col-sm-6">
                        <label>Comentario</label>
                        <input type="text" ng-model-options="{updateOn: 'submit'}" ng-model="rolTurnoNoche.comentario"
                            class="form-control" autocomplete="off" id="rol-turno-fecha-final" placeholder="Comentario">
                    </div>

                </div>
                <div class="row">

                    <div class="form-group col-sm-6">

                        <button type="submit" class="btn btn-success btn-sm">
                            <i class="glyphicon glyphicon-plus"></i><span
                                ng-If="rolTurnoNoche.editar">Modificar</span><span
                                ng-If="!rolTurnoNoche.editar">Añadir</span>
                        </button>
                    </div>
                </div>
            </form>
            <div class="space-4"></div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Fecha Inicio</th>
                        <th>Fecha Fin.</th>
                        <th>Comentario.</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-class="{'text-red':rolNocturno.eliminado}"
                        ng-repeat="rolNocturno in rolesTurnosExtra track by $index">
                        <td>{{$index+1}}</td>
                        <td>{{rolNocturno.fecha_inicio| date: "dd/MM/yyyy"}}</td>
                        <td>{{rolNocturno.fecha_fin| date: "dd/MM/yyyy"}}</td>
                        <td>{{rolNocturno.comentario}}</td>
                        <td>
                            <a href="javascript:void(0)" type="button" ng-click="editarRolTurnoNoche(rolNocturno)">
                                <i class="ace-icon fa fa-pencil bigger-130"></i>
                            </a>
                            <a href="javascript:void(0)" type="button" class="red"
                                ng-click="eliminarRolTurnoNoche(rolNocturno,$index)">
                                <span class="fa fa-trash bigger-130"></span>
                            </a>
                        </td>
                    </tr>

                </tbody>
            </table>


        </div>
        <!-- /.row -->

        <div class="modal-footer wizard-actions">
            <button ng-disabled="!aplicacion.puede_crear" type="button" class="btn btn-primary btn-sm"
                ng-click="GuardarRolTurnoExtra()">
                <i class="glyphicon glyphicon-floppy-disk"></i>Guardar
            </button>
            <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogRolTurnosNoche()">
                <i class="ace-icon fa fa-times"></i>Cancelar
            </button>
        </div>
    </div>
    <!-- fin modal rol noche -->
    <!--- ==== modal reporte rol de turnos ================================ -->
    <div id="dialog-reporte-rol-turnos" class="modal">
        <div class="modal-header ficha">
            <h4 class="modal-title" id="myModalLabel"> ROLES DE TURNOS</h4>
            <!--      -->
        </div>
        <div class="modal-body">
            <div class="row">
                <input type="text" autofocus hidden>
                <form ng-submit="buscarRolesTurno()">
                    <div class="form-group col-sm-3">
                        <label for="filtro-rol-turno-desde">Desde</label>
                        <datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
                        <input type="text" class="form-control" ng-model="filtroRol.inicio" autocomplete="off"
                            id="filtro-rol-turno-desde"  name="filtro-rol-turno-desde" placeholder="Seleccionar Fecha">
                        </datepicker>
                    </div>
                    <div class="form-group col-sm-3">
                        <label for="filtro-rol-turno-hasta">Hasta</label>
                        <datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
                        <input type="text"class="form-control" ng-model="filtroRol.fin" autocomplete="off"
                            id="filtro-rol-turno-hasta" name="filtro-rol-turno-hasta" placeholder="Seleccionar Fecha">
                        </datepicker>
                    </div>
                    <div class="form-group col-sm-2">
                        <label for="grupo-rol-turno">Grupo</label>
                        <div class="input-group">

                            <select ng-model="filtroRol.grupo" class="form-control" id="grupo-rol-turno" name="grupo-rol-turno"
                                ng-options="grupo.id as grupo.nombre for grupo in gruposRol.clases | filter:{habilitado:true} track by grupo.id">
                                <option value="">--Ninguno--</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-sm-2">
                        <label>Campamento</label>
                        <select id="filtro-rol-turno-campo" class="form-control" name="centroDeCostos"
                            ng-options="centroCosto.id as centroCosto.nombre for centroCosto in centrosDeCostos | filter:{habilitado:true} track by centroCosto.id"
                            ng-model="filtroRol.campo">
                            <option value="">--Ninguno--</option>
                        </select>
                    </div>
                    <div class="form-group col-sm-2">
                        <label>Alerta</label>
                        <select id="filtro-rol-turno-campo" class="form-control" name="alerta"
                            ng-model="filtroRol.alerta">
                            <option value="">--Ninguno--</option>
                            <option value="true">Con Alerta</option>
                            <option value="false">Sin Alerta</option>
                        </select>
                    </div>

                    <div class="form-group col-sm-2">
                        <div class="buttons-align">
                            <button type="submit" class="btn btn-primary btn-sm">
                                <i class=" fa fa-search-plus align-top "></i>
                                Filtrar
                            </button>
                        </div>

                    </div>
                </form>
            </div>
            <div class="row">
                <div>
                    <label>
                        <input name="form-field-checkbox" ng-model="historialRolesTurno" type="checkbox" class="ace">
                        <span class="lbl">Ver Historial</span>
                    </label>
                </div>
                <div ng-if="historialRolesTurno" class="form-group col-sm-2">
                    <label for="filtro-rol-turno-cal-desde">Desde</label>
                    <datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
                    <input type="text" class="form-control"
                        ng-change="cambiarFecha(filtroRolCal)" ng-model="filtroRolCal.inicio2" autocomplete="off"
                        id="filtro-rol-turno-cal-desde" placeholder="Desde">
                    </datepicker>
                </div>
                <div ng-if="historialRolesTurno" class="form-group col-sm-2">
                    <label name="filtro-rol-turno-cal-hasta">Hasta</label>
                    <datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
                    <input type="text" class="form-control"
                        ng-model="filtroRolCal.fin2" autocomplete="off" id="filtro-rol-turno-cal-hasta"
                        ng-change="cambiarFecha(filtroRolCal)" placeholder="Hasta">
                    </datepicker>
                </div>
                <div ng-if="historialRolesTurno" class="form-group col-sm-2">
                    <label for="grupo-cal-rol-turno">Grupo</label>
                    <div class="input-group">
                        <select ng-model="filtroRolCal.grupo" class="form-control" id="grupo-cal-rol-turno" name="grupo-cal-rol-turno"
                            ng-options="grupo.id as grupo.nombre for grupo in gruposRol.clases | filter:{habilitado:true} track by grupo.id">
                            <option value="">--Ninguno--</option>
                        </select>
                    </div>
                </div>
                <div ng-if="historialRolesTurno" class="form-group col-sm-2">
                    <p>Historial</p>
                    <button type="button" ng-click="abrirDialogReporteTurnosDetallado(filtroRolCal)"
                        class="btn btn-purple btn-sm">
                        <i class=" fa fa-list-alt bigger-130"></i>
                    </button>
                </div>
            </div>
            <div class="table-fixed-header">
                <table id="tabla-comprobante-revision" class="table table-striped table-bordered table-hover">
                    <thead class="table-head-color">
                        <tr>
                            <th>#</th>
                            <th><a href="javascript:void(0)" ng-click="paginatorRolTurnos.sortColumn('nombre')">Nombre
                                    <span id="nombre" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th><a href="javascript:void(0)" ng-click="paginatorRolTurnos.sortColumn('campo')">Campo
                                    <span id="campo" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th><a href="javascript:void(0)"
                                    ng-click="paginatorRolTurnos.sortColumn('f-inicio')">F.Inicio
                                    <span id="f-inicio" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th><a href="javascript:void(0)" ng-click="paginatorRolTurnos.sortColumn('f-fin')">F.Fin
                                    <span id="f-fin" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th><a href="javascript:void(0)" ng-click="paginatorRolTurnos.sortColumn('d-trab')">D.
                                    Trab
                                    <span id="d-trab" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th><a href="javascript:void(0)" ng-click="paginatorRolTurnos.sortColumn('d-desc')">D.
                                    Desc
                                    <span id="d-desc" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th> <a href="javascript:void(0)" ng-click="paginatorRolTurnos.sortColumn('grupo')">Grupo
                                    <span id="grupo" class="sort fa fa-sort icon-only"></span>
                                </a></th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="rolTurno in listaRolTurnoFiltro track by $index">
                            <td> {{($index+1)+(paginatorRolTurnos.itemsPerPage*(paginatorRolTurnos.currentPage-1))}}
                            </td>
                            <td>{{rolTurno.ficha.empleado.persona.nombre_completo}}</td>
                            <td>{{rolTurno.campo.nombre}}</td>
                            <td>{{rolTurno.fecha_inicio | date: "dd/MM/yyyy"}}</td>
                            <td>{{rolTurno.fecha_fin | date: "dd/MM/yyyy"}}</td>
                            <td>{{rolTurno.dias_trabajado}}</td>
                            <td>{{rolTurno.dias_descanso}}</td>
                            <td>{{rolTurno.grupo.nombre}}</td>
                            <td>
                                <a class="blue">
                                    <span class="fa fa-search-plus bigger-130" aria-hidden="true"></span>
                                </a>
                                <a class="text-warning" ng-if="rolTurno.alerta">
                                    <i class="fa fa-bell icon-animated-bell" aria-hidden="true"></i>
                                </a>
                                <a class="text-info" ng-if="rolTurno.comentario" tooltip-append-to-body="true"
                                    tooltip-rel="tooltip" tooltip-placement="left"
                                    uib-tooltip="{{rolTurno.comentario}}">
                                    <i class="fa fa-comment" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>

                    </tbody>
                </table>

            </div>
            <div class="row" ng-include src="'/templates/gral/paginatorRolTurnos.html'"></div>
        </div>
        <div class="modal-footer wizard-actions">
            <button type="button" class="btn btn-danger btn-sm" ng-click="reportePersonalRolTurnos()">
                <i class=" fa fa-print"></i>
                Pdf
            </button>
            <button type="button" class="btn btn-success btn-sm" ng-click="reporteExcelPersonalRolTurnos()">
                <i class=" fa fa-print "></i>
                Excel
            </button>
            <button class="btn btn-danger btn-sm pull-left" ng-click="cerrarDialogReporteRolTurnos()">
                <i class="ace-icon fa fa-times"></i>Cancelar
            </button>
        </div>

    </div>
    <!--- ==== fin modal reporte rol de turno ================================ -->

    <!--- ==== modal reporte rol de turnos detallado ================================ -->
    <div id="dialog-reporte-turnos-detallado" class="modal">
        <div class="modal-header ficha">
            <h4 class="modal-title" id="myModalLabel"> ROLES DE TURNOS</h4>
            <!--   -->
        </div>

        <div class="modal-body">
            <form
                ng-submit="paginatorCalendarioRolTurnos.getSearch(paginatorCalendarioRolTurnos.search,filtroRolCal,null)">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group col-sm-2">
                            <label>Desde</label>
                            <datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
                            <input type="text"
                                class="form-control" ng-change="cambiarFecha(filtroRolCal)"
                                ng-model="filtroRolCal.inicio2" autocomplete="off" id="filtro-rol-turno-cal-desde"
                                placeholder="Desde">
                            </datepicker>
                        </div>
                        <div class="form-group col-sm-2">
                            <label>Hasta</label>
                            <datepicker date-format="dd/MM/yyyy" datepicker-mobile="true">
                            <input type="text"
                                class="form-control" ng-model="filtroRolCal.fin2" autocomplete="off"
                                id="filtro-rol-turno-cal-hasta" ng-change="cambiarFecha(filtroRolCal)"
                                placeholder="Hasta">
                            </datepicker>
                        </div>
                        <div class="form-group col-sm-2">
                            <label for="sexo">Grupo</label>
                            <div class="input-group">
                                <select ng-model="filtroRolCal.grupo" class="form-control"
                                    ng-options="grupo.id as grupo.nombre for grupo in gruposRol.clases | filter:{habilitado:true} track by grupo.id">
                                    <option value="">--Ninguno--</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group col-sm-2">
                            <label>Empleado</label>
                            <input type="text" class="form-control" ng-model="filtroRolCal.nombre" autocomplete="off"
                                id="filtro-rol-turno-cal-nombre" placeholder="nombre">
                        </div>
                        <div class="form-group col-sm-2">
                            <label>Campamento</label>
                            <!-- <select id="filtro-reporte-detallado-campo-rol" class="form-control" name="centroDeCostos"
                                ng-options="centroCosto.id as centroCosto.nombre for centroCosto in centrosDeCostos | filter:{habilitado:true} track by centroCosto.id"
                                ng-model="filtroRolCal.campo">
                                <option value="">--seleccionar--</option>
                            </select> -->
                            <ui-select ng-model="filtroRolCal.campoData" theme="select2" style="width: 200px;"
                                title="Seleccionar cargo" ng-change="cambiarFiltroCampo(filtroRolCal)">
                                <ui-select-match placeholder="seleccionar cargo..."><span
                                        style="color:black">{{filtroRolCal.campoData.nombre}}</span>
                                    <a ng-click="borrarSeleccionUnica($event)" ng-if="filtroRolCal.campoData.nombre"><i
                                            class="fa fa-times" aria-hidden="true"></i>
                                    </a>
                                </ui-select-match>
                                <ui-select-choices
                                    repeat="centroCosto in centrosDeCostos | filter:{nombre:$select.search,habilitado:true}">

                                    <span>
                                        {{centroCosto.nombre}}
                                    </span>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="form-group col-sm-2">
                            <div class="buttons-align">
                                <button autofocus type="submit" class="btn btn-primary btn-sm">
                                    <i class=" fa fa-search-plus align-top "></i>
                                    Filtrar
                                </button>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-12" align="center">
                        <b>T y NT: Trabajado</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <b>D: Descanso</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <b>TBM, DBD y NTB: Ausencia Medica</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <b>TOA, DOA y NTA : Otro tipo de Ausencia</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <b>TV, DV y NTV: Vacacion</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </div>
                </div>
            </form>
            <div class="row">
                <div class="col-sm-6">
                    <div>
                        <label>
                            Mostrar <select ng-model="paginatorCalendarioRolTurnos.itemsPerPage"
                                ng-change="paginatorCalendarioRolTurnos.getFirstPage()" name="tabla-proveedores_length"
                                aria-controls="tabla-proveedores" class="form-control input-sm">
                                <option value="0">Todos</option>
                                <option ng-selected="true" value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select> Elementos</label>
                    </div>
                </div>
                <div class="col-sm-6" align="right">
                    <div>
                        <label>Buscar:(Beneficiario)
                            <input autofocus class="form-control input-sm" type="search" ng-model="textSearch"
                                ng-model-options='{ debounce: 600 }'
                                ng-change="paginatorCalendarioRolTurnos.getSearch(textSearch,paginatorCalendarioRolTurnos.filter,$event)">
                        </label>
                    </div>
                </div>
            </div>
            <div class="table-fixed-header">

                <table role="grid" id="tabla-detalle-rol-turno"
                    class="zui-table table table-striped table-bordered table-hover">
                    <thead fix-head class="table-head-color" role="rowgroup">
                        <tr>
                            <th colspan="15"></th>
                            <th ng-if="mes.visible" colspan="{{mes.dias.length}}"
                                ng-repeat="mes in mesesRolTurno track by $index">{{mes.nombre}}
                                {{mes.anio}}</th>
                        </tr>
                        <tr>
                            <th>Nº</th>
                            <th>Campo</th>
                            <th>Clas.</th>
                            <th>G</th>
                            <th>Empleado
                                <span style="color: #DDEFEF;">.........................................</span>
                            </th>

                            <th>Cargo</th>
                            <th class=" vertical-align: middle;"><i class="fa fa-phone-square bigger-160"
                                    aria-hidden="true"></i></th>
                            <th>Acc.</th>
                            <th>T</th>
                            <th>D</th>
                            <th>NT</th>
                            <th>V</th>
                            <th>A</th>
                            <th>BM</th>
                            <th>TT</th>
                            <th ng-if="dia.mes.visible && dia.visible" ng-repeat="dia in diasAnio track by $index">
                                {{dia.dia}}</th>

                        </tr>
                    </thead>
                    <tbody role="rowgroup" style="font-size:11px;white-space: nowrap;">
                        <tr
                            ng-repeat="roles in empleadosRolTurno| orderBy:customOrderRolTurno | filterRol track by $index">
                            <td>
                                <p>{{$index+1}}</p>
                            </td>
                            <td>
                                <p>{{roles.campo.nombre}}</p>
                            </td>
                            <td>
                                <p>{{roles.clasificacion.nombre}}</p>
                            </td>
                            <td>
                                <p>{{roles.grupo.nombre_corto}}</p>
                            </td>
                            <td>{{roles.ficha.empleado.persona.nombre_completo}}</td>
                            <td>
                                <a popover-placement="right"
                                    uib-popover-template="dynamicPopoverCargosRolTurno.templateUrl"
                                    popover-trigger="mouseenter" popover-title="Cargos" class="blue">
                                    <i class="fa fa-list-ol bigger-200 orange" aria-hidden="true"></i>
                                </a>
                                <script type="text/ng-template" id="myPopoverTemplateCargosRolTurno.html">
                                    <div class="form-group">
                                        <p ng-repeat="cargo in roles.ficha.cargos ">{{$index+1}}.-{{cargo.cargo.nombre}}</p>                               
                                    </div>
                                </script>

                            </td>
                            <td><a href="javascript:void(0)" tooltip-append-to-body="true" tooltip-rel="tooltip"
                                    tooltip-placement="left"
                                    uib-tooltip="{{roles.ficha.empleado.persona.telefono_movil}}"><i
                                        class="fa fa-phone con-animated-phone bigger-200" aria-hidden="true"></i></a>
                            </td>
                            <td>
                                <a ng-if="opcionesAplicacion.RRHH_OPCION_ROL_TURNO.puede_ver" href="javascript:void(0)"
                                    ng-click="abrirDialogRolTurnosDesteMatriz(roles.ficha)" role="button"
                                    class="tooltip-info" data-rel="tooltip" data-placement="top"
                                    uib-tooltip="Rol de Turnos">
                                    <span class="fa fa-clock-o fa-2x"></span>
                                </a>
                            </td>
                            <td class="filter-bg-yellow">{{roles.contador_dias_Trabajados}}</td>
                            <td class="filter-bg-yellow">{{roles.contador_dias_descanso}}</td>
                            <td class="filter-bg-yellow">{{roles.contador_noche_trabajadas}}</td>
                            <td class="filter-bg-yellow">{{roles.contador_dias_vacaciones}}</td>
                            <td class="filter-bg-yellow">{{roles.contador_dias_otras_ausencia}}</td>
                            <td class="filter-bg-yellow">{{roles.contador_dias_ausencia_medica}}</td>
                            <td class="filter-bg-yellow">{{roles.contador_suma_total}}
                            </td>
                            <td ng-if="dia.mes.visible && dia.visible" tooltip-append-to-body="true"
                                tooltip-rel="tooltip" tooltip-placement="left" uib-tooltip-html="dia.mensaje"
                                ng-repeat="dia in roles.diasAnio track by $index">{{dia.texto}}</td>

                        </tr>

                    </tbody>


                    <tfoot>
                        <tr class="bg-info">

                            <th colspan="15">Personal Trabajo</th>

                            <th ng-if="dia.mes.visible && dia.visible"
                                ng-repeat="dia in diasAnioPieTrabajos track by $index">{{dia.texto}}</th>

                        </tr>
                    </tfoot>
                    <tfoot>
                        <tr class="bg-info">

                            <th colspan="15">Personal Vacación </th>

                            <th ng-if="dia.mes.visible && dia.visible"
                                ng-repeat="dia in diasAnioPieVacaciones track by $index">{{dia.texto}}</th>

                        </tr>
                    </tfoot>
                    <tfoot>
                        <tr>

                            <th colspan="15">Personal Ausencia</th>

                            <th ng-if="dia.mes.visible && dia.visible"
                                ng-repeat="dia in diasAnioPieAusencias track by $index">{{dia.texto}}</th>

                        </tr>
                    </tfoot>
                    <tfoot>
                        <tr>

                            <th colspan="15">Personal Descanso</th>

                            <th ng-if="dia.mes.visible && dia.visible"
                                ng-repeat="dia in diasAnioPieDescansos track by $index">{{dia.texto}}</th>

                        </tr>
                    </tfoot>
                    <tfoot ng-if="filtroRolCal.campo">
                        <tr>

                            <th colspan="15">Personal Proyectado</th>

                            <th ng-if="dia.mes.visible && dia.visible"
                                ng-repeat="dia in diasAnioPieProtectadas track by $index">{{dia.texto}}</th>

                        </tr>
                    </tfoot>
                    <tfoot ng-if="filtroRolCal.campo">
                        <tr>

                            <th colspan="15">Personal Diferencia</th>

                            <th ng-if="dia.mes.visible && dia.visible"
                                ng-repeat="dia in diasAnioPiediferencia track by $index">{{dia.texto}}</th>

                        </tr>
                    </tfoot>
                </table>

            </div>
            <div class="row" ng-include src="'/templates/gral/paginatorRolTurnosCalendario.html'">
            </div>
        </div>
        <div class="modal-footer wizard-actions">
            <button type="button" class="btn btn-danger btn-sm " ng-click="imprimirRolTurnoDetalle()">
                <i class=" fa fa-print"></i>
                Pdf
            </button>
            <button type="button" class="btn btn-success btn-sm" ng-click="generarExcelRolTurnoDetalle()">
                <i class=" fa fa-print "></i>
                Excel
            </button>
            <button class="btn btn-danger btn-sm pull-left" ng-click="cerrarDialogReporteTurnosDetallado()">
                <i class="ace-icon fa fa-times"></i>Cancelar
            </button>
        </div>

    </div>
    <!--- ==== fin modal reporte rol de turno ================================ -->
    <!-- =====  modal  Reporte Fichas Médicas ====== -->
    <div id="dialog-reporte-fichas-medicas" class="modal wizard-posicion">
        <div class="modal-header ficha">
            <h4 class="modal-title smaller" id="myModalLabel">REPORTE FICHAS MÉDICAS</h4>
        </div>
        <div class="modal-body">
            <div class="row" style="margin-top: 15px!important;">
                <div class="form-group col-md-4">
                    <label for="tipo_control">Tipo de Control</label>
                    <select class="form-control" ng-options="tipoControl as tipoControl.nombre for tipoControl in tiposControl track by tipoControl.id"
                        ng-model="filtroFM.tipo_control">
                        <option value="" selected>TODOS</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="fecha_inicio">Fecha Inicio</label>                    
                        <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                        data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="desde"
                        placeholder="Desde" ng-model="filtroFM.inicio">
                </div>
                <div class="form-group col-md-4">
                    <label for="fecha_fin">Fecha Fin</label>
                    <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                    data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="hasta"
                    placeholder="Hasta" ng-model="filtroFM.fin">
                 
                </div>
                <div class="form-group col-md-4">
                    <label for="empleado">Empleado</label>
                    <select class="form-control" ng-model="filtroFM.empleado" ng-change="restaurarFiltro()" >
                        <option value="0" selected>TODOS</option>
                        <option value="1">Especificar criterio...</option>
                        
                    </select>
                </div>
                <div ng-if="filtroFM.empleado == 1" class="form-group col-md-4">
                    <label for="nombre">Nombre/Apellido</label>
                    <input class="form-control" ng-model="filtroFM.nombres" type="text">
                </div>
                <div ng-if="filtroFM.empleado == 1" class="form-group col-md-4">
                    <label for="cargo">Cargo</label>
                    <input class="form-control" autocomplete="off" ng-keypress="interceptarTecla($event,'fm_campo', true)" type="text" ng-model="filtroFM.cargo" placeholder="Ingrese cargo" uib-typeahead="cargo for cargo in cargarCargos($viewValue)" typeahead-wait-ms="800" typeahead-loading="cargandoCargos" typeahead-no-results="sinCargos" typeahead-template-url="templates/autocompletar.html" typeahead-append-to-body="true" typeahead-show-hint="false" typeahead-min-length="2">
                    <i ng-show="cargandoCargos" class="glyphicon glyphicon-refresh"></i>
                    <div ng-show="sinCargos">
                    <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                    </div>
                </div>
            </div>
            <div  ng-if="filtroFM.empleado == 1" class="row" style="margin-top: 15px!important; margin-bottom: 15px!important;" >
                
                <div class="form-group col-sm-4">
                    <label for="campo">Campo</label>
                    <input id="fm_campo"type="text" ng-model="filtroFM.campo" placeholder="Ingrese campo" uib-typeahead="campo as campo.nombre for campo in cargarCampos($viewValue)" typeahead-wait-ms="800" typeahead-append-to-body="true" typeahead-loading="cargandoCampos" typeahead-no-results="noResults" typeahead-min-length="2" class="form-control">
                    <i ng-show="cargandoCampos" class="glyphicon glyphicon-refresh"></i>
                    <div ng-show="noResults">
                    <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                    </div>
                </div>
                <div class="form-group col-sm-4">
                    <label for="estado">Estado</label>
                    <select class="form-control" ng-model="filtroFM.estado">
                        <option value="0" selected>TODOS</option>
                        <option value="Activo">Activo</option>
                        <option value="Inactivo">Inactivo</option>
                        
                    </select>
                </div>
                <div class="form-group col-sm-4">
                    <label for="grupo_sanguineo">Grupo Sanguineo</label>
                    <select class="form-control" ng-model="filtroFM.grupo_sanguineo">
                        <option value="0" selected>TODOS</option>
                        <option value="A +" >A+</option>
                        <option value="A -" >A-</option>
                        <option value="B +" >B+</option>
                        <option value="B -" >B-</option>
                        <option value="O +" >O+</option>
                        <option value="O -" >O-</option>
                        <option value="AB +" >AB+</option>
                        <option value="AB -" >AB-</option>
                    </select>
                </div>
            </div>
            <div>
                <button type="button" class="btn btn-danger btn-sm" ng-click="generarReporteFichaMedicaPdf(filtroFM, 1)">
                    <i class="fa fa-file-pdf-o"></i> PDF
                </button>
                <button type="button" class="btn btn-success btn-sm" ng-click="generarReporteFichaMedicaXlsx(filtroFM, 2)">
                    <i class="fa fa-file-excel-o"></i> EXCEL
                </button>
            </div>
        </div>
        <div class="modal-footer wizard-actions">
            <div class="pull-left">
                <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogReporteFichasMedicas()">
                    <i class="ace-icon fa fa-times"></i>Cancelar
                </button>
            </div>
           
            
        </div>
    </div>
    <!--- ==== fin modal Reporte Fichas Médicas  ================================ -->

    <!-- panel vacunas =====================================================-->
    <div id="dialog-vacunas" class="modal wizard-posicion" style="overflow-x: hidden;">
        <!-- TOPBAR -->
        <div class=" modal-content">
            <div class="modal-header bg-primary">
                <h4 class='smaller text-center text-white text-uppercase'>
                    <button type="button" class="close" ng-click="cerrarModalVacunas()" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <i class="ace-icon icono-vacuna pt-4 margin-0-5 bigger-160" style="color: white!important;"></i> VACUNAS
                </h4>
            </div>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-xs-12 form-group">
                    <button ng-disabled="!aplicacion.puede_crear" id="nuevaVacuna" class="btn btn-sm btn-primary"
                        ng-click="abrirModalCrearEditarVacuna()">
                        <i class="ace-icon fa fa-plus align-top bigger-125"></i>
                        Nuevo
                    </button>
                    <span class="pull-right">
                        <a class="btn btn-sm btn-warning" href="javascript:void(0)" ng-click="abrirConfigProducto()"><i class="fa fa-cog bigger-120" aria-hidden="true"></i></a>
                    </span>
                </div>
            </div>
            <div style="overflow-x: auto;">
                <table id="tabla-vacunas" class="table">
                    <thead>
                        <tr>
                            <th class="text-center">N°</th>
                            <th class="text-center">Nombre</th>
                            <th class="text-center">Tipo Dosis</th>
                            <th class="text-center">Observación</th>
                            <th class="text-center">Estado</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="vacuna in vacunas">
                            <td>{{ $index + 1 }}</td>
                            <td>{{ vacuna.nombre }}</td>
                            <td class="text-center">
                                <span ng-if="vacuna.unico" class="badge badge-info">Única</span>
                                <span ng-if="!vacuna.unico" class="badge badge-success">Múltiple</span>
                            <td>{{ vacuna.observacion ? vacuna.observacion : '' }}</td>
                            <td class="text-center">
                                <span ng-if="!vacuna.eliminado" class="badge badge-success">Activo</span>
                                <span ng-if="vacuna.eliminado" class="badge badge-danger">Inactivo</span>
                            <td class="text-center">
                                <a style="text-decoration: none; cursor: pointer;" class="info" ng-click="abrirModalCrearEditarVacuna(vacuna, true)" id="id-btn-vacunaEditar">
                                    <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                </a>
                                <a style="text-decoration: none; cursor: pointer;" class="green" ng-if="!vacuna.eliminado" e-disabled="!aplicacion.puede_modificar" ng-click="abrirModalCrearEditarVacuna(vacuna)" id="id-btn-vacunaEditar">
                                    <i class=" fa fa-pencil bigger-130"></i>
                                </a>
                                <a style="text-decoration: none; cursor: pointer;" class="red" ng-if="!vacuna.eliminado" e-disabled="!aplicacion.puede_modificar" ng-click="eliminarVacunaEmpresa(vacuna.id, true)">
                                    <i class="fa fa-ban bigger-130" aria-hidden="true"></i>
                                </a>
                                <a style="text-decoration: none; cursor: pointer;" class="green" ng-if="vacuna.eliminado" e-disabled="!aplicacion.puede_modificar" ng-click="eliminarVacunaEmpresa(vacuna.id, false)">
                                    <i class="fa fa-external-link-square bigger-130" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <div class="pull-right">
                <button ng-click="cerrarModalVacunas()" type="button" class="btn btn-danger btn-sm">
                    Salir
                    <i class="ace-icon fa fa-arrow-right icon-on-right bigger-110"></i>

                </button>
            </div>
        </div>
    </div>
    <!-- fin panel vacunas -->

    <!-- TODO: //////// INICIO MODAL CONFIG PRODUCTOS VACUNAS  /////////////// -->
    <div id="dialog-config-productos-vacunas" class="modal wizard-posicion">
        <div class=" modal-content">
            <div class="modal-header bg-primary">
                <button type="button" class="close" ng-click="cerrarConfigProducto()" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h5 class='smaller text-center text-white text-uppercase'>
                    CONFIGURACIÓN VACUNAS
                </h5>
            </div>
        </div>
        <div class="modal-body">
            <div class="row form-group">
                <div class="col-xs-12 col-sm-4">
                    <label style="width:100%">Grupos: &nbsp;</label>
					<div class="input-group" style="display: block;">
						<ui-select  class="col-sm-10" required
							ng-change="definirSubgrupos(configVacuna.grupo)" id="selectGruposProductos" name="selectGruposProductos"
							ng-model="configVacuna.grupo" theme="select2" title="Todos" append-to-body="true"
							style="min-width:150px; padding-left: 0px; padding-right: 0px;">
							<ui-select-match placeholder="Todos"><span
									style="color:black">{{$select.selected.nombre}}</span>
							</ui-select-match>
							<ui-select-choices
								repeat="grupo.id as grupo in gruposProducto.clases  | filter: $select.search">
								<span> {{grupo.nombre}} </span>
								<hr style="margin-top: 0px;margin-bottom: 0px;border: 0;border-top: 1px solid #eee;">
							</ui-select-choices>
						</ui-select>
						<span class="input-group-btn">
							<button type="button" ng-show="configVacuna.grupo" class="btn btn-purple btn-sm"
								data-rel="tooltip" tooltip-placement="top" uib-tooltip="Quitar Área seleccionada"
								ng-click="configVacuna.grupo=undefined;" style="font-size:12px;">
								<span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
							</button>
						</span>
					</div>
                </div>
                <div class="col-xs-12 col-sm-4">
                    <label style="width:100%">Sub Grupos: &nbsp;</label>
					<div class="input-group" style="display: block;">
						<ui-select class="col-sm-10"
							required id="selectSubgruposProductos"
							name="selectSubgruposProductos" ng-model="configVacuna.subGrupo" theme="select2" title="Todos"
							append-to-body="true" style="min-width: 150px; padding-left: 0px; padding-right: 0px;">
							<ui-select-match placeholder="Todos"><span
									style="color:black">{{$select.selected.nombre}}</span>
							</ui-select-match>
							<ui-select-choices
								repeat="subgrupo.id as subgrupo in subgrupos | filter: $select.search" >
								<span > {{subgrupo.nombre}} </span>
								<hr style="margin-top: 0px;margin-bottom: 0px;border: 0;border-top: 1px solid #eee;">
							</ui-select-choices>
						</ui-select>
						<span class="input-group-btn">
							<button type="button" ng-show="configVacuna.subGrupo" class="btn btn-purple btn-sm"
								data-rel="tooltip" tooltip-placement="top" uib-tooltip="Quitar Área seleccionada"
								ng-click="configVacuna.subGrupo=undefined" style="font-size:12px;">
								<span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
							</button>
						</span>
					</div>
                </div>
                <div class="col-xs-12 col-sm-4">
                    <label style="width:100%; color:#FFF;">: &nbsp;</label>
                    <button ng-click="addVacConfig(configVacuna)" type="button" class="btn btn-info btn-sm">
                        <i class="fa fa-plus bigger-110" aria-hidden="true"> Guardar</i>
                    </button>
                </div>
            </div>
            <div style="overflow-x: auto;" ng-if="vacConfigs.length>0">
                <div class="table-header">Clasificación de productos para vacunación</div>
                <table id="tabla-vacunas" class="table">
                    <thead>
                        <tr>
                            <th class="text-center">N°</th>
                            <th class="text-center">Grupo</th>
                            <th class="text-center">Subgrupo</th>
                            <th class="text-center">Estado</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="config in vacConfigs">
                            <td>{{ $index + 1 }}</td>
                            <td>{{ config.grupoConfig.nombre }}</td>
                            <td>{{ config.subgrupoConfig.nombre }}</td>
                            <td class="text-center">
                                <span ng-if="!config.eliminado" class="badge badge-success">Activo</span>
                                <span ng-if="config.eliminado" class="badge badge-danger">Inactivo</span>
                            </td>
                            <td class="text-center">
                                <a style="text-decoration: none; cursor: pointer;" class="red" ng-if="!config.eliminado" e-disabled="!aplicacion.puede_modificar" ng-click="eliminarConfigVacuna(config.id, true)">
                                    <i class="fa fa-ban  bigger-130" aria-hidden="true"></i>
                                </a>
                                <a style="text-decoration: none; cursor: pointer;" class="green" ng-if="config.eliminado" e-disabled="!aplicacion.puede_modificar" ng-click="eliminarConfigVacuna(config.id, false)">
                                    <i class="fa fa-external-link-square bigger-130" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <div class="pull-right">
                <button ng-click="cerrarConfigProducto()" type="button" class="btn btn-danger btn-sm">
                    <i class="ace-icon fa fa-arrow-right icon-on-right bigger-110"></i> Cerrar
                </button>
                
            </div>
        </div>
    </div>
    <!--  //////// FIN MODAL CONFIG PRODUCTOS VACUNAS /////////////// -->
    <!-- =====  modal  Reporte laboratorios ====== -->
    <div id="dialog-reporte-laboratorios" class="modal wizard-posicion">
        <div class="modal-header bg-primary">
            <button type="button" class="close" ng-click="cerrarDialogReporteLaboratorios()" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title smaller text-center" id="myModalLabel">
                <i class="icono-laboratorio bigger-150" style="color: white!important;" aria-hidden="true"> </i>REPORTE GENERAL DE LABORATORIOS
            </h4>
        </div>
        <div class="modal-body">
            <div class="row" style="margin-top: 15px!important;">
                <div class="col-xs-12 col-sm-3">
                    <label for="tipo_control">Laboratorio</label>
                    <select class="form-control" ng-options="laboratorio as laboratorio.nombre for laboratorio in listaLaboratorios track by laboratorio.id"
                        ng-model="filtroLabo.tipo">
                        <option value="" selected>TODOS</option>
                    </select>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <label for="fecha_inicio">Fecha Inicio</label>
                    <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                            data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="desde"
                            placeholder="Desde" ng-model="filtroLabo.inicio">
                </div>
                <div class="col-xs-12 col-sm-3">
                    <label for="fecha_fin">Fecha Fin</label>
                    <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                            data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="hasta"
                            placeholder="Hasta" ng-model="filtroLabo.fin">
                </div>
                <div class="col-xs-12 col-sm-3">
                    <label for="empleado">Empleado</label>
                    <select class="form-control" ng-model="filtroLabo.empleado" ng-change="restaurarFiltro()" >
                        <option value="0" selected>TODOS</option>
                        <option value="1">Especificar criterio...</option>
                        
                    </select>
                </div>
            </div>
            <div  ng-if="filtroLabo.empleado == 1" class="row" style="margin-top: 15px!important; margin-bottom: 15px!important;" >
                <div class="col-xs-12 col-sm-3">
                    <label for="nombre">Nombre/Apellido</label>
                    <input class="form-control" ng-model="filtroLabo.nombres" type="text">
                </div>
                <div class="col-xs-12 col-sm-3">
                    <label for="cargo">Cargo</label>
                    <input class="form-control" autocomplete="off" ng-keypress="interceptarTecla($event,'fm_campo', true)" type="text" ng-model="filtroLabo.cargo" placeholder="Ingrese cargo" uib-typeahead="cargo for cargo in cargarCargos($viewValue)" typeahead-wait-ms="800" typeahead-loading="cargandoCargos" typeahead-no-results="sinCargos" typeahead-template-url="templates/autocompletar.html" typeahead-append-to-body="true" typeahead-show-hint="false" typeahead-min-length="2">
                    <i ng-show="cargandoCargos" class="glyphicon glyphicon-refresh"></i>
                    <div ng-show="sinCargos">
                    <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <label for="campo">Campo</label>
                    <input id="fm_campo"type="text" ng-model="filtroLabo.campo" placeholder="Ingrese campo" uib-typeahead="campo as campo.nombre for campo in cargarCampos($viewValue)" typeahead-wait-ms="800" typeahead-append-to-body="true" typeahead-loading="cargandoCampos" typeahead-no-results="noResults" typeahead-min-length="2" class="form-control">
                    <i ng-show="cargandoCampos" class="glyphicon glyphicon-refresh"></i>
                    <div ng-show="noResults">
                    <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <label for="estado">Estado</label>
                    <select class="form-control" ng-model="filtroLabo.estado">
                        <option value="0" selected>TODOS</option>
                        <option value="Activo">Activo</option>
                        <option value="Inactivo">Inactivo</option>
                        
                    </select>
                </div>
            </div>
        </div>
        <div class="modal-footer wizard-actions">
            <div class="pull-left">
                <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogReporteLaboratorios()">
                    <i class="ace-icon fa fa-times"></i>Cancelar
                </button>
            </div>
            <div class="pull-right">
               <!--  <button type="button" class="btn btn-danger btn-sm" ng-click="generarReporteGeneralLaboratoriosPdf(filtroLabo, 1)">
                    <i class="fa fa-file-pdf-o"></i> PDF
                </button> -->
                <button type="button" class="btn btn-success btn-sm" ng-click="generarReporteGeneralLaboratoriosXlsx(filtroLabo, 2)">
                    <i class="fa fa-file-excel-o"></i> EXCEL
                </button>
            </div>
            
        </div>
    </div>
    <!--- ==== fin modal Reporte laboratorios  ================================ -->

<!-- =====  modal  Reporte Consultas ====== -->
<div id="dialog-reporte-consultas" class="modal wizard-posicion">
    <div class="modal-header ficha">
        <button type="button" class="close" ng-click="cerrarDialogReporteConsultas()" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title smaller" id="myModalLabel">
            <i class="icono-consulta bigger-150" style="color: white!important;" aria-hidden="true"> </i>REPORTE GENERAL DE CONSULTAS
        </h4>
    </div>
    <div class="modal-body">
        <div class="row" style="margin-top: 15px!important;">
            <div class="col-xs-12 col-sm-3">
                <label for="fecha_inicio">Fecha Inicio</label>
                <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                        data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="desde"
                        placeholder="Desde" ng-model="filtroCons.inicio">
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="fecha_fin">Fecha Fin</label>
                <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                        data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="hasta"
                        placeholder="Hasta" ng-model="filtroCons.fin">
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="empleado">Empleado</label>
                <select class="form-control" ng-model="filtroCons.empleado" ng-change="restaurarFiltro()" >
                    <option value="0" selected>TODOS</option>
                    <option value="1">Especificar criterio...</option>
                    
                </select>
            </div>
        </div>
        <div  ng-if="filtroCons.empleado == 1" class="row" style="margin-top: 15px!important; margin-bottom: 15px!important;" >
            <div class="col-xs-12 col-sm-3">
                <label for="nombre">Nombre/Apellido</label>
                <input class="form-control" ng-model="filtroCons.nombres" type="text">
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="cargo">Cargo</label>
                <input class="form-control" autocomplete="off" ng-keypress="interceptarTecla($event,'fm_campo', true)" type="text" ng-model="filtroCons.cargo" placeholder="Ingrese cargo" uib-typeahead="cargo for cargo in cargarCargos($viewValue)" typeahead-wait-ms="800" typeahead-loading="cargandoCargos" typeahead-no-results="sinCargos" typeahead-template-url="templates/autocompletar.html" typeahead-append-to-body="true" typeahead-show-hint="false" typeahead-min-length="2">
                <i ng-show="cargandoCargos" class="glyphicon glyphicon-refresh"></i>
                <div ng-show="sinCargos">
                <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="campo">Campo</label>
                <input id="fm_campo"type="text" ng-model="filtroCons.campo" placeholder="Ingrese campo" uib-typeahead="campo as campo.nombre for campo in cargarCampos($viewValue)" typeahead-wait-ms="800" typeahead-append-to-body="true" typeahead-loading="cargandoCampos" typeahead-no-results="noResults" typeahead-min-length="2" class="form-control">
                <i ng-show="cargandoCampos" class="glyphicon glyphicon-refresh"></i>
                <div ng-show="noResults">
                <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="estado">Estado</label>
                <select class="form-control" ng-model="filtroCons.estado">
                    <option value="0" selected>TODOS</option>
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                    
                </select>
            </div>
        </div>
    </div>
    <div class="modal-footer wizard-actions">
        <div class="pull-left">
            <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogReporteConsultas()">
                <i class="ace-icon fa fa-times"></i>Cerrar
            </button>
        </div>
        <div class="pull-right">
           <!-- <button type="button" class="btn btn-danger btn-sm" ng-click="generarReporteGeneralConsultasPdf(filtroCons, 1)">
                <i class="fa fa-file-pdf-o"></i> PDF
            </button> -->
            <button type="button" class="btn btn-success btn-sm" ng-click="generarReporteGeneralConsultasXlsx(filtroCons, 2)">
                <i class="fa fa-file-excel-o"></i> EXCEL
            </button>
        </div>
        
    </div>
</div>
<!--- ==== fin modal Reporte Consultas  ================================ -->

<!-- =====  modal  Reporte Diagnósticos ====== -->
<div id="dialog-reporte-diagnosticos" class="modal wizard-posicion">
    <div class="modal-header ficha">
        <button type="button" class="close" ng-click="cerrarDialogReporteDiagnosticos()" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title smaller" id="myModalLabel">
            <i class="icono-diagnostico bigger-150" style="color: white!important;" aria-hidden="true"> </i>REPORTE GENERAL DE DIAGNÓSTICOS
        </h4>
    </div>
    <div class="modal-body">
        <div class="row" style="margin-top: 15px!important;">
            <div class="col-xs-12 col-sm-3">
                <label for="tipo">Tipo de Control</label>
                <select class="form-control" ng-options="diagnostico as diagnostico.nombre for diagnostico in listaDiagnosticos track by diagnostico.id"
                    ng-model="filtroDiag.tipo">
                    <option value="" selected>TODOS</option>
                </select>
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="fecha_inicio">Fecha Inicio</label>
                <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                        data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="desde"
                        placeholder="Desde" ng-model="filtroDiag.inicio">
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="fecha_fin">Fecha Fin</label>
                <input type="text" ng-update-hidden class="form-control date-picker" autocomplete="off"
                        data-date-format="dd/mm/yyyy" id="filtro-reporte-ficha-medica" name="hasta"
                        placeholder="Hasta" ng-model="filtroDiag.fin">
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="empleado">Empleado</label>
                <select class="form-control" ng-model="filtroDiag.empleado" ng-change="restaurarFiltro()" >
                    <option value="0" selected>TODOS</option>
                    <option value="1">Especificar criterio...</option>
                    
                </select>
            </div>
        </div>
        <div  ng-if="filtroDiag.empleado == 1" class="row" style="margin-top: 15px!important; margin-bottom: 15px!important;" >
            <div class="col-xs-12 col-sm-3">
                <label for="nombre">Nombre/Apellido</label>
                <input class="form-control" ng-model="filtroDiag.nombres" type="text">
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="cargo">Cargo</label>
                <input class="form-control" autocomplete="off" ng-keypress="interceptarTecla($event,'fm_campo', true)" type="text" ng-model="filtroDiag.cargo" placeholder="Ingrese cargo" uib-typeahead="cargo for cargo in cargarCargos($viewValue)" typeahead-wait-ms="800" typeahead-loading="cargandoCargos" typeahead-no-results="sinCargos" typeahead-template-url="templates/autocompletar.html" typeahead-append-to-body="true" typeahead-show-hint="false" typeahead-min-length="3">
                <i ng-show="cargandoCargos" class="glyphicon glyphicon-refresh"></i>
                <div ng-show="sinCargos">
                <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="campo">Campo</label>
                <input id="fm_campo"type="text" ng-model="filtroDiag.campo" placeholder="Ingrese campo" uib-typeahead="campo as campo.nombre for campo in cargarCampos($viewValue)" typeahead-wait-ms="800" typeahead-append-to-body="true" typeahead-loading="cargandoCampos" typeahead-no-results="noResults" typeahead-min-length="2" class="form-control">
                <i ng-show="cargandoCampos" class="glyphicon glyphicon-refresh"></i>
                <div ng-show="noResults">
                <i class="glyphicon glyphicon-remove red"></i> Sin resultados
                </div>
            </div>
            <div class="col-xs-12 col-sm-3">
                <label for="estado">Estado</label>
                <select class="form-control" ng-model="filtroDiag.estado">
                    <option value="0" selected>TODOS</option>
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                    
                </select>
            </div>
        </div>
    </div>
    <div class="modal-footer wizard-actions">
        <div class="pull-left">
            <button type="button" class="btn btn-danger btn-sm" ng-click="cerrarDialogReporteDiagnosticos()">
                <i class="ace-icon fa fa-times"></i>Cancelar
            </button>
        </div>
        <div class="pull-right">
            <!-- <button type="button" class="btn btn-danger btn-sm" ng-click="generarReporteGeneralDiagnosticosPdf(filtroFM, 1)">
                <i class="fa fa-file-pdf-o"></i> PDF
            </button> -->
            <button type="button" class="btn btn-success btn-sm" ng-click="generarReporteGeneralDiagnosticosXlsx(filtroDiag, 2)">
                <i class="fa fa-file-excel-o"></i> EXCEL
            </button>
        </div>
        
    </div>
</div>
<!--- ==== fin modal Reporte Diagnósticos  ================================ -->

<!-- =========== botones alertas ======  -->
<div class="zoom" id="alertas-principal">
    <a data-toggle="dropdown" class="zoom-fab zoom-btn-large dropdown-toggle" id="zoomBtn">
        <!--    <i class="fa fa-bars"></i> -->
        <img class="nav-user-photo" src="assets/images/alarm.png" width="60%">
    </a>
    <span class="badge badge-info cantidad-alert">{{ alertas ? alertas.total : 0 }}</span>
    <!--<span class="badge badge-info cantidad-alert">{{alertas.count}}</span>-->
    <ul class="dropdown-menu-right dropdown-navbar   dropdown-menu dropdown-caret dropdown-close">
        <li class="dropdown-header red">
            <i class="ace-icon fa fa-exclamation-triangle red"></i> {{ alertas ? alertas.total : 0 }}
            <!--{{alertas.count}}-->Notificaciones
        </li>
        <li class="dropdown-content">
            <ul class="dropdown-menu dropdown-navbar navbar-pink">
                <li>
                    <a href="javascript:void(0)" ng-click="abrirDialogDialogAlertREPORTES PREREQUISITOS()"
                        id="id-alertPre-requisitos">
                        <div class="clearfix">
                            <span class="pull-left">
                                <i class=" icono-prerequisito icono-font "></i>
                                Pre-requisitos
                            </span>
                            <span class="pull-right badge badge-info">+{{ alertas ? alertas.todas[1].cantidad : 0 }}</span>
                            <!--<span class="badge badge-info">{{alertasRequisitos.count}}</span>-->
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)" ng-click="abrirDialogAlertVacunas()" id="id-alertVacunas">
                        <i class="icono-vacuna icono-font"></i>
                        Vacunas
                        <span class="pull-right badge badge-info">+{{ alertas ? alertas.todas[0].cantidad : 0 }}</span>
                        <!--<span class="badge badge-info">{{alertasVacunas.count}}</span>-->
                    </a>
                </li>
                <!-- <li>
                    <a ng-click="abrirIdModalDialogPreRequisitos()">
                        <div class="clearfix">
                            <span class="pull-left">
                                <i class="btn btn-xs no-hover btn-success fa fa-plus"></i>
                                Otros
                            </span>
                            <span class="pull-right badge badge-success">+{{alertasOtros}}</span>
                        </div>
                    </a>
                </li> -->
            </ul>
        </li>
        <li class="dropdown-footer">
        </li>
    </ul>
</div>
<!-- ==== fin boton alertas ====== -->

</div>