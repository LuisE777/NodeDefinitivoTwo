<div class="row">
    <div class="col-xs-12">
        <h3 class="header smaller lighter blue">Orden de servicio</h3>
        <button id="nuevo" class="btn-woBox button-glow" ng-click="abrirModalNuevoPedido()">
            <i class="ace-icon fa fa-plus align-top bigger-125"></i>
            Nuevo
        </button>
        <div class="row">
            <div class="col-xs-6 col-sm-3">
                <div class="form-group">
                    <label for="desde">Desde</label>
                    <div ng-class="{'has-error-date':fechasIncorrectaInic}">
                        <input ng-update-hidden class="form-control date-picker" autocomplete="off"
                            type="text" data-date-format="dd/mm/yyyy" ng-model="filtro.desde"
                            ng-change="validarFechaI(filtro.desde,filtro.hasta)"
                            placeholder="Ingrese la fecha inicial" />
                    </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-3">
                <div class="form-group">
                    <label for="hasta">Hasta</label>
                    <div ng-class="{'has-error-date':fechasIncorrectaFin}">
                        <input ng-update-hidden class="form-control date-picker" autocomplete="off"
                            type="text" data-date-format="dd/mm/yyyy" ng-model="filtro.hasta"
                            ng-change="validarFechaF(filtro.desde,filtro.hasta)"
                            placeholder="Ingrese la fecha final" />
                    </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-6 middle">
                <div class="inline">
                    <button style="margin-top: 12px;" type="button" ng-click="obtenerPedidos()" class="btn btn-md btn-primary" ng-disabled="fechasIncorrectaInic || fechasIncorrectaFin ">
                        <i class="ace-icon fa fa-search align-top bigger-130"></i>
                        Filtrar
                    </button>
                    <button style="margin-top: 12px;" type="button" class="btn btn-md btn-danger" ng-click="reporteExcel(true)">
                        <i class="ace-icon fa fa-print align-top bigger-130"></i>
                        PDF
                    </button>
                    <button style="margin-top: 12px;" type="button" class="btn btn-md btn-success" ng-click="reporteExcel()">
                        <i class="ace-icon fa fa-print align-top bigger-130"></i>
                        Excel
                    </button>
                    <div class="input-group pull-right text-center">
                        <label class="block"><small class="muted smaller-90">Detalle:</small></label>
                        
                            <input id="id-button-detalle" ng-model="imprimir.detalle" name="switch-view-detail"
                            checked="checked" type="checkbox" class="ace ace-switch ace-switch-4">
                            <span class="lbl check-detalle"></span>
                        
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="tipoPedido" class="block">Tipo de Pedido</label>
                    <select class="form-control" ng-options="tipo.id as tipo.nombre for tipo in tipos track by tipo.id"
                        ng-model="filtro.tipo">
                        <option value="" selected>TODOS</option>
                    </select>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="proveedor" class="block">Proveedor</label>
                    <input id="placaInput" name="placaInput" type="text" placeholder="Ingrese proveedor"
                        autocomplete="off" class="form-control"
                        ng-model="filtro.proveedor"
                        typeahead-editable="false"
                        uib-typeahead="proveedor as proveedor.razon_social for proveedor in proveedores | filter:$viewValue"
                        typeahead-show-hint="true"
                        typeahead-on-select="obtenerPedidos()"
                        typeahead-append-to-body="true"
                        typeahead-focus-on-select="false" 
                        typeahead-min-length="1">
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="nit" class="block">NIT</label>
                    <input type="text" ng-model="filtro.nit" class="form-control">   
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="docIso" class="block">Doc ISO</label>
                    <input type="text" ng-model="filtro.dociso" class="form-control">
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
               <div class="form-group">
                    <label for="sucursal" class="block">Sucursal</label>
                    <div class="input-group" style="display: flex;">
                        <ui-select ng-model="filtro.sucursal" theme="select2"
                            style="min-width: 180px; padding-left: 0px; padding-right: 0px;"
                            title="Seleccionar..." ng-change="obtenerAlmacenes(filtro.sucursal.id)">
                            <ui-select-match placeholder="seleccionar..."><span
                                    style="color:black">{{filtro.sucursal.nombre}}</span>
                            </ui-select-match>
                            <ui-select-choices
                                repeat="sucursal in sucursales | filter: $select.search track by sucursal.id">
                                <span>
                                    {{sucursal.nombre}}
                                </span>
                            </ui-select-choices>

                        </ui-select>
                        <span class="input-group-btn">
                            <button type="button" ng-show="filtro.sucursal" class="btn btn-purple btn-sm"
                                data-rel="tooltip" tooltip-placement="top" uib-tooltip="Quitar selección"
                                ng-click="filtro.sucursal = undefined;obtenerAlmacenes(filtro.sucursal.id)">
                                <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                            </button>
                        </span>
                    </div>
               </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="almacen" class="block">Almacén</label>
                    <div class="input-group" style="display: flex;">
                        <ui-select ng-model="filtro.almacen" ng-disabled="!filtro.sucursal" theme="select2"
                            style="min-width: 180px; padding-left: 0px; padding-right: 0px;"
                            title="Seleccionar...">
                            <ui-select-match placeholder="seleccionar..."><span
                                    style="color:black">{{filtro.almacen.nombre}}</span>
                            </ui-select-match>
                            <ui-select-choices
                                repeat="almacen in almacenes | filter: $select.search track by almacen.id">
                                <span>
                                    {{almacen.nombre}}
                                </span>
                            </ui-select-choices>

                        </ui-select>
                        <span class="input-group-btn">
                            <button type="button" ng-show="filtro.almacen" class="btn btn-purple btn-sm"
                                data-rel="tooltip" tooltip-placement="top" uib-tooltip="Quitar selección"
                                ng-click="filtro.almacen = undefined;">
                                <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                            </button>
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="estado" class="block">estado</label>
                    <select id="filEstadoOp" name="filEstadoOp" ng-model="filtro.estado" class="form-control"
                        ng-options="Estado_.id as Estado_.nombre for Estado_ in estadosPedido track by Estado_.id">
                        <option value="" selected>TODOS</option>
                    </select>
                </div>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-3">
                <div class="form-group">
                    <label for="usuario" class="block">Usuario</label>
                    <input type="text" ng-model="filtro.usuario" class="form-control">
                </div>
            </div>
        </div>
        <div class="clearfix">
            <div class="pull-right tableTools-container"></div>
        </div>
        <div class="table-header">
            Lista ordenes de servicio
            <div class="col-sm-8 inline pos-rel pull-right">
                <div ng-include src="'/templates/gral/fields-viewer.html'"></div>
            </div>
        </div>
        <div id="tabla-pedidos-wrapper" class="dataTables_wrapper form-inline no-footer">
            <div class="row">
                <div class="col-sm-6">
                    <div>
                        <label>
                            Mostrar <select ng-model="paginator.itemsPerPage" ng-change="paginator.getFirstPage()"
                                name="tabla-proveedores_length" aria-controls="tabla-proveedores"
                                class="form-control input-sm">
                                <option value="0">Todos</option>
                                <option ng-selected="true" value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select> Elementos</label>
                    </div>
                </div>
                <div class="col-sm-6" align="right">
                    <div class="col-sm-5">

                    </div>
                    <div class="col-sm-3">
                        <label style="margin-top: 5px;">Buscar:</label>
                    </div>
                    <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3" style="padding: 0px 0px;">
                        <div ng-class="{ 'button-glow' :!textSearch.length>0 }">
                            <input style="margin: 0px 0px !important; width: 100%;" id="searchBox" name="searchBox"
                                class="input-sm" type="search" ng-model="textSearch"
                                ng-model-options='{ debounce: 600 }'
                                ng-change="paginator.getSearch(textSearch,paginator.filter,$event)">
                        </div>

                    </div>
                </div>
            </div>
            <table id="tabla-pedidos" class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Nº</th>
                        <!-- <th>Movimiento</th> -->
                        <th ng-if="fieldViewer.getConfiguration().sucursal.show">
                            <a href="javascript:void(0)" ng-click="paginator.sortColumn('sucursal',obtenerLista)">
                                <span id="sucursal" class="sort fa fa-sort icon-only"></span>Sucursal</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().almacen.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('almacen',obtenerLista)">
                                <span id="almacen" class="sort fa fa-sort icon-only"></span>Almacen</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().proveedor.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('proveedor',obtenerLista)">
                                <span id="proveedor" class="sort fa fa-sort icon-only"></span>Proveedor</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().doc.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('doc',obtenerLista)">
                                <span id="doc" class="sort fa fa-sort icon-only"></span>Doc</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().doc_iso.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('doc_iso',obtenerLista)">
                                <span id="doc_iso" class="sort fa fa-sort icon-only"></span>Doc/ISO</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().factura.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('factura',obtenerLista)">
                                <span id="saldo" class="sort fa fa-sort icon-only"></span>Factura</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().importe.show">
                            Importe
                        </th>
                        <th ng-if="fieldViewer.getConfiguration().fecha.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('fecha',obtenerLista)">
                                <span id="saldo" class="sort fa fa-sort icon-only"></span>Fecha</span>
                            </a></th>
                        <th ng-if="fieldViewer.getConfiguration().fechaHora.show">
                            <a href="javascript:void(0)"
                                ng-click="paginator.sortColumn('fecha',obtenerLista)">
                                <span id="doc_iso" class="sort fa fa-sort icon-only"></span>Hora - Fecha</span>
                            </a></th>
                        <th>Usuario Creador</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="{{pedido.estado.nombre==='Anulado' && 'colorAnulado' ||''}}"
                        ng-repeat="pedido in listaPedidos">
                        <td>{{$index+1}}</td>
                        <!-- <td>pedido</td> -->
                        <td ng-if="fieldViewer.getConfiguration().sucursal.show">{{pedido.almacen.sucursal.nombre}}</td>
                        <td ng-if="fieldViewer.getConfiguration().almacen.show">{{pedido.almacen.nombre}}</td>
                        <td ng-if="fieldViewer.getConfiguration().proveedor.show">{{pedido.proveedor.razon_social}}</td>
                        <td ng-if="fieldViewer.getConfiguration().doc.show">{{pedido.numero_correlativo}}</td>
                        <td ng-if="fieldViewer.getConfiguration().doc_iso.show">{{pedido.numero_iso}}</td>
                        <td ng-if="fieldViewer.getConfiguration().factura.show">{{pedido.compra.factura}}</td>
                        <td ng-if="fieldViewer.getConfiguration().importe.show">{{pedido.importe | number:2}}</td>
                        <td ng-if="fieldViewer.getConfiguration().fecha.show">{{pedido.fecha | date:"dd/MM/yyyy"}}</td>
                        <td ng-if="fieldViewer.getConfiguration().fechaHora.show">{{pedido.fecha | date:"dd/MM/yyyy HH:mm"}}</td>
                        <td>{{pedido.usuario.nombre_usuario}}</td>
                        <td>
                            <span class="badge badge-warning"
                                ng-if="pedido.estado.nombre==='Pendiente'">{{pedido.estado.nombre}}</span>
                            <span class="badge badge-danger" ng-if="pedido.estado.nombre==='Anulado'">
                                {{pedido.estado.nombre}} </span>
                            <span class="badge badge-success" ng-if="pedido.estado.nombre==='Finalizado'">
                                {{pedido.estado.nombre}} </span>
                        </td>
                        <td>
                            <div class="hidden-sm hidden-xs action-buttons">

                                <a class="green" href="javascript:void(0)" ng-click="generarPdfpedido(pedido.id)"
                                    data-rel="tooltip" tooltip-placement="top" uib-tooltip="Imprimir">
                                    <i class="ace-icon fa fa-print bigger-130"></i>
                                </a>
                                <a class="blue" href="javascript:void(0)" ng-click="editarPedido(pedido, true)"
                                    data-rel="tooltip" tooltip-placement="top" uib-tooltip="Ver">
                                    <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                </a>
                                <a href="javascript:void(0)"
                                    ng-click="imprimirIsoOrdenServicio(pedido.id, pedido.configuracionesIso.version_impresion)"
                                    data-rel="tooltip" tooltip-placement="top" uib-tooltip="Imprimir ISO"
                                    tooltip-append-to-body="true">
                                    <img src="img/iso-print.png" height="20" width="20" alt="">
                                </a>
                                <a e-disabled="!aplicacion.puede_modificar" ng-if="pedido.estado.nombre==='Pendiente'"
                                    class="orange" href="javascript:void(0)" ng-click="editarPedido(pedido)">
                                    <i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
                                </a>
                                <a e-disabled="!aplicacion.puede_eliminar" class="red"
                                    ng-if="pedido.estado.nombre==='Pendiente'"
                                    ng-click="confirmarEliminarOrdenServicio(pedido)" data-rel="tooltip"
                                    tooltip-placement="top" uib-tooltip="Anular">
                                    <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                </a>

                            </div>
                            <div class="hidden-md hidden-lg">
                                <div class="inline pos-rel">
                                    <button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown"
                                        data-position="auto">
                                        <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                    </button>

                                    <ul
                                        class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                        <li>
                                            <a ng-if="pedido.activo" class="orange" href="javascript:void(0)"
                                                ng-click="editarPedido(pedido)">
                                                <i class="ace-icon fa fa-pencil-square-o bigger-130"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="green" href="javascript:void(0)"
                                                ng-click="generarPdfpedido(pedido)">
                                                <i class="ace-icon fa fa-print bigger-130"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="blue" href="javascript:void(0)" ng-click="ver(pedido)">
                                                <i class="ace-icon fa fa-search-plus bigger-130"></i>
                                            </a>
                                        </li>

                                        <li>
                                            <a class="red" ng-if="!pedido.eliminado&&pedido.estado.nombre==='Pendiente'"
                                                ng-click="eliminar(pedido)">
                                                <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="red" ng-if="!pedido.eliminado&&pedido.estado.nombre==='Parcial'"
                                                ng-click="eliminar(pedido)">
                                                <i class="ace-icon fa fa-ban bigger-130"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <div class="col-sm-6">
                    <div>
                        Mostrando página {{paginator.currentPage}} de {{paginator.pages.length}}
                    </div>
                </div>
                <div class="col-sm-6" align="right">
                    <ul class="pagination">
                        <li class="paginate_button">
                            <a href="javascript:void(0)" ng-click="paginator.getFirstPage()">Primero</a>
                        </li>
                        <li class="paginate_button">
                            <a href="javascript:void(0)" e-disabled="paginator.currentPage==1" ng-click="paginator.getPreviousPage()"> << </a>
                        </li>
                        <li class="paginate_button" ng-class="{active:paginator.currentPage==page}"
                            ng-repeat="page in paginator.pages" ng-if="abs(paginator.currentPage-page)<4">
                            <a e-disabled="paginator.currentPage==page" href="javascript:void(0)"
                                ng-click="paginator.getPage(page)">{{page}}</a>
                        </li>
                        <li class="paginate_button">
                            <a href="javascript:void(0)" e-disabled="paginator.currentPage==paginator.pages.length"
                                ng-click="paginator.getNextPage()">>></a>
                            </lidiv>
                        <li class="paginate_button">
                            <a href="javascript:void(0)" ng-click="paginator.getLastPage()">Ultimo</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal-nuevo-pedido-servicio" class="modal wizard-posicion">
    <div class="modal-content">
        <form ng-submit="guardarOrdenServicioPedido(pedido)">
            <div class="modal-header bg-blue">
                <h2 class="center">Nueva Solicitud y/o Orden de Material o Servicio</h2>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <b>PROVEEDOR</b><br>
                                    <input class="col-md-10" autocomplete="off" ng-if="pedido.ver!=true"
                                        ng-keypress="interceptarTecla($event,'factura',true)"
                                        data-validate="validate(required)" required type="text"
                                        ng-model="pedido.proveedor" placeholder="Ingrese la Razon Social"
                                        uib-typeahead="proveedor as proveedor.razon_social for proveedor in buscarProveedor($viewValue)"
                                        typeahead-wait-ms="1500" typeahead-template-url="templates/autocompletar.html"
                                        typeahead-show-hint="false" typeahead-min-length="1"
                                        typeahead-on-select="establecerProveedor($item, $model, $label, $event)">
                                    <button ng-if="pedido.ver!=true" type="button"
                                        ng-click="abrirmodalBusquedaProveedor()" class="btn btn-info btn-sm">
                                        <i class="ace-icon fa fa-search-plus bigger-110"></i>
                                    </button>
                                    <span ng-if="pedido.ver==true">{{pedido.proveedor.razon_social}}</span>
                                </div>
                                <div class="col-md-3">
                                    <b>FECHA</b><br>
                                    <input ng-if="pedido.ver!=true" autocomplete="off"
                                        class="date-picker-pedido form-control" type="text" ng-update-hidden required
                                        ng-model="pedido.fecha">
                                    <span ng-if="pedido.ver==true">{{pedido.fecha| date:'dd/MM/yyyy'}}</span>
                                </div>
                                <div class="col-md-3">
                                    <b>SUCURSAL</b><br>
                                    <ui-select class="col-md-11" style="padding-left: 15px; padding-right: 0px;"
                                        ng-model="pedido.sucursal" ng-if="pedido.ver!=true" required
                                        id="sucursal-pedido" name="sucursal" theme="select2" title=" Seleccionar..."
                                        ng-change="obtenerAlmacenes(pedido.sucursal)">
                                        <ui-select-match placeholder="seleccionar..." style="padding-left: 15px;">
                                            <span style="color:black">{{$select.selected.nombre}}</span>
                                        </ui-select-match>
                                        <ui-select-choices style="padding-left: 15px;"
                                            repeat="sucursal in sucursales | filter: $select.search track by sucursal.id">
                                            <span> {{sucursal.nombre}} </span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <span class="input-group-btn col-md-3" style="padding: 0px 0px;">
                                        <button type="button" ng-show="pedido.sucursal" class="btn btn-purple btn-sm"
                                            data-rel="tooltip" tooltip-placement="top" uib-tooltip="Quitar selección"
                                            ng-click="pedido.sucursal = undefined;obtenerAlmacenes(filtro.sucursal.id)">
                                            <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                                        </button>
                                    </span>
                                    <span style="padding-left: 15px;" ng-if="pedido.ver==true">
                                        {{pedido.sucursal.nombre}} </span>
                                </div>
                                <div class="col-md-3">
                                    <b>ALMACEN</b><br>
                                    <ui-select class="col-md-11" style="padding-left: 15px; padding-right: 0px;"
                                        ng-model="pedido.almacen" ng-if="pedido.ver!=true" required theme="select2"
                                        title="Seleccionar...">
                                        <ui-select-match placeholder="seleccionar..." style="padding-left: 15px;">
                                            <span style="color:black">{{$select.selected.nombre}}</span>
                                        </ui-select-match>
                                        <ui-select-choices
                                            repeat="almacen in almacenes | filter: $select.search track by almacen.id">
                                            <span> {{almacen.nombre}} </span>
                                        </ui-select-choices>

                                    </ui-select>

                                    <span class="input-group-btn col-md-3" style="padding: 0px 0px;"
                                        ng-if="pedido.ver != true">
                                        <button type="button" ng-show="pedido.almacen" class="btn btn-purple btn-sm"
                                            data-rel="tooltip" tooltip-placement="top" uib-tooltip="Quitar selección"
                                            ng-click="pedido.almacen = undefined;">
                                            <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                                        </button>
                                    </span>
                                    <span style="padding-left: 15px;" ng-if="pedido.ver==true">
                                        {{pedido.almacen.nombre}} </span>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <br><b>CONCEPTO</b><br>
                                    <select class="form-control" required id="pago" name="pago"
                                        ng-change="obtenerDetallesConcepto(pedido.concepto)" ng-model="pedido.concepto"
                                        ng-options="concepto as concepto.nombre for concepto in conceptos_orden_servicio track by concepto.id"
                                        data-placeholder="Click para escoger" ng-disabled="pedido.ver"></select>
                                    <span style="padding-left: 15px;" ng-if="pedido.ver==true">
                                        {{pedido.concepto.nombre}} </span>
                                </div>
                                <div class="col-md-3">
                                    <br><b>DETALLE</b><br>
                                    <select class="form-control" required
                                        ng-options="expedido as expedido.nombre for expedido in detalles_orden_servicio track by expedido.id"
                                        ng-model="pedido.detalle" ng-disabled="pedido.ver"></select>
                                    <span style="padding-left: 15px;" ng-if="pedido.ver==true">
                                        {{pedido.detalle.nombre}} </span>
                                </div>
                                <div class="col-md-3">
                                    <br><b>ÁREA SOLICITANTE</b><br>
                                    <ui-select class="col-md-11" style="padding-left: 15px; padding-right: 0px;"
                                        ng-model="pedido.area_solicitante" ng-if="pedido.ver!=true" required
                                        theme="select2" title="Seleccionar...">
                                        <ui-select-match placeholder="seleccionar..." style="padding-left: 15px;">
                                            <span style="color:black">{{$select.selected.nombre}}</span>
                                        </ui-select-match>
                                        <ui-select-choices
                                            repeat="area_solicitante in _areas_ | filter: $select.search track by area_solicitante.id">
                                            <span> {{area_solicitante.nombre}} </span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <span class="input-group-btn col-md-3" style="padding: 0px 0px;"
                                        ng-if="pedido.ver != true">
                                        <button type="button" ng-show="pedido.area_solicitante"
                                            class="btn btn-purple btn-sm" data-rel="tooltip" tooltip-placement="top"
                                            uib-tooltip="Quitar selección"
                                            ng-click="pedido.area_solicitante = undefined;">
                                            <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                                        </button>
                                    </span>
                                    <span style="padding-left: 15px;" ng-if="pedido.ver==true">
                                        {{pedido.area_solicitante.nombre}} </span>
                                </div>
                                <div class="col-md-3">
                                    <br><b>ÁREA DESTINO</b><br>
                                    <ui-select class="col-md-11" style="padding-left: 15px; padding-right: 0px;"
                                        ng-model="pedido.area_destino" ng-if="pedido.ver!=true" required theme="select2"
                                        title="Seleccionar...">
                                        <ui-select-match placeholder="seleccionar..." style="padding-left: 15px;">
                                            <span style="color:black">{{$select.selected.nombre}}</span>
                                        </ui-select-match>
                                        <ui-select-choices
                                            repeat="area_destino in _areas_ | filter: $select.search track by area_destino.id">
                                            <span> {{area_destino.nombre}} </span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <span class="input-group-btn col-md-3" style="padding: 0px 0px;"
                                        ng-if="pedido.ver != true">
                                        <button type="button" ng-show="pedido.area_destino"
                                            class="btn btn-purple btn-sm" data-rel="tooltip" tooltip-placement="top"
                                            uib-tooltip="Quitar selección" ng-click="pedido.area_destino = undefined;">
                                            <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                                        </button>
                                    </span>
                                    <span style="padding-left: 15px;" ng-if="pedido.ver==true">
                                        {{pedido.area_destino.nombre}} </span>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <br><b>CLIENTE</b>
                                    <div class="pull-right">
                                        <label>Usar empresa</label>
                                        <input class="ace ace-switch ace-switch-4" type="checkbox"
                                            ng-model="pedido.usar_empresa_nueva" ng-change="comprobarCliente(pedido)" />
                                        <span id="descuentos_generales" class="lbl check-descuento"></span>
                                    </div>
                                    <input class="form-control" type="text" ng-model="usuario.empresa.razon_social"
                                        ng-if="pedido.usar_empresa_nueva" readonly />

                                    <input class="form-control" ng-if="!pedido.usar_empresa_nueva"
                                        ng-keypress="interceptarTecla($event,'id_producto',true)" autocomplete="off"
                                        data-validate="validate(required)" id="razon_social" name="razon_social"
                                        required type="text" ng-model="pedido.cliente"
                                        placeholder="Ingrese la Razon Social"
                                        uib-typeahead="cliente as cliente.razon_social for cliente in buscarCliente($viewValue)"
                                        typeahead-wait-ms="1200" typeahead-template-url="templates/autocompletar.html"
                                        typeahead-show-hint="false" typeahead-min-length="1"
                                        typeahead-on-select="establecerCliente($item, $model, $label, $event)">
                                    <span ng-if="pedido.ver==true">{{pedido.observacion}}</span>
                                </div>
                                <div class="col-md-3">
                                    <br><b>OBSERVACIÓN</b><br>
                                    <input class="form-control" ng-if="pedido.ver!=true" autocomplete="off" type="text"
                                        id="observacion" ng-model="pedido.observacion">
                                    <span ng-if="pedido.ver==true">{{pedido.observacion}}</span>
                                </div>
                                <div class="col-md-3">
                                    <br><b>TIPO DE PAGO</b><br>
                                    <select class="form-control" required id="pago" name="pago"
                                        ng-model="pedido.tipoPago"
                                        ng-options="tipoPago as tipoPago.nombre for tipoPago in tiposPago track by tipoPago.id"
                                        data-placeholder="Click para escoger" ng-disabled="pedido.ver"></select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" ng-if="pedido.tipoPago.nombre_corto == 'CRE'">
                        <div class="row alinear-divs">
                            <div class="col-md-3 col-sm-offset-6">
                                <label>DIAS</label>
                                <input ng-disabled="pedido.ver" class="form-control"
                                    data-validate="validate(required,number)" required type="number"
                                    ng-model="pedido.dias_credito" />
                            </div>
                            <div class="col-md-3">
                                <label>SUJETO A DF</label>
                                <input disabled class="form-control" type="number" step="0.001"
                                    ng-model="pedido.importe" />
                            </div>

                        </div>
                    </div>
                    <div class="form-group" ng-if="pedido.tipoPago.nombre_corto == 'CRE'">
                        <div class="row alinear-divs">
                            <div class="col-md-3 col-sm-offset-6">
                                <label>A CUENTA (Bs)</label>
                                <input ng-disabled="pedido.ver" class="form-control" min="0.00" max="{{pedido.importe}}"
                                    data-validate="validate(required,number)" required type="number" step="0.001"
                                    ng-model="pedido.a_cuenta" ng-change="calcularSaldoPedido()" />
                            </div>
                            <div class="col-md-3">
                                <label>SALDO</label>
                                <input disabled class="form-control" type="number" step="0.001"
                                    ng-model="pedido.saldo" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-3">
                                <br><b>FECHA DE NECESIDAD</b><br>
                                <input class="date-picker-pedido form-control" ng-if="pedido.ver!=true"
                                    autocomplete="off" type="text" ng-update-hidden required
                                    ng-model="pedido.fecha_entrega">
                                <span ng-if="pedido.ver==true">{{pedido.fecha_entrega| date:'dd/MM/yyyy'}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="widget-box">
                                <div class="widget-header">
                                    <h4 class="widget-title">DESCRIPCIÓN ORDEN DE SERVICIO</h4>
                                </div>
                                <div class="widget-body">
                                    <div class="widget-main">
                                        <table class="table table-striped table-bordered table-hover">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        <label>DESCRIPCIÓN</label>
                                                    </th>
                                                    <th>
                                                        <label>UNID. MED.</label>
                                                    </th>
                                                    <th>
                                                        <label>CANT. (u)</label>
                                                    </th>
                                                    <th>
                                                        <label>P.U.</label>
                                                    </th>
                                                    <th>
                                                        <label>ACC.</label>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <input autocomplete="off" id="producto-pedido" type="text"
                                                            ng-model="detallePedido.descripcion"
                                                            placeholder="Ingrese la descripcion del servicio...">
                                                    </td>
                                                    <td>
                                                        <input onfocus="this.select();"
                                                            ng-keypress="interceptarTecla($event,'precio_unitario',false)"
                                                            step="0.001" min="0.001" class="col-xs-12"
                                                            ng-model="detallePedido.unidad_medida" type="text" />
                                                    </td>
                                                    <td>
                                                        <input onfocus="this.select();"
                                                            ng-keypress="interceptarTecla($event,'precio_unitario',false)"
                                                            step="0.001" min="0.001" class="col-xs-12"
                                                            ng-model="detallePedido.cantidad" type="number" />
                                                    </td>
                                                    <td>
                                                        <input onfocus="this.select();" id="precio_unitario"
                                                            ng-keypress="interceptarTecla($event,'agregar_detalle_venta',false)"
                                                            step="0.001" min="0.001" class="col-xs-12"
                                                            ng-model="detallePedido.costo_unitario" type="number" />
                                                        <input disabled hidden id="total" step="0.001" min="0.001"
                                                            class="col-xs-12" ng-model="detallePedido.total"
                                                            type="number" />
                                                    </td>
                                                    <td>
                                                        <button id="agregar_detalle_venta" type="button"
                                                            ng-disabled="!detallePedido.descripcion || !detallePedido.unidad_medida || !detallePedido.cantidad || !detallePedido.costo_unitario"
                                                            ng-click="agregardetallePedido(detallePedido)"
                                                            class="btn btn-success btn-sm">
                                                            <i class="ace-icon fa fa-plus bigger-110"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <!-- </form> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>
                                        <label>Nro.</label>
                                    </th>
                                    <th>
                                        <label>Descripción</label>
                                    </th>
                                    <th>
                                        <label>Unidad de medida</label>
                                    </th>
                                    <th>
                                        <label>Cantidad</label>
                                    </th>
                                    <th>
                                        <label>P.U</label>
                                    </th>
                                    <th>
                                        <label>total</label>
                                    </th>
                                    <th>
                                        <label>Acciones</label>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-if="!detalle.eliminado" ng-repeat="detalle in pedido.detalles">
                                    <td>
                                        {{$index+1}}
                                    </td>
                                    <td>
                                        {{detalle.descripcion}}
                                    </td>
                                    <td>
                                        {{detalle.unidad_medida}}
                                    </td>
                                    <td>
                                        {{detalle.cantidad | number:2}}
                                    </td>
                                    <td>
                                        {{detalle.costo_unitario | number:2}}
                                    </td>
                                    <td>
                                        {{detalle.total | number:2}}
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <button type="button" ng-if="pedido.ver!=true"
                                                ng-click="eliminarDetallePedido(detalle)"
                                                class="button-style btn red-style-button btn-xs">
                                                <i class="ace-icon fa fa-trash-o bigger-100"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="5">
                                        Total General
                                    </td>
                                    <td>{{pedido.importe | number:2}}</td>
                                    <td colspan="3"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
                <div class="modal-footer wizard-actions">
                    <button ng-if="pedido.ver!=true" type="submit" class="btn btn-success">GUARDAR</button>
                    <button type="button" ng-click="cerrarModalNuevoPedido()"
                        class="btn btn-danger pull-left">SALIR</button>
                </div>
        </form>
    </div>
</div>

<div id="dialog-productos-proveedor-configuracion" class="modal">
    <div class="row">
        <div class="container-fluid">
            <form name="formularioBusquedaInventario">
                <div class="col-md-6">
                    <div class="col-md-6">
                        <label>
                            Mostrar
                            <select ng-model="paginatorProductos.itemsPerPage" ng-change="buscarProductos(1)"
                                name="tabla-proveedores_length" aria-controls="tabla-productos"
                                class="form-control input-sm">
                                <option selected value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select> productos por página</label>
                    </div>
                    <div class="col-md-6">
                        <label>Grupos</label>
                        <select class="form-control" style="width:150px;" ng-change="buscarProductos(1)"
                            id="selectGruposProductosProveedor" ng-model="configuracionPorveedor.grupo"
                            ng-options="grupo as grupo.nombre for grupo in subGruposProducto track by grupo.id"
                            data-placeholder="Click para escoger">
                            <option value="" selected>Todos</option>
                        </select>
                        <button type="button" class="btn btn-primary" ng-click="actualizarProductosProveedor()">
                            Guardar
                        </button>
                    </div>
                </div>
                <div class="col-md-4">
                    <div id="tabla-productos_filter" class="dataTables_filter">
                        <label>Búsqueda:
                            <input type="search" class="form-control input-sm"
                                ng-model="configuracionPorveedor.textoBusqueda"
                                ng-keydown="verificarPulso($event,configuracionPorveedor.textoBusqueda)">
                        </label>
                    </div>
                </div>
                <div class="col-md-2">
                    <button type="button" ng-click="cerrarModalProductosProveedor()" class="btn btn-danger pull-right">
                        <i class="ace-icon fa fa-close align-top bigger-125"></i>
                    </button>
                </div>
            </form>
            <div class="row">
                <div class="container-fluid">
                    <table id="tabla-productos" class="table table-striped table-bordered table-hover table-responsive">
                        <thead>
                            <tr>
                                <th class="center">
                                    Nº
                                </th>
                                <th class="center">
                                    <label class="pos-rel">
                                        <input type="checkbox" class="ace"
                                            ng-model="seleccionProductosProveedor.seleccionar_todos"
                                            ng-click="seleccionarTodosParaAsignar()" />
                                        <span class="lbl"></span>
                                    </label>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('codigo')">Código
                                        <span id="codigo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('nombre')">Nombre
                                        <span id="nombre" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th>Imagen</th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('unidad_medida')">Unidad de Medida
                                        <span id="unidad_medida" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('precio_unitario')">Precio Unitario
                                        <span id="precio_unitario" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('inventario_minimo')">Inventario Mínimo
                                        <span id="inventario_minimo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('descripcion')">Descripcion
                                        <span id="descripcion" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>

                                <th class="center">
                                    <a href="javascript:void(0)" ng-click="paginatorProductos.sortColumn('grupo')">Grupo
                                        <span id="grupo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductos.sortColumn('subgrupo')">Subgrupo
                                        <span id="subgrupo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    Tipo Producto
                                </th>
                                <th>Acciones</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="producto in productosAsignacionProveedor">
                                <td class="center">
                                    {{($index+1)+(paginatorProductos.itemsPerPage*(paginatorProductos.currentPage-1))}}
                                </td>
                                <td class="center">
                                    <label class="pos-rel">
                                        <input type="checkbox" class="ace" ng-model="producto.seleccionado"
                                            ng-click="modificarListaProductosProveedor(producto)" />
                                        <span class="lbl"></span>
                                    </label>
                                </td>
                                <td>
                                    {{producto.codigo}}
                                </td>
                                <td>
                                    {{producto.nombre}}
                                </td>
                                <td>
                                    <img ng-src="{{producto.imagen}}" width="50">
                                </td>
                                <td>{{producto.unidad_medida}}</td>
                                <td>{{producto.precio_unitario | number:2}}</td>

                                <td>
                                    {{producto.inventario_minimo}}
                                </td>
                                <td>
                                    {{producto.descripcion}}
                                </td>

                                <td>
                                    {{producto.grupo}}
                                </td>
                                <td>
                                    {{producto.subgrupo}}
                                </td>
                                <td>
                                    {{producto.tipoProducto}}
                                </td>
                                <td>
                                    <div class="hidden-sm hidden-xs action-buttons">


                                        <a class="red" href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar"
                                            ng-click="mostrarConfirmacionEliminacion(producto)">
                                            <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                        </a>
                                    </div>

                                    <div class="hidden-md hidden-lg">
                                        <div class="inline pos-rel">
                                            <button class="btn btn-minier btn-yellow dropdown-toggle"
                                                data-toggle="dropdown" data-position="auto">
                                                <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                            </button>

                                            <ul
                                                class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                                <li>
                                                    <a href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar"
                                                        ng-click="mostrarConfirmacionEliminacion(producto)"
                                                        class="tooltip-error" data-rel="tooltip" title="Delete">
                                                        <span class="red">
                                                            <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                        </span>
                                                    </a>
                                                </li>

                                            </ul>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6">
                    <div class="dataTables_info" id="tabla-productos_info" role="status" aria-live="polite">Mostrando
                        página {{paginatorProductos.currentPage}} de {{paginatorProductos.pages.length}}</div>
                </div>
                <div class="col-xs-6">
                    <div class="dataTables_paginate paging_simple_numbers" id="tabla-productos_paginate">
                        <ul class="pagination">
                            <li class="paginate_button previous" aria-controls="tabla-productos" tabindex="0"
                                id="tabla-productos_previous">
                                <a href="javascript:void(0)" ng-click="buscarProductos(1)">Primero</a>
                            </li>
                            <li class="paginate_button previous" ng-class="{disabled:paginatorProductos.currentPage==1}"
                                aria-controls="tabla-productos" tabindex="0" id="tabla-productos_previous">
                                <a href="javascript:void(0)" e-disabled="paginatorProductos.currentPage==1"
                                    ng-click="buscarProductos(paginatorProductos.currentPage-1)">a
                                    << a</a>
                            </li>
                            <li class="paginate_button" ng-class="{active:paginatorProductos.currentPage==pagina}"
                                aria-controls="tabla-productos" tabindex="0"
                                ng-repeat="pagina in paginatorProductos.pages"
                                ng-if="abs(paginatorProductos.currentPage-pagina)<4">
                                <a href="javascript:void(0)" ng-click="buscarProductos(pagina)">{{pagina}}</a>
                            </li>
                            <li class="paginate_button"
                                ng-class="{disabled:paginatorProductos.currentPage==paginatorProductos.pages.length}"
                                aria-controls="tabla-productos" tabindex="0" id="tabla-productos_next">
                                <a href="javascript:void(0)"
                                    e-disabled="paginatorProductos.currentPage==paginatorProductos.pages.length"
                                    ng-click="buscarProductos(paginatorProductos.currentPage+1)">>></a>
                            </li>
                            <li class="paginate_button previous" aria-controls="tabla-productos" tabindex="0"
                                id="tabla-productos_previous">
                                <a href="javascript:void(0)"
                                    ng-click="buscarProductos(paginatorProductos.pages.length)">Ultimo</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="dialog-Busqueda-proveedor" style="overflow-x:hidden;" class="modal">
    <div class="row">
        <div class="widget-header">
            <div class="container-fluid">
                <div class="col-md-8">
                    <label>Búsqueda:
                        <input type="search" class="form-control input-sm" ng-model="textoBusquedaProveedor"
                            ng-change="filtrarProveedores(textoBusquedaProveedor)">
                    </label>
                </div>
                <div class="col-md-4">
                    <button type="button" ng-click="cerrarModalBusquedaProveedor()" class="btn btn-danger">
                        <i class="ace-icon fa fa-close align-top bigger-125"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="container-fluid">
            <div class="widget-box">
                <div class="widget-body">
                    <div class="widget-main">
                        <div class="table-fixed-header">
                            <table class="table table-striped table-bordered table-hover ">
                                <thead fix-head class="table-head-color">
                                    <tr>
                                        <th>
                                            <label for="">N°</label>
                                        </th>
                                        <th>
                                            <label for="">
                                                <a href="javascript:void(0)"
                                                    ng-click="ordenarBusquedaPorveedores('nit')">Nit <span
                                                        ng-if="direccionFiltroProveedores === 'asc'"
                                                        class="sort fa icon-only fa-caret-down"></span><span
                                                        ng-if="direccionFiltroProveedores === 'desc'"
                                                        class="sort fa icon-only fa-caret-up"></span></a>
                                            </label>
                                        </th>
                                        <th>
                                            <a href="javascript:void(0)"
                                                ng-click="ordenarBusquedaPorveedores('razon_social')">Razon Social <span
                                                    ng-if="direccionFiltroProveedores === 'asc'"
                                                    class="sort fa icon-only fa-caret-down"></span><span
                                                    ng-if="direccionFiltroProveedores === 'desc'"
                                                    class="sort fa icon-only fa-caret-up"></span> </a>
                                        </th>
                                        <th>
                                            Acciones
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="proveedor in proveedoresProcesado">
                                        <td>
                                            {{$index+1}}
                                        </td>
                                        <td>
                                            {{proveedor.nit}}
                                        </td>
                                        <td>
                                            {{proveedor.razon_social}}
                                        </td>
                                        <td>
                                            <a href="javascript:void(0)"
                                                ng-click="establecerProveedor(proveedor,true)">SELECCIONAR</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="dialog-productos-proveedor-asignados" class="modal">
    <div class="row">
        <div class="container-fluid">
            <form name="formularioBusquedaInventario">
                <div class="col-md-6">
                    <div class="col-md-6">
                        <label>
                            Mostrar
                            <select ng-model="paginatorProductosAsignados.itemsPerPage"
                                ng-change="buscarProductosAsignados(1)" name="tabla-proveedores_length"
                                aria-controls="tabla-productos" class="form-control input-sm">
                                <option selected value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select> productos por página</label>
                    </div>
                    <div class="col-md-6">
                        <label>Grupos</label>
                        <select class="form-control" style="width:150px;" ng-change="buscarProductosAsignados(1)"
                            id="selectGruposProductosAsignados" ng-model="productosAsignadosPorveedor.grupo"
                            ng-options="grupo as grupo.nombre for grupo in subGruposProducto track by grupo.id"
                            data-placeholder="Click para escoger">
                            <option value="" selected>Todos</option>
                        </select>
                        <button type="button" class="btn btn-primary" ng-click="agregarProductosSeleccionados()">
                            Guardar
                        </button>
                    </div>
                </div>
                <div class="col-md-4">
                    <div id="tabla-productos_filter" class="dataTables_filter">
                        <label>Búsqueda:
                            <input type="search" class="form-control input-sm"
                                ng-model="productosAsignadosPorveedor.textoBusqueda"
                                ng-keydown="verificarPulsoAsignados($event,productosAsignadosPorveedor.textoBusqueda)">
                        </label>
                    </div>
                </div>
                <div class="col-md-2">
                    <button type="button" ng-click="cerrarModalProductosAsignadosProveedor(true)"
                        class="btn btn-danger pull-right">
                        <i class="ace-icon fa fa-close align-top bigger-125"></i>
                    </button>
                </div>
            </form>
            <div class="row">
                <div class="container-fluid">
                    <table id="tabla-productos" class="table table-striped table-bordered table-hover table-responsive">
                        <thead>
                            <tr>
                                <th class="center">
                                    Nº
                                </th>
                                <th class="center">
                                    <label class="pos-rel">
                                        <input type="checkbox" class="ace"
                                            ng-model="seleccionProductosProveedorAsignados.seleccionar_todos"
                                            ng-click="seleccionarTodosAsignados()" />
                                        <span class="lbl"></span>
                                    </label>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('codigo')">Código
                                        <span id="codigo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('nombre')">Nombre
                                        <span id="nombre" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th>Imagen</th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('unidad_medida')">Unidad de
                                        Medida
                                        <span id="unidad_medida" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('precio_unitario')">Precio
                                        Unitario
                                        <span id="precio_unitario" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('inventario_minimo')">Inventario
                                        Mínimo
                                        <span id="inventario_minimo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('descripcion')">Descripcion
                                        <span id="descripcion" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>

                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('grupo')">Grupo
                                        <span id="grupo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    <a href="javascript:void(0)"
                                        ng-click="paginatorProductosAsignados.sortColumn('subgrupo')">Subgrupo
                                        <span id="subgrupo" class="sort fa fa-sort icon-only"></span>
                                    </a>
                                </th>
                                <th class="center">
                                    Tipo Producto
                                </th>
                                <th>Acciones</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="producto in productosAsignadosProveedor">
                                <td class="center">
                                    {{($index+1)+(paginatorProductosAsignados.itemsPerPage*(paginatorProductosAsignados.currentPage-1))}}
                                </td>
                                <td class="center">
                                    <label class="pos-rel">
                                        <input type="checkbox" class="ace" ng-model="producto.seleccionado"
                                            ng-click="seleccionarProductoAsignado(producto)" />
                                        <span class="lbl"></span>
                                    </label>
                                </td>
                                <td>
                                    {{producto.codigo}}
                                </td>
                                <td>
                                    {{producto.nombre}}
                                </td>
                                <td>
                                    <img ng-src="{{producto.imagen}}" width="50">
                                </td>
                                <td>{{producto.unidad_medida}}</td>
                                <td>{{producto.precio_unitario | number:2}}</td>

                                <td>
                                    {{producto.inventario_minimo}}
                                </td>
                                <td>
                                    {{producto.descripcion}}
                                </td>

                                <td>
                                    {{producto.grupo}}
                                </td>
                                <td>
                                    {{producto.subgrupo}}
                                </td>
                                <td>
                                    {{producto.tipoProducto}}
                                </td>
                                <td>
                                    <div class="hidden-sm hidden-xs action-buttons">


                                        <a class="red" href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar"
                                            ng-click="mostrarConfirmacionEliminacion(producto)">
                                            <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                        </a>
                                    </div>

                                    <div class="hidden-md hidden-lg">
                                        <div class="inline pos-rel">
                                            <button class="btn btn-minier btn-yellow dropdown-toggle"
                                                data-toggle="dropdown" data-position="auto">
                                                <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                            </button>

                                            <ul
                                                class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                                <li>
                                                    <a href="javascript:void(0)" e-disabled="!aplicacion.puede_eliminar"
                                                        ng-click="mostrarConfirmacionEliminacion(producto)"
                                                        class="tooltip-error" data-rel="tooltip" title="Delete">
                                                        <span class="red">
                                                            <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                        </span>
                                                    </a>
                                                </li>

                                            </ul>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6">
                    <div class="dataTables_info" id="tabla-productos_info" role="status" aria-live="polite">Mostrando
                        página {{paginatorProductosAsignados.currentPage}} de
                        {{paginatorProductosAsignados.pages.length}}</div>
                </div>
                <div class="col-xs-6">
                    <div class="dataTables_paginate paging_simple_numbers" id="tabla-productos_paginate">
                        <ul class="pagination">
                            <li class="paginate_button previous" aria-controls="tabla-productos" tabindex="0"
                                id="tabla-productos_previous">
                                <a href="javascript:void(0)" ng-click="buscarProductosAsignados(1)">Primero</a>
                            </li>
                            <li class="paginate_button previous"
                                ng-class="{disabled:paginatorProductosAsignados.currentPage==1}"
                                aria-controls="tabla-productos" tabindex="0" id="tabla-productos_previous">
                                <a href="javascript:void(0)" e-disabled="paginatorProductosAsignados.currentPage==1"
                                    ng-click="buscarProductosAsignados(paginatorProductosAsignados.currentPage-1)">
                                    << </a>
                            </li>
                            <li class="paginate_button"
                                ng-class="{active:paginatorProductosAsignados.currentPage==pagina}"
                                aria-controls="tabla-productos" tabindex="0"
                                ng-repeat="pagina in paginatorProductosAsignados.pages"
                                ng-if="abs(paginatorProductosAsignados.currentPage-pagina)<4">
                                <a href="javascript:void(0)" ng-click="buscarProductosAsignados(pagina)">{{pagina}}</a>
                            </li>
                            <li class="paginate_button"
                                ng-class="{disabled:paginatorProductosAsignados.currentPage==paginatorProductosAsignados.pages.length}"
                                aria-controls="tabla-productos" tabindex="0" id="tabla-productos_next">
                                <a href="javascript:void(0)"
                                    e-disabled="paginatorProductosAsignados.currentPage==paginatorProductosAsignados.pages.length"
                                    ng-click="buscarProductosAsignados(paginatorProductosAsignados.currentPage+1)">>></a>
                            </li>
                            <li class="paginate_button previous" aria-controls="tabla-productos" tabindex="0"
                                id="tabla-productos_previous">
                                <a href="javascript:void(0)"
                                    ng-click="buscarProductosAsignados(paginatorProductosAsignados.pages.length)">Ultimo</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="dialog-productos-pedidos" class="modal">
    <div class="row">
        <div class="container-fluid">

        </div>
        <form name="formularioBusquedaInventario" novalidate>
            <div class="col-xs-6">
                <div class="dataTables_length" id="tabla-productos_length">
                    <label>
                        Mostrar
                        <select ng-model="itemsPorPagina"
                            ng-change="buscarInventarios(almacenBusqueda.id,1,itemsPorPagina,textoBusqueda,columna,direccion,cantidadInv)"
                            name="tabla-proveedores_length" aria-controls="tabla-productos"
                            class="form-control input-sm">
                            <option selected value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select> productos por página</label>
                </div>
            </div>
            <div class="col-xs-4">
                <div id="tabla-productos_filter" class="dataTables_filter">
                    <label>Búsqueda:
                        <input type="search" class="form-control input-sm" ng-model="textoBusqueda" placeholder=""
                            aria-controls="tabla-productos" ng-keydown="verificarPulso($event,textoBusqueda)">
                    </label>
                </div>
            </div>
            <div class="col-xs-2">
                <button ng-disabled="formularioBusquedaInventario.$invalid" type="button"
                    ng-click="cerrarPopup(idModalInventarioPedidos)" class="btn btn-danger">
                    <i class="ace-icon fa fa-close align-top bigger-125"></i>
                </button>
            </div>
        </form>
    </div>
    <div class="row">
        <table id="tabla-inventarios" class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th class="center">
                        #
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('codigo')">Código
                            <span id="codigop" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('nombre')">Producto
                            <span id="nombrep" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('descripcion')">Descripcion
                            <span id="descripcionp" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('cantidad')">Cantidad Total
                            <span id="cantidadp" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('precio_unitario')">Precio Unitario
                            <span id="precio_unitariop" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('fecha_vencimiento')">Fecha Venc.
                            Próximo
                            <span id="fecha_vencimientop" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('grupo')">Grupo
                            <span id="grupop" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:void(0)" ng-click="clasificarColumna('subgrupo')">Sub Grupo
                            <span id="subgrupop" class="sort ace-icon fa fa-sort icon-only"></span>
                        </a>
                    </th>
                    <th>Acciones</th>
                </tr>
            </thead>

            <tbody>
                <tr ng-repeat="producto in productosPedidoNuevo">
                    <td class="center">
                        {{$index+1}}
                    </td>
                    <td>{{producto.codigo}}</td>
                    <td>{{producto.nombre}}
                    </td>
                    <td>{{producto.descripcion}}
                    </td>
                    <td>
                        <b>{{producto.cantidad_total}}</b>
                    </td>
                    <td>{{producto.precio_unitario}}</td>
                    <td>{{producto.fecha_vencimiento | date:'dd/MM/yyyy'}}</td>
                    <td>{{producto.grupo}}</td>
                    <td>{{producto.subgrupo}}</td>
                    <td>
                        <button type="button" ng-click="establecerProducto(producto)" class="btn btn-success btn-sm">
                            <i class="ace-icon fa fa-check icon-only"></i>
                        </button>
                        <!-- <button ng-if="venta.id" type="button" ng-click="establecerProductoEdicionVenta(producto)"
                            class="btn btn-success btn-sm">
                            <i class="ace-icon fa fa-check icon-only"></i>
                        </button> -->
                        <!--<button type="button" ng-click="verDetalleInventario(producto)" class="btn btn-info btn-sm">
                                <i class="ace-icon fa fa-search-plus icon-only"></i>
                            </button>-->
                        <table id="{{producto.id}}" style="display:none;"
                            class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Cantidad</th>
                                    <th>Fecha Venc.</th>
                                    <th>Lote</th>
                                    <th>Costo Unitario</th>
                                    <th>Costo Total</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="inventario in producto.inventarios">
                                    <td>{{$index+1}}</td>
                                    <td>{{inventario.cantidad}}</td>
                                    <td>{{inventario.fecha_vencimiento | date:"dd/MM/yyyy "}}</td>
                                    <td>{{inventario.lote}}</td>
                                    <td>{{inventario.costo_unitario}}</td>
                                    <td>{{inventario.costo_total}}</td>
                                    <td>
                                        <a href="javascript:void(0)" e-disabled="!aplicacion.puede_modificar"
                                            ng-click="abrirPopupActualizacionInventario(inventario)"
                                            class="tooltip-success" data-rel="tooltip" title="Edit">
                                            <span class="green">
                                                <i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
                                            </span>
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <b>Total Almacen</b>
                                    </td>
                                    <td>{{sumarCantidadAlmacen(producto.inventarios,sucursal,almacen)}}</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>{{sumarCostoTotalAlmacen(producto.inventarios,sucursal,almacen)}}</td>
                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <div class="col-xs-6">
            <div class="dataTables_info" id="tabla-productos_info" role="status" aria-live="polite">Mostrando página
                {{paginaActual}}
                de {{paginas.length}}</div>
        </div>
        <div class="col-xs-6">
            <div class="dataTables_paginate paging_simple_numbers" id="tabla-productos_paginate">
                <ul class="pagination">
                    <li class="paginate_button previous" aria-controls="tabla-productos" tabindex="0"
                        id="tabla-productos_previous">
                        <a href="javascript:void(0)"
                            ng-click="buscarInventarios(almacenBusqueda.id,1,itemsPorPagina,textoBusqueda,columna,direccion,cantidadInv)">Primero</a>
                    </li>
                    <li class="paginate_button previous" ng-class="{disabled:paginaActual==1}"
                        aria-controls="tabla-productos" tabindex="0" id="tabla-productos_previous">
                        <a href="javascript:void(0)" e-disabled="paginaActual==1"
                            ng-click="buscarInventarios(almacenBusqueda.id,paginaActual-1,itemsPorPagina,textoBusqueda,columna,direccion,cantidadInv)">
                            << </a>
                    </li>
                    <li class="paginate_button" ng-class="{active:paginaActual==pagina}" aria-controls="tabla-productos"
                        tabindex="0" ng-repeat="pagina in paginas" ng-if="abs(paginaActual-pagina)<4">
                        <a href="javascript:void(0)"
                            ng-click="buscarInventarios(almacenBusqueda.id,pagina,itemsPorPagina,textoBusqueda,columna,direccion,cantidadInv)">{{pagina}}</a>
                    </li>
                    <li class="paginate_button" ng-class="{disabled:paginaActual==paginas.length}"
                        aria-controls="tabla-productos" tabindex="0" id="tabla-productos_next">
                        <a href="javascript:void(0)" e-disabled="paginaActual==paginas.length"
                            ng-click="buscarInventarios(almacenBusqueda.id,paginaActual+1,itemsPorPagina,textoBusqueda,columna,direccion,cantidadInv)">>></a>
                    </li>
                    <li class="paginate_button previous" aria-controls="tabla-productos" tabindex="0"
                        id="tabla-productos_previous">
                        <a href="javascript:void(0)"
                            ng-click="buscarInventarios(almacenBusqueda.id,paginas.length,itemsPorPagina,textoBusqueda,columna,direccion,cantidadInv)">Ultimo</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>


<div id="modal-editar-pedido-servicio" class="modal wizard-posicion">
    <div class="modal-content">
        <form ng-submit="guardarEdicionOrdenServicio(pedido)">
            <div class="modal-header bg-blue">
                <h2 ng-if="!pedido.ver" class="center">Editar Solicitud y/o Orden de Material o Servicio</h2>
                <h2 ng-if="pedido.ver" class="center">Solicitud y/o Orden de Material o Servicio</h2>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <b>PROVEEDOR</b><br>
                                    <input class="col-md-10" autocomplete="off" ng-disabled="pedido.ver"
                                        data-validate="validate(required)" required type="text"
                                        ng-model="pedido.proveedor" placeholder="Ingrese la Razon Social"
                                        uib-typeahead="proveedor as proveedor.razon_social for proveedor in buscarProveedor($viewValue)"
                                        typeahead-wait-ms="1500" typeahead-template-url="templates/autocompletar.html"
                                        typeahead-show-hint="false" typeahead-min-length="1"
                                        typeahead-on-select="establecerProveedor($item, $model, $label, $event)">
                                    <button ng-if="!pedido.ver" type="button" ng-click="abrirmodalBusquedaProveedor()"
                                        class="btn btn-info btn-sm">
                                        <i class="ace-icon fa fa-search-plus bigger-110"></i>
                                    </button>
                                    <!--  <span ng-if="pedido.ver==true">{{pedido.proveedor.razon_social}}</span> -->

                                </div>
                                <div class="col-md-3">
                                    <b>FECHA</b><br>
                                    <input ng-disabled="pedido.ver" class="date-picker-pedido form-control" type="text"
                                        ng-update-hidden required ng-model="pedido.fecha">
                                </div>
                                <div class="col-md-3">
                                    <b>SUCURSAL</b><br>
                                    <input class="form-control" autocomplete="off" type="text" id="sucursal"
                                        readonly="readonly" ng-model="pedido.sucursal.nombre" />
                                </div>
                                <div class="col-md-3">
                                    <b>ALMACEN</b><br>
                                    <input class="form-control" autocomplete="off" type="text" id="sucursal"
                                        disabled="disabled" ng-model="pedido.almacen.nombre">
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <br><b>CONCEPTO</b><br>
                                    <select ng-disabled="pedido.ver" class="form-control" required id="pago" name="pago"
                                        ng-change="obtenerDetallesConcepto(pedido.concepto)" ng-model="pedido.concepto"
                                        ng-options="concepto as concepto.nombre for concepto in conceptos_orden_servicio track by concepto.id"
                                        data-placeholder="Click para escoger"></select>
                                </div>
                                <div class="col-md-3">
                                    <br><b>DETALLE</b><br>
                                    <select ng-disabled="pedido.ver" class="form-control" required id="pago" name="pago"
                                        ng-model="pedido.detalle"
                                        ng-options="detalle as detalle.nombre for detalle in detalles_orden_servicio track by detalle.id"
                                        data-placeholder="Click para escoger"></select>
                                </div>
                                <div class="col-md-3">
                                    <br><b>ÁREA SOLICITANTE</b><br>
                                    <ui-select ng-disabled="pedido.ver" class="col-md-10"
                                        style="padding-left: 15px; padding-right: 0px;"
                                        ng-model="pedido.area_solicitante" required theme="select2"
                                        title="Seleccionar...">
                                        <ui-select-match placeholder="seleccionar..." style="padding-left: 15px;">
                                            <span style="color:black">{{$select.selected.nombre}}</span>
                                        </ui-select-match>
                                        <ui-select-choices
                                            repeat="area_solicitante in _areas_ | filter: $select.search track by area_solicitante.id">
                                            <span> {{area_solicitante.nombre}} </span>
                                        </ui-select-choices>

                                    </ui-select>

                                    <span class="input-group-btn col-md-3" style="padding: 0px 0px;"
                                        ng-if="!pedido.ver">
                                        <button type="button" ng-show="pedido.area_solicitante"
                                            class="btn btn-purple btn-sm" data-rel="tooltip" tooltip-placement="top"
                                            uib-tooltip="Quitar selección"
                                            ng-click="pedido.area_solicitante = undefined;">
                                            <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                                        </button>
                                    </span>
                                </div>
                                <div class="col-md-3">
                                    <br><b>ÁREA DESTINO</b><br>
                                    <ui-select ng-disabled="pedido.ver" class="col-md-10"
                                        style="padding-left: 15px; padding-right: 0px;" ng-model="pedido.area_destino"
                                        required theme="select2" title="Seleccionar...">
                                        <ui-select-match placeholder="seleccionar..." style="padding-left: 15px;">
                                            <span style="color:black">{{$select.selected.nombre}}</span>
                                        </ui-select-match>
                                        <ui-select-choices
                                            repeat="area_destino in _areas_ | filter: $select.search track by area_destino.id">
                                            <span> {{area_destino.nombre}} </span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <span class="input-group-btn col-md-3" style="padding: 0px 0px;"
                                        ng-if="!pedido.ver">
                                        <button type="button" ng-show="pedido.area_destino"
                                            class="btn btn-purple btn-sm" data-rel="tooltip" tooltip-placement="top"
                                            uib-tooltip="Quitar selección" ng-click="pedido.area_destino = undefined;">
                                            <span class="ace-icon fa fa-trash icon-on-right bigger-110"></span>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <br><b>CLIENTE</b>

                                    <div ng-if="!pedido.ver" class="pull-right">
                                        <label>Usar empresa</label>
                                        <!--  <label > -->
                                        <input class="ace ace-switch ace-switch-4" type="checkbox"
                                            ng-model="pedido.usar_empresa"
                                            ng-change="comprobarClienteEdicion(pedido)" />
                                        <span id="descuentos_generales" class="lbl check-descuento"></span>
                                        <!--  </label>  -->
                                    </div>
                                    <input ng-disabled="pedido.ver" class="form-control" type="text"
                                        ng-model="usuario.empresa.razon_social" ng-if="pedido.usar_empresa" readonly />

                                    <input ng-disabled="pedido.ver" ng-if="!pedido.usar_empresa" class="form-control"
                                        ng-keypress="interceptarTecla($event,'id_producto',true)" autocomplete="off"
                                        data-validate="validate(required)" id="razon_social" name="razon_social"
                                        required type="text" ng-model="pedido.clientes.razon_social"
                                        placeholder="Ingrese la Razon Social"
                                        uib-typeahead="cliente as cliente.razon_social for cliente in buscarCliente($viewValue)"
                                        typeahead-wait-ms="1200" typeahead-template-url="templates/autocompletar.html"
                                        typeahead-show-hint="false" typeahead-min-length="1"
                                        typeahead-on-select="establecerCliente($item, $model, $label, $event)">
                                </div>
                                <div class="col-md-3">
                                    <br><b>OBSERVACIÓN</b><br>
                                    <input ng-disabled="pedido.ver" class="form-control" type="text" id="observacion"
                                        ng-model="pedido.observacion">
                                </div>

                                <div class="col-md-3">
                                    <br><b>TIPO DE PAGO</b><br>
                                    <select ng-disabled="pedido.ver" class="form-control" required id="pago" name="pago"
                                        ng-model="pedido.tipoPago"
                                        ng-options="tipoPago as tipoPago.nombre for tipoPago in tiposPago track by tipoPago.id"
                                        data-placeholder="Click para escoger"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group" ng-if="pedido.tipoPago.nombre_corto == 'CRE'">
                    <div class="row alinear-divs">
                        <div class="col-md-3 col-sm-offset-6">
                            <label>DIAS</label><br>
                            <input ng-disabled="pedido.ver" class="form-control"
                                data-validate="validate(required,number)" required type="number"
                                ng-model="pedido.dias_credito" />
                        </div>
                        <div class="col-md-3">
                            <label>SUJETO A DF</label><br>
                            <input disabled class="form-control" type="number" step="0.001"
                                value="{{pedido.importe }}" />
                            <!-- <input disabled class="form-control" type="number" step="0.001" ng-model="pedido.total" /> -->
                        </div>

                    </div>
                </div>
                <div class="form-group" ng-if="pedido.tipoPago.nombre_corto == 'CRE'">
                    <div class="row alinear-divs">
                        <div class="col-md-3 col-sm-offset-6">
                            <label>A CUENTA (Bs)</label><br>
                            <input ng-disabled="pedido.ver" class="form-control"
                                data-validate="validate(required,number)" required min="0.00" max="{{pedido.importe}}"
                                type="number" step="0.001" ng-model="pedido.a_cuenta" value="0.0"
                                ng-change="calcularSaldoPedido()" />
                        </div>
                        <div class="col-md-3">
                            <label>SALDO</label><br>
                            <input disabled class="form-control" type="number" step="0.001" ng-model="pedido.saldo" />
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-3">
                                <b>FECHA DE NECESIDAD</b><br>
                                <input ng-disabled="pedido.ver" class="date-picker-pedido form-control " type="text"
                                    ng-update-hidden required ng-model="pedido.fecha_entrega">
                            </div>
                            <div ng-if="!pedido.ver" class="col-md-3"><br>
                                <button class="button-glow" type='button' ng-click="mostrarBusquedaServicio()"
                                    data-rel="tooltip" tooltip-placement="left"
                                    uib-tooltip="Agregar detalle de una nueva orden de servicio">
                                    <i class="ace-icon fa fa-plus bigger-140"> Agregar</i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group" ng-if="mostarBusquedaServicios">
                    <div class="row">
                        <div class="widget-box">
                            <div class="widget-header">
                                <h4 class="widget-title">DESCRIPCIÓN ORDEN DE SERVICIO</h4>
                            </div>
                            <div class="widget-body">
                                <div class="widget-main">
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <label>DESCRIPCIÓN</label>
                                                </th>
                                                <th>
                                                    <label>UNID. MED.</label>
                                                </th>
                                                <th>
                                                    <label>CANT. (u)</label>
                                                </th>
                                                <th>
                                                    <label>P.U.</label>
                                                </th>
                                                <th>
                                                    <label>ACC.</label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <input autocomplete="off" type="text"
                                                        ng-model="detallePedidoo.descripcion"
                                                        placeholder="Ingrese el detalle de servicio..">
                                                </td>
                                                <td>
                                                    <input onfocus="this.select();"
                                                        ng-keypress="interceptarTecla($event,'precio_unitario',false)"
                                                        step="0.001" min="0.001" class="col-xs-12"
                                                        ng-model="detallePedidoo.unidad_medida" type="text" />
                                                </td>
                                                <td>
                                                    <input onfocus="this.select();"
                                                        ng-keypress="interceptarTecla($event,'precio_unitario',false)"
                                                        step="0.001" min="0.001" class="col-xs-12"
                                                        ng-model="detallePedidoo.cantidad" type="number" />
                                                </td>
                                                <td>
                                                    <input onfocus="this.select();"
                                                        ng-keypress="interceptarTecla($event,'agregar_detalle_venta',false)"
                                                        step="0.001" min="0.001" class="col-xs-12"
                                                        ng-model="detallePedidoo.costo_unitario" type="number" />
                                                    <input disabled hidden id="total" step="0.001" min="0.001"
                                                        class="col-xs-12" ng-model="detallePedidoo.total"
                                                        type="number" />
                                                </td>
                                                <td>
                                                    <button type="button"
                                                        ng-disabled="!detallePedidoo.descripcion || !detallePedidoo.unidad_medida || !detallePedidoo.cantidad || !detallePedidoo.costo_unitario"
                                                        ng-click="agregardetalleServicio(detallePedidoo)"
                                                        class="btn btn-success btn-sm">
                                                        <i class="ace-icon fa fa-plus bigger-110"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- </form> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>
                                    <label>Nro.</label>
                                </th>
                                <th>
                                    <label>Descripcion de Servicio</label>
                                </th>
                                <th>
                                    <label>Unidad de medida</label>
                                </th>
                                <th>
                                    <label>Cantidad</label>
                                </th>
                                <th>
                                    <label>P.U</label>
                                </th>
                                <th>
                                    <label>total</label>
                                </th>
                                <th ng-if="!pedido.ver">
                                    <label>Acciones</label>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-if="!detalleServicio.eliminado"
                                ng-repeat="detalleServicio in pedido.detallesOrdenServicios track by $index">
                                <td>
                                    {{$index+1}}
                                </td>
                                <td>
                                    {{detalleServicio.descripcion}}
                                </td>
                                <td>
                                    {{detalleServicio.unidad_medida}}
                                </td>
                                <td>
                                    <input ng-disabled="pedido.ver" type="number" class="form-control" step="0.001"
                                        min="0.001" class="col-xs-12" ng-model="detalleServicio.cantidad"
                                        ng-change="calcularImporteServicioMod(detalleServicio)" />
                                </td>
                                <td>
                                    <input ng-disabled="pedido.ver" type="number" class="form-control" step="0.001"
                                        min="0.001" class="col-xs-12" ng-model="detalleServicio.costo_unitario"
                                        ng-change="calcularImporteServicioMod(detalleServicio)" />
                                </td>
                                <td>
                                    {{detalleServicio.total | number:2}}
                                </td>
                                <td ng-if="!pedido.ver">
                                    <div class="col-sm-12">
                                        <a class="red" href="javascript:void(0)"
                                            ng-click="eliminarDetalleServicio(detalleServicio)">
                                            <i class="ace-icon fa fa-trash-o bigger-150"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="5">
                                    Total General
                                </td>
                                <td>{{pedido.importe | number:2}}</td>
                                <td ng-if="!pedido.ver" colspan="3"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div class="modal-footer wizard-actions">
                <button ng-if="!pedido.ver" type="submit" class="btn btn-success">GUARDAR</button>
                <button type="button" ng-click="cerrarModalEdicionServicio()"
                    class="btn btn-danger pull-left">SALIR</button>
            </div>
        </form>
    </div>
</div>